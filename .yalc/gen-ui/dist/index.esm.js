class t{get x(){return this.offsetX}get y(){return this.offsetY}set x(t){this.offsetX=t}set y(t){this.offsetY=t}constructor(t,e){this.offsetX=t,this.offsetY=e}static get zero(){return new t(0,0)}toVector(){return new e(this.offsetX,this.offsetY)}copy(){return new t(this.offsetX,this.offsetY)}add(e){return new t(this.offsetX+e.x,this.offsetY+e.y)}}class e extends t{constructor(t,e){super(t,e),this.x=t,this.y=e}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}mult(t){return this.x*=t.x,this.y*=t.y,this}multNumber(t){return this.x*=t,this.y*=t,this}div(t){return this.x/=t.x,this.y/=t.y,this}divNumber(t){return this.x/=t,this.y/=t,this}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}dist(t){let e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}normalize(){let t=this.mag();return this.x/=t,this.y/=t,this}clampX(t,e){this.x=Math.min(Math.max(this.x,t),e)}clampY(t,e){this.y=Math.min(Math.max(this.y,t),e)}clamp(t){let[e,i]=t;this.x=Math.min(Math.max(this.x,i),e),this.y=Math.min(Math.max(this.y,i),e)}copy(){return new e(this.x,this.y)}set(t){this.x=t.x,this.y=t.y}setXY(t,e){this.x=t,this.y=e}toJson(){return{x:this.x,y:this.y}}half(){return this.x*=.5,this.y*=.5,this}troweling(){return this.x=this.x>>0,this.y=this.y>>0,this}equals(t){return t.x==this.x&&t.y==this.y}toArray(){return[this.x,this.y]}toZero(){this.x=0,this.y=0}double(){return this.x*=2,this.y*=2,this}negate(){return this.x*=-1,this.y*=-1,this}static dist(t,i){let s=e.sub(t,i);return e.mag(s)}static mag(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static sub(t,i){return new e(t.x-i.x,t.y-i.y)}static add(t,i){return new e(t.x+i.x,t.y+i.y)}static mult(t,i){return new e(t.x*i,t.y*i)}static troweling(t){return t.x=t.x>>0,t.y=t.y>>0,t}static get zero(){return new e(0,0)}}class i{constructor(t,e){this._width=isNaN(t)?0:t,this._height=isNaN(e)?0:e}static get zero(){return new i(0,0)}get width(){return this._width}get height(){return this._height}set width(t){this._width=t}set height(t){this._height=t}toVector(){return new e(this._width,this._height)}half(){return this.width*=.5,this.height*=.5,this}copy(){return new i(this._width,this._height)}equals(t){return(null==t?void 0:t.width)===this._width&&(null==t?void 0:t.height)===this._height}setWidth(t){this._width=t}setHeight(t){this._height=t}toObject(){return{width:this._width,height:this._height}}contains(t){return t.x>=0&&t.x<this.width&&t.y>=0&&t.y<this.height}}class s{constructor(t,e,i,s){this._x=isNaN(t)?0:t,this._y=isNaN(e)?0:e,this._width=isNaN(i)?0:i,this._height=isNaN(s)?0:s}static compose(t,e){return new s(t.x,t.y,e.width,e.height)}update({x:t=0,y:e=0,width:i=0,height:s=0}){this._x=t,this._y=e,this._width=i,this._height=s}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}set x(t){this._x=t}set y(t){this._y=t}set width(t){this._width=t}set height(t){this._height=t}static get zero(){return new s(0,0,0,0)}get left(){return this._x}get right(){return this._x+this._width}get top(){return this._y}get bottom(){return this._y+this._height}contains(t){return t.x>=this.left&&t.x<this.right&&t.y>=this.top&&t.y<this.bottom}get size(){return new i(this._width,this._height)}get offset(){return new t(this._x,this._y)}set offset(t){this._x=t.offsetX,this._y=t.offsetY}static merge(t,e){return new s(t.x,t.y,e.width,e.height)}get shortestSide(){return Math.min(Math.abs(this.width),Math.abs(this.height))}get longestSide(){return Math.max(Math.abs(this.width),Math.abs(this.height))}copy(){return new s(this._x,this._y,this._width,this._height)}}class n extends Error{constructor(t){super(t),this.name="GenUIError"}}class r extends n{constructor(t){super("Assertion failed: "+t),this.name="AssertionError"}}class o extends n{constructor(){super("A null value was thrown."),this.name="NullThrownError"}}class a extends n{constructor(t){super("Invalid argument: "+t),this.name="ArgumentError"}}class h extends n{constructor(t){super("Invalid state: "+t),this.name="StateError"}}class l{static assertValidConstraints(t,e,i){if(t.hasInfiniteWidth||t.hasInfiniteHeight){const s=[];let n=e;for(;n;)s.push(n.constructor.name),n=n.parent;const o=["⚠️ Invalid layout constraints detected.",i?"Context: "+i:null,"Constraints: minWidth="+t.minWidth+", maxWidth="+t.maxWidth+", minHeight="+t.minHeight+", maxHeight="+t.maxHeight,"Render tree trace: "+s.reverse().join(" → ")].filter(Boolean).join("\n");throw new r(o)}}}class d{}class c extends d{constructor(t={}){var e,i,s,n;if(super(),this.minWidth=null!==(e=null==t?void 0:t.minWidth)&&void 0!==e?e:0,this.minHeight=null!==(i=null==t?void 0:t.minHeight)&&void 0!==i?i:0,this.maxHeight=null!==(s=t.maxHeight)&&void 0!==s?s:1/0,this.maxWidth=null!==(n=t.maxWidth)&&void 0!==n?n:1/0,this.minWidth>this.maxWidth||this.minHeight>this.maxHeight)throw new a("BoxConstraints are invalid: min > max.")}get hasTightWidth(){return this.minWidth>=this.maxWidth}get hasTightHeight(){return this.minHeight>=this.maxHeight}get isTight(){return this.hasTightHeight&&this.hasTightWidth}get hasInfiniteWidth(){return this.minWidth>=1/0}get hasInfiniteHeight(){return this.minHeight>=1/0}get hasBoundedWidth(){return this.maxWidth<1/0}get hasBoundedHeight(){return this.maxHeight<1/0}equals(t){return this.minHeight==t.minHeight&&this.maxHeight===t.maxHeight&&this.minWidth===t.minWidth&&this.maxWidth===t.maxWidth}constrainSizeAndAttemptToPreserveAspectRatio(t){let e=t.width,s=t.height;if(e<0||s<0)return i.zero;const n=e/s;e>this.maxWidth&&(e=this.maxWidth,s=e/n),s>this.maxHeight&&(s=this.maxHeight,e=s*n),e<this.minWidth&&(e=this.minWidth,s=e/n),s<this.minHeight&&(s=this.minHeight,e=s*n);return new i(this.constrainWidth(e),this.constrainHeight(s))}static expand(t,e){return new c({minWidth:null!=t?t:1/0,maxWidth:null!=t?t:1/0,minHeight:null!=e?e:1/0,maxHeight:null!=e?e:1/0})}deflate(t){const e=t.x,i=t.y,s=Math.max(0,this.minWidth-e),n=Math.max(0,this.minHeight-i);return new c({minWidth:s,maxWidth:Math.max(s,this.maxWidth-e),minHeight:n,maxHeight:Math.max(n,this.maxHeight-i)})}tighten(t,e){const i=this.minWidth,s=this.minHeight,n=this.maxWidth,r=this.maxHeight;return new c({minWidth:null==t?i:this.clamp(t,i,n),maxWidth:null==t?n:this.clamp(t,i,n),minHeight:null==e?s:this.clamp(e,s,r),maxHeight:null==e?r:this.clamp(e,s,r)})}enforce(t){return new c({minWidth:this.clamp(this.minWidth,t.minWidth,t.maxWidth),maxWidth:this.clamp(this.maxWidth,t.minWidth,t.maxWidth),minHeight:this.clamp(this.minHeight,t.minHeight,t.maxHeight),maxHeight:this.clamp(this.maxHeight,t.minHeight,t.maxHeight)})}constrainWidth(t){return this.clamp(t,this.minWidth,this.maxWidth)}constrainHeight(t){return this.clamp(t,this.minHeight,this.maxHeight)}constrain(t){const e=new i(this.constrainWidth(t.width),this.constrainHeight(t.height));if(e.width<0||e.height<0)throw new h("BoxConstraints collapsed: width="+e.width+", height="+e.height);return e}clamp(t,e,i){if(e>i||Number.isNaN(i)||Number.isNaN(e))throw new a("Invalid value.");return t<e?e:t>i||Number.isNaN(t)?i:t}static get zero(){return new c}static tightFor(t,e){return new c({maxHeight:null!=e?e:1/0,maxWidth:null!=t?t:1/0,minHeight:null!=e?e:0,minWidth:null!=t?t:0})}loosen(){return new c({minWidth:0,maxWidth:this.maxWidth,minHeight:0,maxHeight:this.maxHeight})}}var u,p;(p=u||(u={})).fill="fill",p.stroke="stroke";class g{constructor(t=g._paint){this.paint=null,this.style=u.fill,this._hasDrawFunction=null,this.paint=t}static setPaint(t=g._paint){g._paint=t}setPaintQuality(t){try{(null==t?void 0:t.imageSmoothingEnabled)&&(t.imageSmoothingEnabled=!0),(null==t?void 0:t.imageSmoothingQuality)&&(t.imageSmoothingQuality="high")}catch(t){null===console||void 0===console||console.error("Get error while set paint quality.")}}get canvas(){if("undefined"!=typeof window)return this.paint.canvas}set lineWidth(t){this.paint.lineWidth=t}set fillStyle(t){this.paint.fillStyle=t}set strokeStyle(t){this.paint.strokeStyle=t}set shadowColor(t){this.paint.shadowColor=t}set shadowBlur(t){this.paint.shadowBlur=t,this.paint.shadowOffsetX}setShadow(t){this.shadowColor=null==t?void 0:t.shadowColor.rgba,this.shadowBlur=(null==t?void 0:t.shadowBlur)||0,this.shadowOffsetX=(null==t?void 0:t.shadowOffsetX)||0,this.shadowOffsetY=(null==t?void 0:t.shadowOffsetY)||0}set shadowOffsetX(t){this.paint.shadowOffsetX=t}set shadowOffsetY(t){this.paint.shadowOffsetY=t}set textBaseLine(t){var e;(null===(e=this.paint)||void 0===e?void 0:e.textBaseline)&&(this.paint.textBaseline=t)}drawSync(){var t,e;null===(e=null===(t=this.paint)||void 0===t?void 0:t.draw)||void 0===e||e.call(t,this.paint)}get hasDrawFunction(){var t;return null===this._hasDrawFunction&&(this._hasDrawFunction=!!(null===(t=this.paint)||void 0===t?void 0:t.draw)),this._hasDrawFunction}draw(){return new Promise((t=>{var e;const i=this.paint;null!=(null==i?void 0:i.draw)?null===(e=null==i?void 0:i.draw)||void 0===e||e.call(i,i,(()=>{t()})):t()}))}strokeRect(t,e,i,s){this.paint.strokeRect(t,e,i,s)}fillRect(t,e,i,s){this.paint.fillRect(t,e,i,s)}stroke(){this.paint.stroke()}clearRect(t,e,i,s){this.paint.clearRect(t,e,i,s),this.drawSync()}save(){this.paint.save()}rotate(t){this.paint.rotate(t)}beginPath(){this.paint.beginPath()}closePath(){this.paint.closePath()}restore(){this.paint.restore()}restoreShadow(){this.setShadow({shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0})}translate(t,e){this.paint.translate(t,e)}fill(){this.paint.fill()}rect(t,e,i,s){this.paint.rect(t,e,i,s)}clip(t){var e,i;t?null===(e=this.paint)||void 0===e||e.clip(t):null===(i=this.paint)||void 0===i||i.clip()}arc(t,e,i,s,n,r){this.paint.arc(t,e,i,s,n,r)}arcTo(t,e,i,s,n){this.paint.arcTo(t,e,i,s,n)}ellipse(t,e,i,s){this.paint.save(),this.paint.translate(t,e);const n=i>s?i:s,r=i/n,o=s/n;this.paint.scale(r,o),this.paint.beginPath(),this.paint.arc(0,0,n,0,2*Math.PI),this.paint.closePath(),this.paint.restore()}drawImage(t,e,i,s,n,r,o,a,h){this.paint.drawImage(t,e,i,s,n,r,o,a,h)}scale(t,e){this.paint.scale(t,e)}moveTo(t,e){this.paint.moveTo(t,e)}lineTo(t,e){this.paint.lineTo(t,e)}getImageData(t,e,i,s){return this.paint.getImageData(t,e,i,s)}fillText(t,e,i){this.paint.fillText(t,e,i)}strokeText(t,e,i,s){this.paint.strokeText(t,e,i,s)}set font(t){this.paint.font=t}setFont(t){this.font=t}getFont(){var t;return null===(t=this.paint)||void 0===t?void 0:t.font}set globalAlpha(t){this.paint.globalAlpha=t}measureText(t){var e;return null===(e=this.paint)||void 0===e?void 0:e.measureText(t)}set lineCap(t){this.paint.lineCap=t}set lineJoin(t){this.paint.lineJoin=t}quadraticCurveTo(t,e,i,s){this.paint.quadraticCurveTo(t,e,i,s)}setLineDash(t){var e;null===(e=this.paint)||void 0===e||e.setLineDash(t)}putImageData(t,e,i){this.paint.putImageData(t,e,i)}createLinearGradient(t,e,i,s){var n,r;return null===(r=null===(n=this.paint)||void 0===n?void 0:n.createLinearGradient)||void 0===r?void 0:r.call(n,t,e,i,s)}createRadialGradient(t,e,i,s,n,r){var o;return null===(o=this.paint)||void 0===o?void 0:o.createRadialGradient(t,e,i,s,n,r)}transform(t){this.paint.transform(t[0],t[1],t[4],t[5],t[12],t[13])}createConicGradient(t,e,i){var s;return null===(s=this.paint)||void 0===s?void 0:s.createConicGradient(t,e,i)}roundRect(t,e,i,s,n){const r=Math.PI/180;let o;o=Array.isArray(n)?n.map((t=>Math.min(t,Math.min(i,s)/2))):new Array(4).fill(n).map((t=>Math.min(t,Math.min(i,s)/2))),this.beginPath(),this.moveTo(t+o[0],e),this.lineTo(t+i-o[1],e),this.arc(t+i-o[1],e+o[1],o[1],270*r,360*r,!1),this.lineTo(t+i,e+s-o[2]),this.arc(t+i-o[2],e+s-o[2],o[2],0*r,90*r,!1),this.lineTo(t+o[3],e+s),this.arc(t+o[3],e+s-o[3],o[3],90*r,180*r,!1),this.lineTo(t,e+o[0]),this.arc(t+o[0],e+o[0],o[0],180*r,270*r,!1),this.closePath()}update(){}}g._paint=null;class m{constructor(){this.list=new Array}push(t){this.list.push(t)}addFirst(t){this.list.push(t)}addLast(t){this.list.unshift(t)}removeFirst(){return this.list.shift()}removeLast(){return this.list.pop()}get size(){return this.list.length}get isEmpty(){return 0===this.size}clear(){this.list=[]}}class f{}class v extends f{constructor(){super(...arguments),this._value=Math.random().toString(16).substring(3)}get value(){return this._value}}class x extends v{get currentElement(){return ri.instance.buildOwner.getElementByGlobalKey(this)}get currentWidget(){var t;return null===(t=this.currentElement)||void 0===t?void 0:t.widget}}class w{constructor(t){if(this.key=new v,this.baseConfig=t,this.screenWidth<=0||this.screenHeight<=0||this.devicePixelRatio<=0)throw new Error("screenWidth, screenHeight and devicePixelRatio must be greater than 0")}static InitInstance(t){return w._instance=new w(t),w._instance}static get instance(){return w._instance}get config(){return this.baseConfig}get rawScreenWidth(){return this.baseConfig.screenWidth}get rawScreenHeight(){return this.baseConfig.screenHeight}get screenWidth(){return this.devicePixelRatio*this.rawScreenWidth}get screenHeight(){return this.devicePixelRatio*this.rawScreenHeight}get devicePixelRatio(){return this.baseConfig.devicePixelRatio}get isDebug(){var t;return null===(t=this.baseConfig)||void 0===t?void 0:t.debug}get showBanner(){var t;return null===(t=this.baseConfig)||void 0===t?void 0:t.showBanner}get strategies(){var t;return null===(t=this.baseConfig)||void 0===t?void 0:t.strategies}get painter(){var t,e;return(null===(t=this.strategies)||void 0===t?void 0:t.getPainterStrategy()).getPainter(null===(e=this.baseConfig)||void 0===e?void 0:e.renderContext)}get canvas(){var t;return null===(t=this.baseConfig)||void 0===t?void 0:t.canvas}}const y=t=>Math.sin(t),b=t=>Math.cos(t),P=(t,e,i)=>t<e?e:t>i||isNaN(t)?i:t;class S{constructor(t=0){if(this.value=t,t<0||t>4294967295)throw new Error("Color value must be between 0 and 4294967295.But got "+t)}get red(){return(16711680&this.value)>>>16}get green(){return(65280&this.value)>>>8}get blue(){return(255&this.value)>>>0}get alpha(){return(4278190080&this.value)>>>24}withAlpha(t){const e=(16777215&this.value|(255&t)<<24)>>>0;return new S(e)}withOpacity(t){return t=Math.min(1,Math.max(0,t)),this.withAlpha(255*t)}withRed(t){return S.fromRGBA(t,this.green,this.blue,this.alpha)}withGreen(t){return S.fromRGBA(this.red,t,this.blue,this.alpha)}withBlue(t){return S.fromRGBA(this.red,this.green,t,this.alpha)}lerp(t,e){return S.lerp(this,t,e)}get opacity(){return this.alpha/255}get rgba(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.opacity+")"}get rgb(){return"rgb("+this.red+", "+this.green+", "+this.blue+")"}get color(){return this.value}equals(t){return!!t&&t.color===this.color}static lerp(t,e,i){const s=(t,e,i)=>Math.floor(t+(e-t)*i),n=s(t.red,e.red,i),r=s(t.green,e.green,i),o=s(t.blue,e.blue,i),a=s(t.alpha,e.alpha,i);return S.fromRGBA(P(n,0,255),P(r,0,255),P(o,0,255),P(a,0,255))}static fromRGBA(t,e,i,s){return new S(((255&s)<<24>>>0|(255&t)<<16|(255&e)<<8|255&i)>>>0)}}class _{static get black(){return new S(4278190080)}static get white(){return new S(4294967295)}static get red(){return new S(4294901760)}static get green(){return new S(4278255360)}static get blue(){return new S(4278190335)}static get yellow(){return new S(4294967040)}static get cyan(){return new S(4278255615)}static get magenta(){return new S(4294902015)}static get transparent(){return new S(0)}static get gray(){return new S(4286611584)}static get darkGray(){return new S(4289309097)}static get orange(){return new S(4294944e3)}static get pink(){return new S(4294951115)}}var C,D,T,E,R,A,L,z,k,B,O,W,H,M,N,I,j,V,F,U,Z,G,X,Y,q,K,J,Q,$,tt,et,it,st,nt,rt,ot,at,ht,lt,dt;(D=C||(C={})).horizontal="horizontal",D.vertical="vertical",(E=T||(T={})).none="none",E.hardEdge="hardEdge",E.antiAlias="antiAlias",(A=R||(R={})).start="start",A.end="end",A.center="center",A.spaceBetween="spaceBetween",A.spaceAround="spaceAround",A.spaceEvenly="spaceEvenly",(z=L||(L={})).start="start",z.end="end",z.center="center",z.stretch="stretch",z.baseline="baseline",(B=k||(k={})).loose="loose",B.expand="expand",B.passthrough="passthrough",(W=O||(O={})).rtl="rtl",W.ltr="ltr",(M=H||(H={})).start="start",M.end="end",M.center="center",M.spaceBetween="spaceBetween",M.spaceAround="spaceAround",M.spaceEvenly="spaceEvenly",(I=N||(N={})).start="start",I.end="end",I.center="center",(V=j||(j={})).up="up",V.down="down",V.left="left",V.right="right",(U=F||(F={})).forward="forward",U.reverse="reverse",(G=Z||(Z={})).idle="idle",G.forward="forward",G.reverse="reverse",(Y=X||(X={})).normal="normal",Y.bold="bold",(K=q||(q={})).normal="normal",K.italic="italic",(Q=J||(J={})).none="none",Q.underline="underline",Q.overline="overline",Q.lineThrough="line-through",(tt=$||($={})).solid="solid",tt.dashed="dashed",(it=et||(et={})).clip="clip",it.ellipsis="ellipsis",it.visible="visible",(nt=st||(st={})).left="left",nt.right="right",nt.center="center",nt.justify="justify",nt.start="start",nt.end="end",nt.unset="unset",nt.none="none",(ot=rt||(rt={})).alphabetic="alphabetic",ot.ideographic="ideographic",ot.top="top",ot.middle="middle",ot.bottom="bottom",(ht=at||(at={})).max="max",ht.min="min",(dt=lt||(lt={})).none="none",dt.solid="solid",dt.dashed="dashed";class ct{}class ut{constructor(t){this._width=t}get width(){return this._width}}class pt{constructor(t){var e,i,s,n;this.textAlign=st.unset,this.textDirection=O.ltr,this.maxLines=1/0,this.height=0,this.fontFamily="serif",t&&(this.textAlign=null!==(e=t.textAlign)&&void 0!==e?e:this.textAlign,this.textDirection=null!==(i=t.textDirection)&&void 0!==i?i:this.textDirection,this.maxLines=null!==(s=t.maxLines)&&void 0!==s?s:this.maxLines,this.ellipsis=t.ellipsis,this.height=t.height,this.fontFamily=null!==(n=t.fontFamily)&&void 0!==n?n:this.fontFamily)}getParagraphStyle(t={}){var e,i,s,n,r,o;return new pt({textAlign:null!==(e=null==t?void 0:t.textAlign)&&void 0!==e?e:this.textAlign,textDirection:null!==(i=null==t?void 0:t.textDirection)&&void 0!==i?i:this.textDirection,fontFamily:null!==(s=null==t?void 0:t.fontFamily)&&void 0!==s?s:this.fontFamily,height:null!==(n=null==t?void 0:t.height)&&void 0!==n?n:this.height,ellipsis:null!==(r=t.ellipsis)&&void 0!==r?r:this.ellipsis,maxLines:null!==(o=null==t?void 0:t.maxLines)&&void 0!==o?o:this.maxLines})}}class gt extends pt{constructor(t){var e,i,s,n,r,o,a,h,l,d,c,u;if(super(t),this.fontWeight=X.normal,this.fontStyle=q.normal,this.letterSpacing=0,this.wordSpacing=0,this.decoration=J.none,this.decorationStyle=$.solid,t){if(this.color=null!==(e=t.color)&&void 0!==e?e:this.color,this.fontSize=null!==(i=t.fontSize)&&void 0!==i?i:this.fontSize,this.fontWeight=null!==(s=t.fontWeight)&&void 0!==s?s:this.fontWeight,this.fontStyle=null!==(n=t.fontStyle)&&void 0!==n?n:this.fontStyle,this.letterSpacing=null!==(r=t.letterSpacing)&&void 0!==r?r:this.letterSpacing,this.wordSpacing=null!==(o=t.wordSpacing)&&void 0!==o?o:this.wordSpacing,this.decoration=null!==(a=t.decoration)&&void 0!==a?a:this.decoration,this.decorationStyle=null!==(h=null==t?void 0:t.decorationStyle)&&void 0!==h?h:this.decorationStyle,this.decorationColor=null!==(l=null==t?void 0:t.decorationColor)&&void 0!==l?l:this.decorationColor,this.foreground=null==t?void 0:t.foreground,this.overflow=null==t?void 0:t.overflow,this.shadow=null==t?void 0:t.shadow,null!==(d=this.height)&&void 0!==d||(this.height=1.4*(null!==(c=this.fontSize)&&void 0!==c?c:14)),null!==(u=this.decorationColor)&&void 0!==u||(this.decorationColor=new S(4278190080)),this.foreground&&this.color)throw Error("The 'foreground' and 'color' cannot exist at the same time.");!this.foreground&&!this.color&&(this.color=new S(4278190080))}}getTextStyle(t){return this.copyWith(t)}apply(t){return this.copyWith(t)}toOption(){var t;return{color:this.color,fontSize:null!==(t=this.fontSize)&&void 0!==t?t:14,fontWeight:this.fontWeight,fontStyle:this.fontStyle,letterSpacing:this.letterSpacing,wordSpacing:this.wordSpacing,decoration:this.decoration,decorationStyle:this.decorationStyle,decorationColor:this.decorationColor,foreground:this.foreground,shadow:this.shadow,overflow:this.overflow,textAlign:this.textAlign,textDirection:this.textDirection,maxLines:this.maxLines,ellipsis:this.ellipsis,height:this.height,fontFamily:this.fontFamily}}copyWith(t){return new gt(Object.assign(Object.assign({},this.toOption()),t))}}class mt extends s{constructor(t,e,i){super(0,0,t,e),this.direction=i}static fromLTRBD(t,e,i){return new mt(t,e,i)}copy(){const t=new mt(this.width,this.height,this.direction);return t.lineHeight=this.lineHeight,t.offset=this.offset,t}}class ft{}class vt extends ft{constructor(){super(...arguments),this.index=0,this.broCount=1,this.wordCountWidth=0,this.baseLineOffsetY=0}get offset(){return this.box.offset}set offset(t){this.box.offset=t}}class xt{hiddenTextPoint(){this._hidden=!0}disable(){this._hidden=!0}enable(){this._hidden=!1}get hidden(){return this._hidden}constructor(t){this.parentData=new vt,this.isSpace=!1,this._hidden=!0,this.text=t,this.isSpace=Ct.isSpace(this.charCodePoint)}get charCodePoint(){return this.text.charCodeAt(0)}get isWord(){return!this.isSpace}}class wt extends ft{}class yt{getTextPointForOffset(t){return null}getTextBoxesForRange(t){return[]}}class bt extends yt{constructor(){super(...arguments),this.parentData=new wt,this.textStyle=new gt,this.textPoints=[],this.size=i.zero,this.currentInsertTextPointIndex=0}get width(){return this.size.width}get height(){return this.size.height}pushStyle(t){this.textStyle=t}addText(t){this.text=t}layout(e,i,s=t.zero){this.text.length&&(this.performLayoutTextOffset(i,s,e),this.handleCompileWord(),this.performConstraintsWidth(e,0,1,this.textStyle.maxLines),this.performLayoutOffsetYByColumn(),this.performLayoutTextAlignment(e),this.performLayoutLinePoints())}performLayoutLinePoints(){if(this.textStyle.decoration==J.none)return;const t=this.textStyle.fontSize,e=Ct.getRowsByNodeTree(this.firstTextPoint).values();let i;for(this.linePoints=[];;){const s=e.next();if(s.done)break;i=s.value;const n=i.textPoints,r=n.length;if(r>=1){const e=n[0],i=e.parentData.box.lineHeight,s=e.parentData.box.width,o=e.parentData.offset.copy(),a=(1===r?e:n[r-1]).parentData.offset.copy();a.x+=s;let h=0;switch(this.textStyle.decoration){case J.underline:h=-.5*(i-t);break;case J.overline:h=-.5*(i-t)-t;break;case J.lineThrough:h=-.5*(i-t)-.5*t}o.y+=h+e.parentData.baseLineOffsetY,a.y+=h+e.parentData.baseLineOffsetY,this.linePoints.push({start:o,end:a})}}}applyTextStyle(t,e){var i;e&&t.save(),t.font=this.textStyle.fontWeight+" "+this.textStyle.fontStyle+" "+~~(null!==(i=this.textStyle.fontSize)&&void 0!==i?i:14)+"px "+this.textStyle.fontFamily,this.textStyle.shadow&&t.setShadow(this.textStyle.shadow),null==e||e(t),e&&t.restore()}handleCompileWord(){let t=this.firstTextPoint,e=this.firstTextPoint,i=0;for(;null!=t;){const s=t.parentData,n=null==t?void 0:t.charCodePoint;Ct.isNewline(n)||Ct.isSpace(n)||n>256?(s.broCount=1,t=s.nextNode,e=t,i=0):(t=s.nextNode,e.parentData.broCount=++i,i>=1&&(null==t?void 0:t.isWord)&&(t.parentData.broCount=0),e.parentData.wordCountWidth+=s.box.width)}}getRowByColumn(t){return Ct.getRowsByNodeTree(this.firstTextPoint).get(t)}performLayoutTextAlignment(t){if(this.textStyle.textAlign===st.unset)return;const e=Ct.getRowsByNodeTree(this.firstTextPoint),i=[...e.keys()];for(let s=0;s<i.length;s++){const n=i[s],r=e.get(Number(n));this.applyLayoutAlignByRow(r,t,s===i.length-1)}}applyLayoutAlignByRow(e,i,s=!1){if(!e)return;const n=i.width;let r=0,o=0;const a=null==e?void 0:e.textPoints,h=null==e?void 0:e.countWidth,l=Math.max(n-h,0),d=l>0,c=a.reduce(((t,e)=>t+(e.parentData.broCount&&!e.hidden?1:0)),0);switch(this.textStyle.textAlign){case st.end:r=l;break;case st.center:r=.5*l;break;case st.start:r=0,o=0;break;case st.justify:o=l/(c-1),(s||l>2*this.textStyle.fontSize)&&(o=0,r=0)}let u=r;d&&a.forEach(((e,i)=>{const s=e.parentData;s.broCount&&(s.offset=new t(u,s.offset.y),u+=s.wordCountWidth||s.box.width,u+=o,this.performLayoutRow(e,s.offset,s.broCount))}))}performConstraintsWidth(e,i=0,s=1,n=1/0){var r;if(s>n)return{column:s,subDeltaX:i};let o=i;const a=e.width,h=this.textPoints.length;let l=0;for(let e=0;e<h;){const i=this.textPoints[e],h=i.text.charCodeAt(0),d=i.parentData,c=d.broCount;let u=d.offset;const p=d.box,g=(d.wordCountWidth||p.width)+u.x+o,m=Ct.isNewline(h);if((g>a||m)&&(o=-u.x,(s+=1)>=n))return(null===(r=this.textStyle)||void 0===r?void 0:r.overflow)===et.ellipsis&&this.replaceEllipsis(i.parentData.preNode),{column:s,subDeltaX:o};let f=o+u.x;u=new t(f,0),d.column=s,m&&(u.x=l,o-=p.width),0!==c&&this.performLayoutRow(i,u,c),0===d.wordCountWidth&&(d.wordCountWidth=p.width),l=f+d.wordCountWidth,i.parentData=d,e+=c||1}return{column:s,subDeltaX:o}}replaceEllipsis(t){var e;if(t&&t){const i=!!this.textStyle.ellipsis,s=null!==(e=this.textStyle.ellipsis)&&void 0!==e?e:"…";t.text=s;const n=t.parentData.box,r=this.getTextBox(this.getMeasureText(w.instance.painter,s));r.x=n.x,r.lineHeight=n.lineHeight,i||(r.height=n.lineHeight),t.parentData.box=r}}performLayoutOffsetYByColumn(e=0){let i=this.firstTextPoint,s=0,n=0;for(;null!=i;){const r=null==i?void 0:i.parentData,o=r.column*r.box.lineHeight+e;r.offset=new t(r.offset.x,o),s=Math.max(isNaN(o)?0:o,s),n=Math.max(n,r.offset.x+r.box.width),i=r.nextNode}this.size.setHeight(s),this.size.setWidth(n)}performLayoutTextOffset(t,e,i){this.applyTextStyle(t);const s=Array.from(this.text);let n;for(const e of s){const i=this.insertTextToList(e,t,n);n=i,!this.firstTextPoint&&(this.firstTextPoint=i)}this.visitTexts((t=>(Ct.isNewline(t.charCodePoint)&&(t.parentData.box.width=0,t.parentData.visualBox.width=i.width),!0))),this.performLayoutRow(this.firstTextPoint,e,null,!0)}performLayoutRow(e,i,s,n){var r;let o=null!==(r=null==i?void 0:i.x)&&void 0!==r?r:0,a=e,h=0;const l=e.parentData;for(;null!=a;){if(a.enable(),s&&(h+=1)>s)return;const e=null==a?void 0:a.parentData;let i=t.zero;const r=e.box;n&&Ct.isSpace(a.charCodePoint)&&(r.width+=this.textStyle.wordSpacing);const d=l.offset.y;i=new t(o,d),e.offset=i,e.column=l.column,a=e.nextNode,o+=r.width,this.lastTextPoint=null!=a?a:this.lastTextPoint}}getNextStartOffset(){var e;if(0===this.textPoints.length)return t.zero;const i=null===(e=this.lastTextPoint)||void 0===e?void 0:e.parentData;if(!i)return t.zero;const s=i.offset.copy(),n=t.zero;n.x+=s.x,n.y+=s.y;const r=new t(this.textStyle.fontSize,-(this.textStyle.fontSize+Math.max(0,this.textStyle.height-this.textStyle.fontSize)));return n.x+=r.x,n.y+=r.y,n}insertTextToList(t,e,i){const s=this.textStyle.height,n=this.getMeasureText(e,t),r=this.getTextBox(n),o=new xt(t),a=o.parentData;return r.lineHeight=s,a.box=r,a.visualBox=r.copy(),i&&(o.parentData.preNode=i,i.parentData.nextNode=o),a.index=this.currentInsertTextPointIndex,o.parentData=a,o.disable(),this.textPoints.push(o),this.currentInsertTextPointIndex++,o}getTextBox(t){var e;const i=this.textStyle.letterSpacing;return this.textPoints.length,mt.fromLTRBD(t.width+i,null!==(e=t.hangingBaseline)&&void 0!==e?e:t.width,this.textStyle.textDirection)}getMeasureText(t,e){return t.measureText(e)}paint(e,i=t.zero,s=!1){return this.textPoints&&(this.applyTextStyle(e,(t=>{this.textStyle.decorationStyle===$.dashed&&t.setLineDash([5,5]),t.strokeStyle=this.textStyle.decorationColor.rgba,this.performPaintLines(t,i)})),this.applyTextStyle(e,(t=>{if(this.textStyle.foreground){const t=this.textStyle.foreground;this.performPaint(t,i,s)}else t.fillStyle=this.textStyle.color.rgba,this.performPaint(t,i,s)}))),this.getNextStartOffset()}performPaintLines(t,e){this.linePoints&&(t.beginPath(),this.linePoints.forEach((i=>{t.moveTo(i.start.x+e.x,i.start.y+e.y),t.lineTo(i.end.x+e.x,i.end.y+e.y)})),t.stroke(),t.closePath())}performPaint(t,e,i){let s=this.firstTextPoint;for(;null!=s;){const n=s.parentData,{x:r,y:o}=n.offset,a=r+e.x,h=o+e.y,{width:l,height:d,lineHeight:c}=n.box;if(s.hidden){s=n.nextNode;continue}let p=h-.5*c+.3*this.textStyle.fontSize+n.baseLineOffsetY;t.style===u.fill?t.fillText(s.text,a,p):t.strokeText(s.text,a,p),i&&(Ct.isSpace(s.charCodePoint)||Ct.isNewline(s.charCodePoint)?(t.beginPath(),t.rect(a,h-c,l,c),Ct.isSpace(s.charCodePoint)?t.strokeStyle="orange":t.strokeStyle="skyblue",t.stroke(),t.closePath()):(t.beginPath(),t.rect(a,h-c,l,c),t.strokeStyle="#ccc",t.closePath(),t.stroke())),s=n.nextNode}}visitTexts(t){var e;let i=this.firstTextPoint;for(;null!=i;){if(!t(i))break;i=null===(e=i.parentData)||void 0===e?void 0:e.nextNode}}getTextPointForOffset(t){var e;let i;if(this.visitTexts((e=>{var n,r;const o=e.parentData.visualBox.lineHeight,a=null===(n=null==e?void 0:e.parentData)||void 0===n?void 0:n.box,h=null===(r=null==e?void 0:e.parentData)||void 0===r?void 0:r.visualBox.width,l=new s(a.x,a.y-o,h,o);return!(null==l?void 0:l.contains(t))||(i=e,!1)})),Ct.isNewline(null==i?void 0:i.charCodePoint)){const t=null===(e=i.parentData)||void 0===e?void 0:e.preNode;if(t)return t}if(!i){const t=this.lastTextPoint;if(t)return t}return i}getTextBoxesForRange(e){const i=new Array;return this.visitTexts((s=>{const n=s.parentData.index;return n>=e.start&&n<=e.end&&i.push((e=>{const i=e.parentData.box.copy();return Ct.isNewline(e.text.charCodeAt(0))&&(i.offset=new t(0,i.offset.y+i.lineHeight)),i})(s)),n<=e.end})),i}}class Pt extends bt{constructor(t){super(),this.maxWidth=0,this.maxHeight=0,this.addAll(t)}addAll(t){if(!t)return;let e;t.forEach((t=>{!this.firstChild&&(this.firstChild=t),this.addChild(t,e),e=t}))}addChild(t,e){t.parentData.preNode=e,e&&(e.parentData.nextNode=t)}layout(t,e,s){this.applyPerformLayoutHorizontalOffset(e,s,t);const n=this.applyPerformLayoutConstraints(t,this.textStyle.maxLines);this.handleLevelRowsLineHeight(n),this.applyAlignText(n,t),this.applyPerformLayoutLinePoint(),this.size=new i(this.maxWidth,this.maxHeight)}applyPerformLayoutLinePoint(){let t=this.firstChild;for(;null!=t;){const e=t.parentData;t.performLayoutLinePoints(),t=e.nextNode}}handleLevelRowsLineHeight(e){const i=this.getRows(e);let s=0,n=0;i.forEach((e=>{let i;e.maxLineHeight!==e.minLineHeight&&(i=i=e.textPoints.find((t=>t.parentData.box.lineHeight===e.maxLineHeight))),e.textPoints.forEach((r=>{var o;const a=r.parentData,h=a.box,l=((null===(o=null==i?void 0:i.parentData)||void 0===o?void 0:o.box)||h).height-h.height;h.lineHeight=e.maxLineHeight;let d=a.box.lineHeight+s;0!=l&&(a.baseLineOffsetY=.5*l),a.offset=new t(a.offset.x,d);const c=a.offset.x+h.width;n=Math.max(n,isNaN(c)?0:c)})),s+=e.maxLineHeight})),this.maxWidth=n,this.maxHeight=s}getRows(t){let e=this.firstChild;const i=new Array;for(;null!=e;){const s=e.parentData;for(let s=1;s<=t;s++){const t=e.getRowByColumn(s);t&&i.push(...t.textPoints)}e=s.nextNode}return Ct.getRowsByArray(i)}applyAlignText(t,e){const i=this.getRows(t),s=[...i.keys()];for(let t=0;t<s.length;t++){const n=s[t],r=i.get(Number(n));this.applyLayoutAlignByRow(r,e,t===s.length-1)}}applyPerformLayoutConstraints(t,e=1/0){let i=this.firstChild,s=0,n=1;for(;null!=i;){const r=i.parentData,{column:o,subDeltaX:a}=i.performConstraintsWidth(t,s,n,e);n=o,s=a,i=r.nextNode}return n}applyPerformLayoutHorizontalOffset(e,i=t.zero,s){let n=this.firstChild,r=i;for(;null!=n;){const t=n.parentData;n.performLayoutTextOffset(e,r,s),n.handleCompileWord(),r=n.getNextStartOffset(),n=t.nextNode}}paint(e,i=t.zero,s=!1){let n=this.firstChild;for(;null!=n;){const t=n.parentData;n.paint(e,i,s),n=t.nextNode}return t.zero}}class St{constructor(t){this.textStyles=[],this.elements=[],this.paragraphStyle=t}addText(t){this.elements.push({text:t,textStyle:this.lastTextStyle})}get lastTextStyle(){const t=this.textStyles.length;return t>=1?this.textStyles[t-1]:null}pushStyle(t){var e;if(this.lastTextStyle){const i=null===(e=this.lastTextStyle)||void 0===e?void 0:e.apply(Object.assign({},t));this.textStyles.push(i)}else this.textStyles.push(t)}pop(){this.textStyles.pop()}build(){let t;const e=[];for(const i of this.elements){const s=new bt;s.addText(i.text),s.pushStyle(i.textStyle),t=s,e.push(s)}return e.length>1&&(t=new Pt(e),t.pushStyle(this.lastTextStyle)),null==t||t.pushStyle(Object.assign(Object.assign({},t.textStyle),this.paragraphStyle)),t}}class _t extends ct{constructor(t){super();const{textStyle:e,children:i,text:s}=t;this.style=null!=e?e:new gt,this.children=i,this.text=null!=s?s:" "}build(t){const e=null!=this.style;if(e&&t.pushStyle(this.style.getTextStyle()),null!==this.text&&t.addText(this.text),this.children)for(const e of this.children)e.build(t);e&&t.pop()}getSpanForPosition(t){throw new Error("Method not implemented.")}visitChildren(t){throw new Error("Method not implemented.")}computeToPlainText(){throw new Error("Method not implemented.")}}class Ct extends yt{get width(){return this.size.width}get height(){return this.size.height}constructor(t,e=w.instance.painter){super(),this.size=i.zero,this.text=t,this.painter=e}createParagraph(){const t=new St(this.text.style.getParagraphStyle());this.text.build(t),this.paragraph=t.build()}layout(t=0,e=1/0){this.isEqualsTextSpan()||(!this.paragraph&&this.createParagraph(),this.paragraph.layout(new ut(e),this.painter),this.size.setWidth(this.paragraph.width),this.size.setHeight(this.paragraph.height),this.preTextSpan=this.text)}paint(e,i=t.zero,s=!1){this.paragraph.paint(e,i,s)}isEqualsTextSpan(){if(null==this.preTextSpan)return!1;if(this.text===this.preTextSpan)return!0;if(this.text.text===this.preTextSpan.text){const t=this.preTextSpan.style,e=this.text.style;return t.fontFamily===e.fontFamily&&t.fontSize===e.fontSize&&t.fontWeight===e.fontWeight&&t.fontStyle===e.fontStyle&&t.letterSpacing===e.letterSpacing&&t.wordSpacing===e.wordSpacing&&t.shadow===e.shadow&&t.decoration===e.decoration}return!1}static isSpace(t){return 32===t}static getRowsByArray(t){const e=new Map;return t.forEach((i=>{const s=i.parentData,n=s.column;let r=e.get(n);!r&&(r={textPoints:[],countWidth:0,maxLineHeight:0,minLineHeight:1/0}),r.countWidth+=s.box.width,r.maxLineHeight=Math.max(r.maxLineHeight,s.box.lineHeight),r.minLineHeight=Math.min(r.maxLineHeight,s.box.lineHeight);const o=t.indexOf(i)+1,a=o<t.length?t[o]:null;(null==a?void 0:a.parentData.column)!=n&&Ct.isSpace(i.charCodePoint)?(r.countWidth-=s.box.width,i.hiddenTextPoint()):r.textPoints.push(i),e.set(n,r)})),e}static getRowsByNodeTree(t){let e=t;const i=new Map;for(;null!=e;){const t=e.parentData,s=t.nextNode,n=t.column;let r=i.get(n);!r&&(r={textPoints:[],countWidth:0,maxLineHeight:0,minLineHeight:1/0}),r.countWidth+=t.box.width,r.maxLineHeight=Math.max(r.maxLineHeight,t.box.lineHeight),r.minLineHeight=Math.min(r.maxLineHeight,t.box.lineHeight),(null==s?void 0:s.parentData.column)!=n&&Ct.isSpace(e.charCodePoint)?(r.countWidth-=t.box.width,e.hiddenTextPoint()):r.textPoints.push(e),i.set(n,r),e=s}return i}static isNewline(t){switch(t){case 10:case 133:case 11:case 12:case 8232:case 8233:return!0;default:return!1}}getTextPointForOffset(t){return this.paragraph.getTextPointForOffset(t)}getTextBoxesForRange(t){var e;return null===(e=this.paragraph)||void 0===e?void 0:e.getTextBoxesForRange(t).map((t=>{const e=t.copy();return e.y-=e.lineHeight,e.height=e.lineHeight,e}))}}class Dt{constructor(t){this.target=t}}class Tt{constructor(){this._path=new Map}get path(){return[...this._path.values()]}add(t){const e=t.target;!this._path.has(e)&&this._path.set(e,t)}}class Et{constructor(t,e){this._matrix=new Array(t*e).fill(0),this.identity()}get matrix(){return this._matrix}getMatrix(){return this._matrix}setMatrix(t){return this._matrix=t,this}setValue(t,e){this._matrix[t]=e}}class Rt extends Et{constructor(){super(4,4)}multiply(t){const e=[...this.matrix],i=new Array(16),s=e[0],n=e[4],r=e[8],o=e[12],a=e[1],h=e[5],l=e[9],d=e[13],c=e[2],u=e[6],p=e[10],g=e[14],m=e[3],f=e[7],v=e[11],x=e[15],w=t.matrix,y=w[0],b=w[4],P=w[8],S=w[12],_=w[1],C=w[5],D=w[9],T=w[13],E=w[2],R=w[6],A=w[10],L=w[14],z=w[3],k=w[7],B=w[11],O=w[15];return i[0]=s*y+n*_+r*E+o*z,i[4]=s*b+n*C+r*R+o*k,i[8]=s*P+n*D+r*A+o*B,i[12]=s*S+n*T+r*L+o*O,i[1]=a*y+h*_+l*E+d*z,i[5]=a*b+h*C+l*R+d*k,i[9]=a*P+h*D+l*A+d*B,i[13]=a*S+h*T+l*L+d*O,i[2]=c*y+u*_+p*E+g*z,i[6]=c*b+u*C+p*R+g*k,i[10]=c*P+u*D+p*A+g*B,i[14]=c*S+u*T+p*L+g*O,i[3]=m*y+f*_+v*E+x*z,i[7]=m*b+f*C+v*R+x*k,i[11]=m*P+f*D+v*A+x*B,i[15]=m*S+f*T+v*L+x*O,this.setMatrix(i),this}identity(){return this.setMatrix([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}static get zero(){return new Rt}scaleValues(t=1,e=1,i=1){this.matrix[0]=t,this.matrix[5]=e,this.matrix[10]=i,this.matrix[15]=1}scale(t=1,e=1,i=1){const s=Rt.zero.identity();s.scaleValues(t,e,i),this.multiply(s)}static skewX(t){const e=Rt.zero.identity();return e.matrix[4]=Math.tan(t),e}skewX(t){return this.multiply(Rt.skewX(t)),this}static skewY(t){const e=Rt.zero.identity();return e.matrix[1]=Math.tan(t),e}skewY(t){return this.multiply(Rt.skewY(t)),this}static skew(t,e){const i=Rt.zero.identity();return i.matrix[4]=Math.tan(t),i.matrix[1]=Math.tan(e),i}skew(t,e){return this.multiply(Rt.skew(t,e)),this}translateValues(t=0,e=0,i=0){this.matrix[12]=t,this.matrix[13]=e,this.matrix[14]=i}translate(t=0,e=0,i=0){const s=Rt.zero.identity();return s.translateValues(t,e,i),this.multiply(s),this}rotateZ(t){const e=b(t),i=y(t),s=Rt.zero.identity(),n=s.matrix;n[0]=e,n[1]=i,n[4]=-i,n[5]=e,this.multiply(s)}rotateY(t){const e=b(t),i=y(t),s=Rt.zero.identity(),n=s.matrix;n[0]=e,n[2]=-i,n[8]=i,n[10]=e,this.multiply(s)}rotateX(t){const e=b(t),i=y(t),s=Rt.zero.identity(),n=s.matrix;n[5]=e,n[6]=i,n[9]=-i,n[10]=e,this.multiply(s)}inverted(){const t=this.matrix,e=new Array(16),i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],d=t[8],c=t[9],u=t[10],p=t[11],g=t[12],m=t[13],f=t[14],v=t[15],x=i*a-s*o,w=i*h-n*o,y=i*l-r*o,b=s*h-n*a,P=s*l-r*a,S=n*l-r*h,_=d*m-c*g,C=d*f-u*g,D=d*v-p*g,T=c*f-u*m,E=c*v-p*m,R=u*v-p*f,A=x*R-w*E+y*T+b*D-P*C+S*_;if(!A)throw new Error("Matrix cannot be inverted");const L=1/A;return e[0]=(a*R-h*E+l*T)*L,e[1]=(n*E-s*R-r*T)*L,e[2]=(m*S-f*P+v*b)*L,e[3]=(u*P-c*S-p*b)*L,e[4]=(h*D-o*R-l*C)*L,e[5]=(i*R-n*D+r*C)*L,e[6]=(f*y-g*S-v*w)*L,e[7]=(d*S-u*y+p*w)*L,e[8]=(o*E-a*D+l*_)*L,e[9]=(s*D-i*E-r*_)*L,e[10]=(g*P-m*y+v*x)*L,e[11]=(c*y-d*P-p*x)*L,e[12]=(a*C-o*T-h*_)*L,e[13]=(i*T-s*C+n*_)*L,e[14]=(m*w-g*b-f*x)*L,e[15]=(d*b-c*w+u*x)*L,this.setMatrix(e),this}}class At{constructor(){this._elements=new Set}get elements(){return this._elements}count(){return this.elements.size}clear(){this.elements.forEach((t=>{t.lifecycleState===kt.inactive&&this.unmount(t)})),this.elements.clear()}remove(t){this.elements.delete(t)}performDeactivate(t){t.lifecycleState===kt.inactive&&(t.visitChildren((t=>{this.performDeactivate(t)})),t.deactivate())}add(t){t.lifecycleState===kt.active&&(this.including(t)||(this.performDeactivate(t),this.elements.add(t)))}including(t){return this.elements.has(t)}unmount(t){t&&t.unmount()}}class Lt{constructor(){this.dirtyElementList=[],this.inactiveElements=new At,this.globalKeys=new Map}scheduleBuildFor(t){t.lifecycleState===kt.active&&(this.dirtyElementList.push(t),ei.instance.ensureVisualUpdate())}buildScope(t){this.dirtyElementList.sort(Ot.sort);let e=0;const i=this.dirtyElementList.length;for(;e<i;){const t=this.dirtyElementList[e];t&&t.rebuild(),e+=1}this.dirtyElementList=[]}registerGlobalKey(t,e){this.globalKeys.has(t)||this.globalKeys.set(t,e)}getElementByGlobalKey(t){return this.globalKeys.get(t)}}class zt{get size(){return null}findRenderView(){return null}}var kt,Bt;(Bt=kt||(kt={})).initial="initial",Bt.active="active",Bt.inactive="inactive",Bt.defunct="defunct";class Ot extends zt{set renderView(t){this._renderView=t}findRenderView(){return this.renderView}get renderView(){let t=this;for(;t;){if(null==t?void 0:t._renderView)return t._renderView;t.visitChildren((e=>{t=e}))}return null}constructor(t){super(),this.lifecycleState=kt.initial,this.dirty=!0,this.child=null,this.depth=0,this._widget=t,ri.incrementElementCount()}set slot(t){this._slot=t}get slot(){return this._slot}get widget(){return this._widget}set widget(t){this._widget=t}get runtimeType(){return this.constructor}get mounted(){return null!==this.widget}mount(t,e){var i,s;if(!t)return;this.parent=t,this.owner=null==t?void 0:t.owner,this.depth=(null==t?void 0:t.depth)+1,this.slot=e,this.lifecycleState=kt.active;const n=null===(i=this.widget)||void 0===i?void 0:i.key;n instanceof x&&(null===(s=this.owner)||void 0===s||s.registerGlobalKey(n,this)),this.markNeedsBuild()}unmount(){this.lifecycleState!==kt.defunct&&(this.lifecycleState=kt.defunct,this.widget=null,this.renderView=null,this.visitChildren((t=>{t&&t.unmount()})),ri.decrementElementCount())}static sort(t,e){return t.depth-e.depth}canUpdate(t,e){return(null==e?void 0:e.runtimeType)===(null==t?void 0:t.runtimeType)&&(null==e?void 0:e.key)===(null==t?void 0:t.key)}detachRenderView(){this.visitChildren((t=>{null==t||t.detachRenderView()})),this.slot=null}deactivate(){this.lifecycleState=kt.inactive}deactivateChild(t){t.parent=null,t.detachRenderView(),this.owner.inactiveElements.add(t)}updateChild(t,e,i){if(!t&&!e)return null;if(t&&!e)return this.deactivateChild(t),null;let s=t;return!t&&e?(s=this.inflateWidget(e,i),s):this.canUpdate(t.widget,e)?(t.update(e),t):(this.deactivateChild(t),s)}inflateWidget(t,e){let i;const s=t;if(!s)return i;const n=null==s?void 0:s.key;if(n instanceof x&&(i=this.retakeInactiveElement(n,t),i)){i.activeWithParent(this,e);return this.updateChild(i,t,e)}return i=s.createElement(),i.mount(this,e),i}retakeInactiveElement(t,e){const i=t.currentElement;if(i&&this.canUpdate(i.widget,e))return this.owner.inactiveElements.remove(i),i}activeWithParent(t,e){this.parent=t,this.updateDepth(null==t?void 0:t.depth),this.activeRecursively(this),this.attachRenderObject(e)}activeRecursively(t){t.lifecycleState===kt.inactive&&(t.activate(),this.visitChildren((t=>{this.activeRecursively(t)})))}activate(){this.lifecycleState=kt.active,this.markNeedsBuild()}updateDepth(t){const e=t+1;this.depth<e&&(this.depth=e,this.visitChildren((t=>{null==t||t.updateDepth(e)})))}markNeedsBuild(){this.dirty||(this.dirty=!0,null==this||this.owner.scheduleBuildFor(this))}rebuild(t=!1){(this.dirty||t)&&this.performRebuild()}performRebuild(){this.dirty&&(this.dirty=!1)}firstBuild(){this.rebuild()}setTestWidget(t){this._widget=t}update(t){this._widget=t}reassemble(){this.markNeedsBuild(),this.visitChildren((t=>{t&&t.reassemble()}))}attachRenderObject(t){this.visitChildren((e=>{e.attachRenderObject(t)}))}visitChildren(t){this.child&&t(this.child)}}class Wt extends Ot{assignOwner(t){this.owner=t}mount(t,e){super.mount(t,e),this.firstBuild()}update(t){this._performBuild()}_performBuild(){this.root=this.widget.createElement(),this.root.mount(this),this.renderView=this.root.findRenderObject()}performRebuild(){this._performBuild()}attachToRenderTree(t){this.owner?this.markNeedsBuild():(this.assignOwner(t),this.mount(),this.renderView.layout(null,!1),this.owner.buildScope(this))}}class Ht{constructor(){this.initInstance()}initInstance(){}}class Mt{get runtimeType(){return this.constructor}constructor(t){if(!new.target)throw new r("Cannot construct instances directly");if(t&&!(t instanceof f))throw new Error("key must be instance of Key");this.key=t}}class Nt extends Ot{mount(t,e){super.mount(t,e),this.firstBuild()}performRebuild(){this._performRebuild()}_performRebuild(){const t=this.build();super.performRebuild(),this.child=this.updateChild(this.child,t,this.slot)}}class It extends Nt{update(t){const e=Object.assign({},this.widget);super.update(t),this.updated(e),this.rebuild(!0)}updated(t){this.notifyClients(t)}}class jt extends Mt{constructor(t,e){super(e),this.child=t}}class Vt extends Nt{constructor(t,e){super(t)}update(t){super.update(t),this.rebuild(!0)}build(){return this.widget.build(this)}}class Ft extends Mt{createElement(){return new Vt(this)}}class Ut extends Nt{constructor(t){super(t),this.state=t.createState(),this.state.element=this}firstBuild(){this.state.initState(),super.firstBuild()}update(t){const e=this.widget;this.state.didUpdateWidget(e),super.update(t),this.rebuild(!0)}build(){return this.state.build(this)}unmount(){var t;super.unmount(),null===(t=this.state)||void 0===t||t.unmount()}}class Zt extends Mt{createElement(){return new Ut(this)}}class Gt{get widget(){var t;return null===(t=this.element)||void 0===t?void 0:t.widget}get element(){return this._element}set element(t){this._element=t}get mounted(){return null!=this.element}initState(){}setState(t){t(),this.element.markNeedsBuild()}unmount(){}didUpdateWidget(t){}}class Xt extends Ot{set renderView(t){this._renderView=t}get renderView(){return this._renderView}findRenderObject(){return this.renderView}mount(t,e){super.mount(t,e);const i=this.widget;this.renderView=i.createRenderObject(this),this.attachRenderObject(e)}update(t){super.update(t),this._performRebuild()}performRebuild(){this._performRebuild()}_performRebuild(){this.widget.updateRenderObject(this,this.renderView),super.performRebuild()}findAncestorParentDataElement(){let t,e=this.parent;for(;null!=e&&!(e instanceof Xt);){if(e instanceof te){t=e;break}e=e.parent}return t}findAncestorRenderObjectElement(){let t=this.parent;for(;null!=t;){if(t instanceof Xt)return t;t=t.parent}return t}attachRenderObject(t){var e;if(this.ancestorRenderObjectElement)return;this.ancestorRenderObjectElement=this.findAncestorRenderObjectElement(),null===(e=this.ancestorRenderObjectElement)||void 0===e||e.insertRenderObjectChild(this.renderView,t);const i=this.findAncestorParentDataElement();i&&this.updateParentData(i.widget)}updateParentData(t){t.applyParentData(this.renderView)}visitChildren(t){t(this.child)}detachRenderView(){this.ancestorRenderObjectElement&&(this.ancestorRenderObjectElement.removeRenderViewChild(this.renderView,this.slot),this.ancestorRenderObjectElement=null),this.slot=null}removeRenderViewChild(t,e){}updateChildren(t,e){let i=0,s=t.length-1,n=0,r=e.length-1;const o=new Array(e.length).fill(null);let a=null;for(;i<=s&&n<=r;){let s=t[i];const r=e[n];if(null==s&&!this.canUpdate(null==s?void 0:s.widget,r))break;const h=this.updateChild(s,r,a);o[n]=h,a=h,n+=1,i+=1}for(;i<=s&&n<=r;){let i=t[s];const n=e[r];if(null==i&&!this.canUpdate(null==i?void 0:i.widget,n))break;const h=this.updateChild(i,n,a);o[r]=h,a=h,r-=1,s-=1}for(;n<=r;){const t=e[n],i=this.updateChild(null,t,a);o[n]=i,a=i,n+=1}return o}}class Yt extends Xt{mount(t,e){super.mount(t,e),this.firstBuild()}performRebuild(){this.child=this.updateChild(this.child,this.widget.child),super.performRebuild()}update(t){super.update(t),this.child=this.updateChild(this.child,this.widget.child)}insertRenderObjectChild(t,e){this.renderView.child=t}removeRenderViewChild(t,e){this.renderView.child===t&&(this.renderView.child=null,t.parent=null)}}class qt extends Mt{constructor(t,e){super(e),this.child=t}updateRenderObject(t,e){}}class Kt extends qt{createElement(){return new Yt(this)}}class Jt extends Xt{mount(t,e){super.mount(t,e);const i=this.widget.children;if(!i)return;let s;const n=new Array;4===i.length&&(this.depth=2),i.forEach(((t,e)=>{const i=this.updateChild(null,t,s);null!=i&&n.push(i),s=i})),this.children=n}update(t){super.update(t);const e=this.widget;this.children=this.updateChildren(this.children,e.children)}visitChildren(t){this.children.forEach(t)}insertRenderObjectChild(t,e){this.renderView.insert(t,null==e?void 0:e.renderView)}removeRenderViewChild(t,e){t.parent===this.renderView&&this.renderView.remove(t)}}class Qt extends qt{constructor(t,e){super(null,e),this.children=t}createElement(){return new Jt(this)}}class $t extends Yt{assignOwner(t){this.owner=t}mount(t,e){const i=this.widget;this.renderView=i.createRenderObject(this);const s=ni.instance.pipelineOwner;this.renderView.attach(s),s.attachNode(this.renderView),this.attachRenderObject(e),this.firstBuild()}attachToRenderTree(t){this.owner?this.markNeedsBuild():(this.assignOwner(t),this.mount(),this.renderView.scheduleFirstFrame(),this.owner.buildScope(this))}}class te extends It{build(){return this.widget.child}applyParentData(t){const e=i=>{i instanceof Xt?i.updateParentData(t):i.visitChildren(e)};this.visitChildren(e)}notifyClients(t){this.applyParentData(this.widget)}}class ee extends jt{createElement(){return new te(this)}}class ie{constructor(t){this.identifier=t.identifier,this.pointer=t.pointer,this.parent=t.parent}}class se{constructor(t){var e;this.pointer=t.pointer,this.pointers=t.pointers,this.ctrlKey=null==t?void 0:t.ctrlKey,this.metaKey=null==t?void 0:t.metaKey,this.shiftKey=null==t?void 0:t.shiftKey,this.deltaX=null==t?void 0:t.deltaX,this.deltaY=null==t?void 0:t.deltaY,this.deltaZ=null==t?void 0:t.deltaZ,this.pointer.parent=this,null===(e=this.pointers)||void 0===e||e.forEach((t=>{t.parent=this}))}}class ne extends Ht{constructor(){super(...arguments),this.listeners=new Map}initInstance(){super.initInstance(),ne.instance=this}addEventListener(t,e){this.listeners.set(t,e)}removeEventListener(t){this.listeners.delete(t)}applyEvent(t,e){const i=this.listeners.get(t);null==i||i(e)}}class re{constructor(){this.binding=new ne,this.performBindingHandler()}applyEvent(t,e){this.binding.applyEvent(t,this.adapter(t,e))}adapter(t,e){return e}performBindingHandler(){}}var oe,ae;(ae=oe||(oe={})).cancel="cancel",ae.add="add",ae.remove="remove",ae.hover="hover",ae.signal="signal",ae.down="down",ae.move="move",ae.up="up",ae.panZoomStart="panZoomStart",ae.panZoomUpdate="panZoomUpdate",ae.panZoomEnd="panZoomEnd";class he{constructor(t,e,i,s,n,r){this.change=t,this.event=e,this.delta=i,this.position=s,this.pointer=n,this.unifiedEvent=r}}class le{constructor(t){this.isPointerDown=!1,this.isPanZoom=!1,this.prePointerData=null,this.initialPosition=null,this.initializeEventListeners(),this.onPointerChange=t}reset(){this.initialPosition=null}initializeEventListeners(){if(ne.instance){const t=ne.instance;t.addEventListener("touchstart",this.handleTouchStart.bind(this)),t.addEventListener("touchmove",this.handleTouchMove.bind(this)),t.addEventListener("touchend",this.handleTouchEnd.bind(this)),t.addEventListener("touchcancel",this.handleTouchCancel.bind(this)),t.addEventListener("mousedown",this.handlePointerDown.bind(this)),t.addEventListener("mouseup",this.handlePointerUp.bind(this)),t.addEventListener("mousemove",this.handlePointerMove.bind(this)),t.addEventListener("mouseout",this.handlePointerCancel.bind(this)),t.addEventListener("wheel",this.handleWheel.bind(this))}else console.warn("NativeEventsBinding.instance is null")}handlePointerDown(t){this.isPointerDown=!0,this.isPanZoom=t.shiftKey||t.ctrlKey,this.handlePointerEvent(oe.down,t.pointer)}handlePointerUp(t){this.isPointerDown=!1,this.handlePointerEvent(oe.up,t.pointer),this.isPanZoom&&(this.handlePointerEvent(oe.panZoomEnd,t.pointer),this.isPanZoom=!1)}handlePointerMove(t){this.isPointerDown?(this.handlePointerEvent(oe.move,t.pointer),this.isPanZoom&&this.handlePointerEvent(oe.panZoomUpdate,t.pointer)):this.handlePointerEvent(oe.hover,t.pointer)}handlePointerCancel(t){this.isPointerDown=!1,this.handlePointerEvent(oe.cancel,t.pointer)}handleWheel(t){this.isPointerDown?this.handlePointerEvent(oe.panZoomUpdate,t.pointer):this.handlePointerEvent(oe.signal,t.pointer)}handleTouchStart(t){this.isPointerDown=!0,this.isPanZoom=t.pointers.length>1,Array.from(t.pointers).forEach((t=>{this.isPanZoom?this.handlePointerEvent(oe.panZoomStart,t):this.handlePointerEvent(oe.down,t)}))}handleTouchMove(t){Array.from(t.pointers).forEach(((t,e)=>{this.isPointerDown&&(this.handlePointerEvent(oe.move,t),this.isPanZoom&&this.handlePointerEvent(oe.panZoomUpdate,t))}))}handleTouchEnd(t){this.isPointerDown=!1,Array.from(t.pointers).forEach((t=>{this.isPanZoom&&(this.handlePointerEvent(oe.panZoomEnd,t),this.isPanZoom=!1),this.handlePointerEvent(oe.up,t)}))}handleTouchCancel(t){this.isPointerDown=!1,Array.from(t.pointers).forEach((t=>{this.handlePointerEvent(oe.cancel,t)}))}handlePointerEvent(i,s){const n=this.getEventPosition(s),r=this.prePointerData?e.sub(n,this.prePointerData.position):e.zero,o=s.identifier,a=new he(i,s,new t(r.x,r.y),n,o,s.parent),h=this.onPointerChange(a);this.prePointerData=a,h&&(this.initialPosition&&this.addCancelPointer(i,s,h,n),h instanceof ue&&(this.initialPosition=n))}addCancelPointer(t,e,i,s){if(t===oe.up)this.reset();else if(t===oe.move&&!this.isPanZoom&&null!=this.initialPosition){s.dist(this.initialPosition)>18&&(this.handlePointerEvent(oe.cancel,e),this.reset())}}getEventPosition(t){return t.pointer.toVector()}}class de{constructor(t){this.pointer=0,this.pointers=[];const{delta:e,position:i,pointer:s}=t;this.position=i,this.delta=e,this.pointer=s,this.pointers=t.pointers}}class ce extends de{}class ue extends de{}class pe extends de{}class ge extends de{}class me extends de{}class fe extends de{}class ve extends de{constructor(t){super(t),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ}}class xe extends ce{}class we extends ce{}class ye extends ce{}class be{static expand(i){var s,n,r;const o=w.instance.devicePixelRatio,a={position:new e(i.position.x*o,i.position.y*o),delta:new t(i.delta.offsetX*o,i.delta.offsetY*o),pointer:i.pointer,pointers:i.unifiedEvent.pointers.map((t=>(t.pointer.x*=o,t.pointer.y*=o,t)))};switch(i.change){case oe.cancel:return new fe(a);case oe.add:case oe.remove:break;case oe.hover:return new me(a);case oe.down:return new ue(a);case oe.move:return new ge(a);case oe.up:return new pe(a);case oe.panZoomStart:return new xe(a);case oe.panZoomUpdate:return new we(a);case oe.panZoomEnd:return new ye(a);case oe.signal:return new ve(Object.assign(Object.assign({},a),{deltaX:(null!==(s=i.unifiedEvent.deltaX)&&void 0!==s?s:0)*o,deltaY:(null!==(n=i.unifiedEvent.deltaY)&&void 0!==n?n:0)*o,deltaZ:(null!==(r=i.unifiedEvent.deltaZ)&&void 0!==r?r:0)*o}))}return null}}class Pe{constructor(){this.routeMap=new Map}addRoute(t,e,i=Rt.zero.identity()){let s=this.routeMap.get(t);!s&&(s=new Map),s.has(e)||(s.set(e,i),this.routeMap.set(t,s))}removeRoute(t,e){const i=this.routeMap.get(t);i&&i.delete(e)}route(t){this.dispatch(t)}dispatch(t){const e=this.routeMap.get(t.pointer);if(e)for(let[i,s]of e)i(t)}}class Se{static getAsTranslation(t){const i=t.matrix;return 1==i[0]&&0==i[1]&&0==i[2]&&0==i[3]&&0==i[4]&&1==i[5]&&0==i[6]&&0==i[7]&&0==i[8]&&0==i[9]&&1==i[10]&&0==i[11]&&0==i[14]&&1==i[15]?new e(i[12],i[13]):null}static getAsScale(t){const e=t.matrix;return 0==e[1]&&0==e[2]&&0==e[3]&&0==e[4]&&0==e[6]&&0==e[7]&&0==e[8]&&0==e[9]&&1==e[10]&&0==e[11]&&0==e[12]&&0==e[13]&&0==e[14]&&1==e[15]&&e[0]==e[5]?e[0]:null}static transformPoint(t,i){const s=t.matrix,n=i.x,r=i.y,o=s[0]*n+s[4]*r+s[12],a=s[1]*n+s[5]*r+s[13],h=s[3]*n+s[7]*r+s[15];return 1==h?new e(o,a):new e(o/h,a/h)}}class _e{constructor(t){this.offset=t}}class Ce{}class De{}class Te{constructor(){this.key=Math.random().toString(16).substring(3),this._depth=0}get owner(){return this._owner}get parent(){return this._parent}set parent(t){this._parent=t}get depth(){return this._depth}set depth(t){this._depth=t}reDepthChild(t){var e;t&&(t.depth=this.depth+1,null===(e=null==t?void 0:t.reDepthChildren)||void 0===e||e.call(t))}reDepthChildren(){}dropChild(t){t&&(t.parent=null,this.owner&&(null==t||t.detach()))}adoptChild(t){t&&(t.parent=this,this.owner&&(null==t||t.attach(this.owner)),this.reDepthChild(t))}get attached(){return!!this.owner}attach(t){this._owner||(this._owner=t)}detach(){this.owner&&(this._owner=null)}}class Ee extends Te{constructor(){super(...arguments),this.parentData=null,this._size=i.zero,this.needsRePaint=!1,this.needsReLayout=!1}get size(){return this._size}set size(t){this._size=t}get mounted(){return!0}get view(){return this}get isRepaintBoundary(){return!1}get renderBounds(){return s.compose(t.zero,this._size)}dropChild(t){super.dropChild(t)}adoptChild(t){t&&(this.setupParentData(t),super.adoptChild(t))}get child(){return this._child}set child(t){this.dropChild(t),this._child=t,this.adoptChild(t),this._firstChild=this._child}setupParentData(t){t.parentData instanceof De&&(t.parentData=new De)}markNeedsPaint(){var t;if(!this.owner)return;if(this.needsRePaint)return;const e=this.owner;this.needsRePaint=!0,this.isRepaintBoundary?(e.pushNeedingPaint(this),e.requestVisualUpdate()):this.parent instanceof Ee&&(null===(t=this.parent)||void 0===t||t.markNeedsPaint()),this.visitChildren((t=>{t.markNeedsPaint()}))}markNeedsLayout(){if(!this.owner)return;if(this.needsReLayout)return;const t=this.owner;this.needsReLayout=!0,this.isRepaintBoundary?(t.pushNeedingLayout(this),null==t||t.requestVisualUpdate()):this.parent instanceof Ee?this.parent.markNeedsLayout():t.pushNeedingLayout(this)}layoutWithoutResize(){this.performResize(),this.needsReLayout=!1,this.markNeedsPaint()}reassemble(){this.markNeedsLayout(),this.markNeedsPaint(),this.visitChildren((t=>{t&&t.reassemble()}))}visitChildren(t){let e=this._firstChild;for(;e;){const i=null==e?void 0:e.parentData;t(e),e=null==i?void 0:i.nextSibling}}paintWidthContext(t,e){this.needsRePaint&&(this.needsRePaint=!1,ni.instance.debug?this.debugRender(t,e):this.render(t,e))}hitTest(t,e){}handleEvent(t,e){}getAncestorRenderers(t){var e;const i=void 0!==t;if(!this.attached)throw new Error("RenderObject is not attached.");if(!t){const i=null===(e=this.owner)||void 0===e?void 0:e.renderView;i instanceof Ee&&(t=i)}const s=new Array;let n=this;for(;n!==t;){if(s.push(n),!n.parent)throw new Error("Failed to find ancestor in parent chain.");n=n.parent}return i&&s.push(t),s}getTransformTo(t){const e=this.getAncestorRenderers(t),i=(new Rt).identity();for(let t=e.length-1;t>0;t--)e[t].applyPaintTransform(e[t-1],i);return i}localToGlobal(t,e){return Se.transformPoint(this.getTransformTo(e),t)}applyPaintTransform(t,e){}}class Re extends De{constructor(){super(...arguments),this.offset=e.zero}}class Ae extends Re{}class Le extends Ae{get flex(){return this._flex}set flex(t){this._flex=t}constructor(){super()}}class ze extends Ee{constructor(){super(...arguments),this._renderOffset=t.zero,this.constraints=c.zero}get renderBounds(){return s.compose(this._renderOffset,this.size)}layout(t,e){this.constraints=t,(this.needsReLayout||e)&&this.performLayout(),this.needsReLayout=!1,this.markNeedsPaint()}attach(t){super.attach(t),t&&(this.needsReLayout=!1,this.markNeedsLayout())}setupParentData(t){t.parentData=new Re}performResize(){this.performLayout()}computeDryLayout(t){return i.zero}getDryLayout(t){return this.computeDryLayout(t)}hitTest(t,e){if(this.hitTestSelf(t,e)){if(this.hitTestChildren(t,e)||this.hitTestSelf(t,e))return t.add(new Dt(this)),!0}return!1}hitTestChildren(t,e){return this.defaultHitTestChildren(t,e)}hitTestSelf(t,e){return this.size.contains(e)}defaultHitTestChildren(t,i,s=Rt.zero.identity()){let n=this.child;for(;null!=n;){const r=n.parentData;let o=e.sub(i,r.offset);o=Se.transformPoint(s,o);if(n.hitTest(t,o))return!0;n=null==r?void 0:r.nextSibling}return!1}applyPaintTransform(t,e){const i=(null==t?void 0:t.parentData).offset;e.translate(i.x,i.y)}}class ke extends ze{constructor(t){super(),this.child=t}debugRender(t,i){var s;if(this.child){const n=null===(s=this.child)||void 0===s?void 0:s.parentData;let r=e.zero;i&&n&&(r=e.add(i,n.offset)),t.paintChildDebug(this.child,r)}this.checkRenderBoundary(t,i)}render(t,i){var s;if(this._renderOffset=i,this.child){const n=null===(s=this.child)||void 0===s?void 0:s.parentData;let r=e.zero;i&&n&&(r=e.add(i,n.offset)),t.paintChild(this.child,r)}this.checkRenderBoundary(t,i)}checkRenderBoundary(t,e){if(!(this.parent&&this.parent instanceof ze))return;const i=this.parent.renderBounds,{x:s,y:n}=e,{width:r,height:o}=this.size,{width:a,height:h,x:l,y:d}=i,c=t.paint;c.save(),c.fillStyle="yellow";const u=o-h;if(u>0){const t=n+o-u-20;c.fillRect(s,t,r,20),this.drawSkewedStripes(c,s,t,r,u,"vertical")}const p=r-a;if(p>0){const t=s+r-p-20;c.fillRect(t,n,20,o),this.drawSkewedStripes(c,t,n,p,o,"horizontal")}c.restore()}drawSkewedStripes(t,e,i,s,n,r){t.save(),t.rect(e,i,s,n),t.clip(),t.fillStyle="black";const o=new Rt;if("vertical"===r){o.translate(0,i).skewX(-.8),t.transform(o.matrix);for(let i=0;i<s/10+1;i++)t.fillRect(e,0,10,20),t.translate(20,0)}else{o.translate(e,0).skewY(-.8),t.transform(o.matrix);for(let e=0;e<n/10+1;e++)t.save(),t.fillRect(0,i,20,10),t.restore(),t.translate(0,20)}t.restore()}performLayout(){this.child?(this.child.layout(this.constraints,!0),this.size=this.child.size):this.size=this.constraints.constrain(i.zero),!this.layerHandler&&(this.layerHandler=new Ce,this.layerHandler.layer=new _e(e.zero));const t=this.parentData;if(t){const i=null==t?void 0:t.offset;this.layerHandler.layer.offset=i||e.zero}}layout(t,e){super.layout(t,e)}}class Be{constructor(t){this._paint=t}get paint(){return this._paint}clipAndPaint(t,e,i,s,n){this.paint.save(),e!=T.none&&(i(),t()),s(),this.paint.restore()}clipRRectAndPaint(t,e,i){this.clipAndPaint((()=>this.paint.clip()),t,(()=>{const{x:t,y:i,width:s,height:n,radii:r}=e;this.paint.roundRect(t,i,s,n,r)}),i,e)}clipRectAndPaint(t,e,i){this.clipAndPaint((()=>this.paint.clip()),t,(()=>{const{x:t,y:i,width:s,height:n}=e;this.paint.rect(t,i,s,n)}),i,e)}clipPath(t,e,s,n){this.clipAndPaint((()=>this.paint.clip()),t,(()=>{s.render(this.paint,new i(e.width,e.height))}),n,e)}}class Oe extends Be{constructor(t,e){super(t),this.estimatedBounds=e}paintChildDebug(t,i=e.zero){null==t||t.debugRender(this,i)}paintChild(t,i=e.zero){null==t||t.paintWidthContext(this,i)}pushTransform(t,e,i){let s=Rt.zero.identity().translate(t.x,t.y).multiply(e).translate(-t.x,-t.y).matrix;this.paint.save(),this.paint.beginPath(),this.paint.transform(s),i(),this.paint.closePath(),this.paint.restore()}paintDefaultDebugBoundary(t,e){this.paint.strokeStyle="orange",this.paint.strokeRect(t.x,t.y,e.width,e.height)}paintEmptyDebugBoundary(t,e){const i=~~(e.width/30);for(let s=0;s<i+1;s++)this.paint.strokeStyle="rgba(31, 137, 219,.01)",this.paint.moveTo(30*s,t.y),this.paint.lineTo(30*s,t.y+e.height),this.paint.moveTo(t.x,30*s),this.paint.lineTo(t.x+e.width,30*s),this.paint.stroke()}}class We extends ze{constructor(t){super(),this.childCount=0,t&&this.addAll(t)}defaultHitTestChildren(t,i,s=Rt.zero.identity()){let n=this.lastChild;for(;null!=n;){const r=n.parentData;let o=e.sub(i,r.offset);o=Se.transformPoint(s,o);if(n.hitTest(t,o))return!0;n=null==r?void 0:r.previousSibling}return!1}addAll(t){null==t||t.forEach((t=>this.insert(t,this.lastChild)))}insert(t,e){this.adoptChild(t),this.insertIntoList(t,e),this.childCount+=1}remove(t){this.removeFromChildList(t),this.dropChild(t)}removeFromChildList(t){const e=t.parentData;if(!(this.childCount<=0)){if(null==e.previousSibling)this.firstChild=e.nextSibling;else{e.previousSibling.parentData.nextSibling=e.nextSibling}if(null==e.nextSibling)this.lastChild=e.previousSibling;else{e.nextSibling.parentData.previousSibling=e.previousSibling}e.previousSibling=null,e.nextSibling=null,this.childCount-=1}}insertIntoList(t,e){var i;let s=t.parentData,n=null===(i=this.firstChild)||void 0===i?void 0:i.parentData,r=null==e?void 0:e.parentData;null==e?(this.firstChild=t,this.lastChild=t):(!(null==n?void 0:n.nextSibling)&&this.firstChild&&(n.nextSibling=t,this.firstChild.parentData=n),r.nextSibling=t,e.parentData=r,s.previousSibling=e,t.parentData=s,this.lastChild=t)}parentDataOf(t){return t.parentData}visitChildren(t){let e=this.firstChild;for(;null!=e;){const i=e.parentData;t(e),e=null==i?void 0:i.nextSibling}}}class He extends We{render(t,e){this.defaultRenderChild(t,e)}debugRender(t,e){this.defaultRenderChildDebug(t,e)}layout(t){super.layout(t),this.performLayout()}performLayout(){this.size=this.constraints.constrain(i.zero);let t=this.firstChild;for(;null!=t;){const e=this.parentDataOf(t);this.performLayoutChild(t,this.constraints),t=null==e?void 0:e.nextSibling}}performLayoutChild(t,e){t.layout(e)}getChildList(){const t=[];let e=this.firstChild;for(;null!=e;){const i=this.parentDataOf(e);t.push(e),e=null==i?void 0:i.nextSibling}return t}defaultRenderChild(t,i){var s;let n=this.firstChild;for(;null!=n;){const r=this.parentDataOf(n);t.paintChild(n,e.add(null!==(s=r.offset)&&void 0!==s?s:e.zero,null!=i?i:e.zero)),n=null==r?void 0:r.nextSibling}}defaultRenderChildDebug(t,i){var s;let n=this.firstChild;for(;null!=n;){const r=this.parentDataOf(n);t.paintChildDebug(n,e.add(null!==(s=r.offset)&&void 0!==s?s:e.zero,null!=i?i:e.zero)),n=null==r?void 0:r.nextSibling}}hitTest(t,e){return super.hitTest(t,e)}}class Me extends ke{get isRepaintBoundary(){return!0}scheduleFirstFrame(){this.markNeedsLayout(),this.markNeedsPaint()}}class Ne extends Kt{createRenderObject(){return new Me}createElement(){return new $t(this)}updateRenderObject(t,e){}}const Ie=t=>{oi.getInstance().elementBinding.attachRootWidget(t)};var je,Ve,Fe,Ue,Ze,Ge;(Ve=je||(je={})).accepted="accepted",Ve.rejected="rejected";class Xe{}class Ye{constructor(t,e,i){this._arena=t,this._pointer=e,this._member=i}resolve(t){this._arena._resolve(this._pointer,this._member,t)}}class qe{constructor(){this.isOpen=!0,this.isHeld=!1,this.isPendingSweep=!1,this.members=new Array}add(t){this.isOpen&&this.members.push(t)}contain(t){return this.members.indexOf(t)>=0}remove(t){const e=this.members.indexOf(t);e<0||this.members.splice(e,1)}get count(){return this.members.length}close(){this.isOpen=!1}get isEmpty(){return 0===this.count}get first(){return this.members[0]}clear(){this.members=[]}}class Ke{constructor(){this.arenas=new Map}add(t,e){let i=this.arenas.get(t);return null==i&&(i=new qe,this.arenas.set(t,i)),!i.contain(e)&&i.add(e),new Ye(this,t,e)}_resolve(t,e,i){const s=this.arenas.get(t);null!=s&&s.contain(e)&&(i===je.rejected?(s.remove(e),s.isOpen?s.eagerWinner=e:this.tryToResolveArena(t,s)):this.resolveInFavorOf(t,s,e))}close(t){const e=this.arenas.get(t);e&&e.isOpen&&(e.close(),this.tryToResolveArena(t,e))}sweep(t){const e=this.arenas.get(t);if(e&&!e.isOpen)if(e.isHeld)e.isPendingSweep=!0;else if(this.arenas.delete(t),!e.isEmpty){e.first.acceptGesture(t),e.remove(e.first);e.members.forEach((e=>{e.rejectGesture(t)}))}}hold(t){const e=this.arenas.get(t);e&&(e.isHeld=!0)}release(t){const e=this.arenas.get(t);e&&(e.isHeld=!1,e.isPendingSweep&&this.sweep(t))}tryToResolveArena(t,e){e.isOpen||(1===e.count?(this.arenas.delete(t),e.first.acceptGesture(t)):e.isEmpty&&this.arenas.delete(t))}resolveInFavorOf(t,e,i){const s=this.arenas.get(t);if(s!==e)return;s.remove(i);e.members.forEach((e=>{i!==e&&e.rejectGesture(t)})),s.clear(),this.arenas.delete(t),i.acceptGesture(t)}}class Je extends Ht{constructor(){super(...arguments),this.hitTestPointer=new Map,this.pointerEvents=new m,this.gestureArena=new Ke,this.pointerRouter=new Pe}initInstance(){Je.instance=this,this.pointerEventHandler=new le(this.handlePointerData.bind(this))}handlePointerData(t){const e=be.expand(t);return e&&this.pointerEvents.addFirst(e),this.flushPointerEvents(),e}flushPointerEvents(){for(;!this.pointerEvents.isEmpty;){const t=this.pointerEvents.removeFirst();this.handlePointerEvent(t)}}handlePointerEvent(t){this.performPointerEventHandle(t)}performPointerEventHandle(t){let e=new Tt;if(this.hitTest(e,t.position),t instanceof ue||t instanceof me||t instanceof pe?this.hitTestPointer.set(t.pointer,e):t instanceof pe?(e=this.hitTestPointer.get(t.pointer),this.hitTestPointer.delete(t.pointer)):e=this.hitTestPointer.get(t.pointer),e)for(let i of e.path)i.target.handleEvent(t,i)}handleEvent(t,e){this.pointerRouter.route(t),t instanceof ue?this.gestureArena.close(t.pointer):t instanceof pe&&this.gestureArena.sweep(t.pointer)}hitTest(t,e){t.add(new Dt(this))}}class Qe{static now(){return"undefined"!=typeof performance&&(null===performance||void 0===performance?void 0:performance.now)?performance.now():Qe.customNow()}static customNow(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()-Qe.startTime}}Qe.startTime=Date.now();class $e{constructor(t){this.callback=t}}class ti{constructor(){this.frameUpdater=new si,this.frameCallbacks=new Map,this.isRequestingFrame=!1,this.nextCallbackId=0,this.initAnimationFrame()}initAnimationFrame(){"undefined"!=typeof window&&"function"==typeof(null===window||void 0===window?void 0:window.requestAnimationFrame)?this.requestAnimationFrame=t=>{requestAnimationFrame(t)}:this.requestAnimationFrame=t=>{setTimeout((()=>{t(+new Date)}),1e3/120)}}static getInstance(){return!ti.instance&&(ti.instance=new ti),ti.instance}addFrameCallback(t){return this.nextCallbackId+=1,this.frameCallbacks.set(this.nextCallbackId,t),this.requestFrameIfNeeded(),this.nextCallbackId}removeFrameCallback(t){this.frameCallbacks.delete(t)}requestFrameIfNeeded(){!this.isRequestingFrame&&(this.isRequestingFrame=!0,this.requestAnimationFrame(this.handleFrame.bind(this)))}handleFrame(t){this.frameCallbacks.forEach((e=>{"function"==typeof e&&e(t)})),w.instance.showBanner&&this.frameUpdater.update(),this.frameCallbacks.clear(),this.isRequestingFrame=!1,this.frameCallbacks.size>0&&this.requestFrameIfNeeded()}}class ei extends Ht{constructor(){super(...arguments),this.frameCallbacks=new Map,this.nextFrameCallbackId=0}initInstance(){super.initInstance(),ei.instance=this}ensureVisualUpdate(){this.scheduleFrame()}scheduleFrame(){this.handleDrawFrame()}handleDrawFrame(){ri.instance.drawFrame()}scheduleFrameCallback(t){this.nextFrameCallbackId+=1;const e=new $e(t);return this.frameCallbacks.set(this.nextFrameCallbackId,e),ti.getInstance().addFrameCallback(this.handleBeginCallbackFrame.bind(this)),this.nextFrameCallbackId}handleBeginCallbackFrame(t){const e=new Map(this.frameCallbacks);this.frameCallbacks=new Map,e.forEach((e=>{const i=e.callback;null==i||i(t)})),e.clear()}requestVisualUpdate(){ti.getInstance().addFrameCallback(this.ensureVisualUpdate.bind(this)),this.handleCleanCanvas()}handleCleanCanvas(){const t=w.instance.painter,e=w.instance.screenWidth,i=w.instance.screenHeight;t.clearRect(0,0,e,i)}}class ii{constructor(){this.needRepaintList=new Array,this.needReLayoutList=new Array}get renderView(){return this.rootNode}attachNode(t){this.rootNode=t}flushPaint(){const t=this.needRepaintList;this.needRepaintList=[],t.sort(((t,e)=>t.depth-e.depth)),t.forEach(((t,i)=>{var n;const r=null===(n=t.layerHandler)||void 0===n?void 0:n.layer;t.needsRePaint&&(null==t||t.paintWidthContext(new Oe(w.instance.painter,s.zero),(null==r?void 0:r.offset)||e.zero))}))}flushLayout(){const t=this.needReLayoutList;0!==t.length&&(this.needReLayoutList=[],t.sort(((t,e)=>t.depth-e.depth)),t.forEach((t=>{t.needsReLayout&&(null==t||t.layoutWithoutResize())})))}pushNeedingPaint(t){this.needRepaintList.push(t)}pushNeedingLayout(t){this.needReLayoutList.push(t)}requestVisualUpdate(){ei.instance.requestVisualUpdate()}}class si{constructor(){this.painter=w.instance.painter,this.lastFrameTime=Qe.now(),this.frameCount=0,this.fps=0}render(t){const e=w.instance.screenWidth;this.painter.save(),this.painter.globalAlpha=.5,this.painter.font="12px Arial";const i=t+"fps",s="ele:"+ri.elementCount,n=this.painter.measureText(i),r=this.painter.measureText(s),o=Math.max(n.width,r.width)+20;this.painter.clearRect(e-o,0,o,40),this.painter.fillStyle="#429aba",this.painter.fillRect(e-o,0,o,40),this.painter.fillStyle="white",this.painter.fillText(i,e-o+10,15),this.painter.fillText(s,e-o+10,30),this.painter.restore()}update(){const t=Qe.now(),e=t-this.lastFrameTime;return this.frameCount++,e>=1e3&&(this.fps=this.frameCount,this.frameCount=0,this.lastFrameTime=t),this.render(this.fps),this.fps}}class ni extends Je{get renderView(){return this._pipelineOwner.renderView}constructor(){super(),this.debug=w.instance.isDebug,super.initInstance()}initInstance(){ni.instance=this,this._pipelineOwner=new ii}get pipelineOwner(){return this._pipelineOwner}drawFrame(){this.pipelineOwner.flushLayout(),this.pipelineOwner.flushPaint()}hitTest(t,e){this.renderView.hitTest(t,e),super.hitTest(t,e)}}class ri extends Ht{static get elementCount(){return this._elementCount}static incrementElementCount(){this._elementCount++}static decrementElementCount(){this._elementCount--}static subElementCount(t){this._elementCount-=t}initInstance(){super.initInstance(),ri.instance=this}drawFrame(){this.buildOwner.buildScope(this.rootElement),ni.instance.drawFrame(),this.buildOwner.inactiveElements.clear()}attachRootWidget(t){const e=new Ne(t);this.rootElement=e.createElement(),this.buildOwner=new Lt,this.rootElement.attachToRenderTree(this.buildOwner),ni.instance.debug&&console.log("The GenUI app is running on",new Date)}}ri._elementCount=0;class oi extends Ht{constructor(){super(...arguments),this.schedulerBinding=new ei,this.elementBinding=new ri,this.rendererBinding=new ni}static getInstance(){return!oi._instance&&(oi._instance=new oi),oi._instance}get instance(){return oi._instance}}class ai{}class hi extends ai{constructor(){super(...arguments),this.listeners=[],this.count=0,this.notificationCallStackDepth=0,this.needsRemoveListener=0}addListener(t){-1===this.listeners.indexOf(t)&&(this.listeners.push(t),this.count++)}removeListener(t){const e=this.listeners.indexOf(t);-1!==e&&(this.listeners[e]=null,this.needsRemoveListener++),0===this.notificationCallStackDepth&&this.cleanupListeners()}notifyListeners(){var t,e;if(0!==this.count){this.notificationCallStackDepth++;for(let i=0;i<this.count;i++)if(null!=this.listeners[i])try{null===(e=(t=this.listeners)[i])||void 0===e||e.call(t)}catch(t){throw new r("Listener threw an error: "+t.toString())}this.notificationCallStackDepth--,0===this.notificationCallStackDepth&&this.needsRemoveListener>0&&this.cleanupListeners()}}cleanupListeners(){this.needsRemoveListener>0&&(this.listeners=this.listeners.filter((t=>null!==t)),this.count=this.listeners.length,this.needsRemoveListener=0)}dispose(){this.listeners=null,this.count=0,this.notificationCallStackDepth=0,this.needsRemoveListener=0}}class li{constructor(t){this._duration=0,t.day&&(this._duration+=24*t.day*60*60*1e3),t.hour&&(this._duration+=60*t.hour*60*1e3),t.minute&&(this._duration+=60*t.minute*1e3),t.second&&(this._duration+=1e3*t.second),t.milliseconds&&(this._duration+=t.milliseconds),t.microsecond&&(this._duration+=t.microsecond/1e3)}static get zero(){return new li({milliseconds:0})}get valueWithDays(){return this.valueWithHours/24}get valueWithSeconds(){return this._duration/1e3}get valueWithMilliseconds(){return this._duration}get valueWithHours(){return this.valueWithMinutes/60}get valueWithMinutes(){return this.valueWithSeconds/60}get value(){return this._duration}}class di{}class ci extends di{constructor(t,e,i,s){super(),this.cubicErrorBound=.001,this.a=t,this.b=e,this.c=i,this.d=s}_evaluateCubic(t,e,i){return 3*t*(1-i)*(1-i)*i+3*e*(1-i)*i*i+i*i*i}transformInternal(t){let e=0,i=1,s=0;for(;s++<1e3;){let s=.5*(e+i),n=this._evaluateCubic(this.a,this.c,s);if(Math.abs(t-n)<this.cubicErrorBound)return this._evaluateCubic(this.b,this.d,s);n<t?e=s:i=s}}}class ui{static bezier(t,e,i,s){const n=1-s;return n*n*t+2*n*s*e+s*s*i}}ui.ease=new ci(.25,.1,.25,1),ui.easeIn=new ci(.42,0,1,1),ui.fastLinearToSlowEaseIn=new ci(.18,1,.04,1),ui.easeInToLinear=new ci(.67,.03,.65,.09),ui.easeInSine=new ci(.47,0,.745,.715),ui.easeInQuad=new ci(.55,.085,.68,.53),ui.easeOut=new ci(0,0,.58,1),ui.easeInBack=new ci(.6,-.28,.735,.045),ui.linear=new class extends di{transformInternal(t){return t}};class pi{constructor(t){this.startTime=0,this.inActive=!1,this.animateId=0,this.onTick=t}start(){this.inActive=!0,this.startTime=0,this.scheduleTick()}stop(t=!0){this.inActive=!1,this.startTime=0}tick(t){0===this.startTime&&(this.startTime=t);const e=.001*(t-this.startTime);this.inActive&&this.onTick(e),this.shouldCallbackSchedule&&setTimeout(this.scheduleTick.bind(this))}get shouldCallbackSchedule(){return this.inActive}scheduleTick(){this.animateId=ei.instance.scheduleFrameCallback(this.tick.bind(this))}}(Ue=Fe||(Fe={})).dismissed="dismissed",Ue.forward="forward",Ue.reverse="reverse",Ue.completed="completed",(Ge=Ze||(Ze={})).forward="forward",Ge.reverse="reverse";class gi extends hi{constructor(){super(),this._status=Fe.dismissed}get status(){return this._status}set status(t){this._status!=t&&(this._status=t,this.notifyListeners())}}class mi extends hi{constructor(){super(),this._statusListener=new gi}get value(){return this.currentValue}set status(t){this._statusListener.status=t}get status(){return this._statusListener.status}get isDismissed(){return this._statusListener.status===Fe.dismissed}get isForward(){return this._statusListener.status===Fe.forward}get isReverse(){return this._statusListener.status===Fe.reverse}get isCompleted(){return this._statusListener.status===Fe.completed}addStatusListener(t){this._statusListener.addListener(t)}removeStatusListener(t){this._statusListener.removeListener(t)}}class fi{}class vi extends mi{constructor(t){var e,i,s,n;super(),this.direction=Ze.forward,this.lastTimeStamp=0,this.begin=null!==(e=null==t?void 0:t.begin)&&void 0!==e?e:0,this.end=null!==(i=null==t?void 0:t.end)&&void 0!==i?i:1,this.duration=null!==(s=null==t?void 0:t.duration)&&void 0!==s?s:new li({milliseconds:300}),this.reverseDuration=null==t?void 0:t.reverseDuration,this.curve=null!==(n=null==t?void 0:t.curve)&&void 0!==n?n:ui.linear,this.ticker=new pi(this.tick.bind(this)),this.currentValue=0}get velocity(){var t;return null===(t=this.simulation)||void 0===t?void 0:t.dx(this.lastTimeStamp)}get isAnimating(){return this.ticker.inActive}start(){this.isAnimating||(this.status=Fe.forward,this.ticker.start())}animateWidthSimulation(t){this.startSimulation(t)}startSimulation(t){t&&(this.simulation=t,this.lastTimeStamp=0,this.stop(),this.start())}tick(t){this.lastTimeStamp=t;const e=this.simulation.x(t);this.simulation.isDone(t)&&(this.stop(),this.status=this.direction===Ze.forward?Fe.completed:Fe.dismissed),this.currentValue=e,this.notifyListeners()}animateToInternal(t,e,i=ui.linear){if(this.isAnimating)return;let s=this.direction===Ze.forward?this.begin:this.end;setTimeout((()=>this.startSimulation(new xi(s,t,null!=e?e:this.duration,i))))}forward(t){this.direction=Ze.forward,this.status=Fe.forward,t&&(this.currentValue=t),this.animateToInternal(this.end,this.duration,this.curve)}reverse(t){var e;this.direction=Ze.reverse,this.status=Fe.reverse,t&&(this.currentValue=t),this.animateToInternal(this.begin,null!==(e=this.reverseDuration)&&void 0!==e?e:this.duration,this.curve)}stop(t=!0){this.ticker.stop(t),this.status=Fe.dismissed}cancel(){this.stop(),this.simulation=null}}class xi extends fi{constructor(t,e,i,s){super(),this.begin=t,this.end=e,this.duration=i,this.curve=s}x(t){let e=P(t/this.duration.valueWithSeconds,0,1);return 0===e?this.begin:1===e?this.end:this.begin+(this.end-this.begin)*this.curve.transformInternal(e)}dx(t){return(this.x(t+1e-4)-this.x(t-1e-4))/2e-4}isDone(t){return t>=this.duration.valueWithSeconds}}class wi extends fi{constructor(t,e,i,s=0,n=0){if(t<=0)throw new Error("Drag must be greater than 0");super(),this.finalTime=1/0,this.drag=t,this.dragLog=Math.log(t),this.position=e,this.velocity=i,this.constantDeceleration=n*Math.sign(i),this.toleranceVelocity=s,this.finalTime=this.newtonsMethod({initialGuess:0,target:0,f:t=>this.dx(t),df:t=>this.velocity*Math.pow(this.drag,t)*this.dragLog-this.constantDeceleration,iterations:10})}x(t){if(t>this.finalTime)return this.finalX;return this.position+this.velocity*Math.pow(this.drag,t)/this.dragLog-this.velocity/this.dragLog-this.constantDeceleration/2*Math.pow(t,2)}dx(t){return t>this.finalTime?0:this.velocity*Math.pow(this.drag,t)-this.constantDeceleration*t}get finalX(){return 0===this.constantDeceleration?this.position-this.velocity/this.dragLog:this.x(this.finalTime)}timeAtX(t){return t===this.position?0:0===this.velocity||(this.velocity>0?t<this.position||t>this.finalX:t>this.position||t<this.finalX)?1/0:this.newtonsMethod({initialGuess:0,target:t,f:t=>this.x(t),df:t=>this.dx(t),iterations:10})}isDone(t){return Math.abs(this.dx(t))<this.toleranceVelocity||0===this.dx(t)}newtonsMethod({initialGuess:t,target:e,f:i,df:s,iterations:n}){let r=t;for(let t=0;t<n;t++)r-=(i(r)-e)/s(r);return r}}class yi extends fi{constructor(t,e,i){super(),this.damping=2,this.stiffness=2,this.initialPosition=t,this.endPosition=e,this.initialVelocity=i}x(t){const e=this.initialPosition-this.endPosition;return this.endPosition+e*Math.exp(-this.damping*t*2)}dx(t){return-(this.endPosition-this.initialPosition)*Math.exp(-this.damping*t)*(this.damping*Math.cos(this.stiffness*t)+this.stiffness*Math.sin(this.stiffness*t))}isDone(t){return Math.abs(this.x(t)-this.endPosition)<.1&&Math.abs(this.dx(t))<.1}}class bi extends fi{constructor(t,e,i,s){if(super(),this.position=0,this.maxScrollExtent=0,this.minScrollExtent=0,this.velocity=0,this.springTime=1/0,this.offsetTime=0,this.position=t,this.maxScrollExtent=e,this.minScrollExtent=i,this.velocity=s,this.frictionSimulation=new wi(.135,t,s),t>e)this.springSimulation=new yi(t,e,s),this.springTime=-1/0;else if(t<i)this.springSimulation=new yi(t,0,s),this.springTime=-1/0;else{this.frictionSimulation=new wi(.135,t,s);const n=this.frictionSimulation.finalX;n>e?(this.springTime=this.frictionSimulation.timeAtX(e),this.springSimulation=new yi(this.frictionSimulation.x(this.springTime),this.maxScrollExtent,this.frictionSimulation.dx(s))):n<i&&(this.springTime=this.frictionSimulation.timeAtX(i),this.springSimulation=new yi(this.frictionSimulation.x(this.springTime),this.minScrollExtent,this.frictionSimulation.dx(s)))}}simulation(t){let e;return t>this.springTime+.1*this.springTime?(this.offsetTime=isFinite(this.springTime)?this.springTime:0,e=this.springSimulation):(this.offsetTime=0,e=this.frictionSimulation),!e&&(e=this.frictionSimulation),e}x(t){return this.simulation(t).x(t-this.offsetTime)}dx(t){return this.simulation(t).dx(t-this.offsetTime)}isDone(t){return this.simulation(t).isDone(t-this.offsetTime)}}const Pi=t=>{switch(t){case j.up:case j.down:return C.vertical;case j.left:case j.right:return C.horizontal}};class Si extends d{constructor(t){super(),this.axisDirection=t.axisDirection,this.growthDirection=t.growthDirection,this.userScrollDirection=t.userScrollDirection,this.crossAxisDirection=t.crossAxisDirection,this.scrollOffset=t.scrollOffset,this.precedingScrollExtent=t.precedingScrollExtent,this.overlap=t.overlap,this.remainingPaintExtent=t.remainingPaintExtent,this.crossAxisExtent=t.crossAxisExtent,this.viewportMainAxisExtent=t.viewportMainAxisExtent,this.remainingCacheExtent=t.remainingCacheExtent,this.cacheOrigin=t.cacheOrigin}get axis(){return Pi(this.axisDirection)}asBoxConstraints(t=0,e=1/0,i=null){return i=this.crossAxisExtent,this.axis===C.vertical?new c({minWidth:i,maxWidth:i,maxHeight:e,minHeight:t}):this.axis===C.horizontal?new c({minWidth:t,maxWidth:e,minHeight:i,maxHeight:i}):void 0}}class _i{constructor(t){var e,i,s,n,r,o,a,h,l,d,c;this.scrollExtent=0,this.paintExtent=0,this.paintOrigin=0,this.maxPaintExtent=0,this.maxScrollObstructionExtent=0,this.visible=!0,this.hasVisualOverflow=!1,this.scrollExtent=null!==(e=null==t?void 0:t.scrollExtent)&&void 0!==e?e:this.scrollExtent,this.paintExtent=null!==(i=null==t?void 0:t.paintExtent)&&void 0!==i?i:this.paintExtent,this.paintOrigin=null!==(s=null==t?void 0:t.paintOrigin)&&void 0!==s?s:this.paintOrigin,this.layoutExtent=null!==(n=null==t?void 0:t.layoutExtent)&&void 0!==n?n:this.layoutExtent,this.maxPaintExtent=null!==(r=null==t?void 0:t.maxPaintExtent)&&void 0!==r?r:this.maxPaintExtent,this.maxScrollObstructionExtent=null!==(o=null==t?void 0:t.maxScrollObstructionExtent)&&void 0!==o?o:this.maxScrollObstructionExtent,this.hitTestExtent=null!==(a=null==t?void 0:t.hitTestExtent)&&void 0!==a?a:this.hitTestExtent,this.visible=null!==(h=null==t?void 0:t.visible)&&void 0!==h?h:this.paintExtent>0,this.hasVisualOverflow=null!==(l=null==t?void 0:t.hasVisualOverflow)&&void 0!==l?l:this.hasVisualOverflow,this.scrollOffsetCorrection=null!==(d=null==t?void 0:t.scrollOffsetCorrection)&&void 0!==d?d:this.scrollOffsetCorrection,this.cacheExtent=null!==(c=null==t?void 0:t.cacheExtent)&&void 0!==c?c:this.cacheExtent}static get zero(){return new _i({})}}class Ci extends Ee{get geometry(){return this._geometry}set geometry(t){this._geometry=t}attach(t){super.attach(t),t&&(this.needsReLayout=!1,this.markNeedsLayout())}render(t,e){var i;const s=this.child;if(s&&(null===(i=this.geometry)||void 0===i?void 0:i.visible)){const i=s.parentData;t.paintChild(s,e.add(i.paintOffset.toVector()))}}debugRender(t,e){var i;const s=this.child;if(s&&(null===(i=this.geometry)||void 0===i?void 0:i.visible)){const i=s.parentData;t.paintChildDebug(s,e.add(i.paintOffset.toVector()))}}layout(t,e){(this.needsReLayout||e)&&(this.constraints=t,this.performLayout()),this.needsReLayout=!1,this.markNeedsPaint()}performLayout(){}performResize(){this.performLayout()}computeDryLayout(t){return this.size}getDryLayout(t){return this.size}}class Di extends Ci{setupParentData(t){!(t.parentData instanceof Bi)&&(t.parentData=new Bi)}setChildParentData(e,i,s){const n=e.parentData;switch(i.growthDirection===F.forward?i.axisDirection:i.growthDirection===F.reverse?(t=>{switch(t){case j.up:return j.down;case j.down:return j.up;case j.left:return j.right;case j.right:return j.left}})(i.axisDirection):void 0){case j.up:n.paintOffset=new t(0,-(s.scrollExtent-(s.paintExtent+i.scrollOffset)));break;case j.right:n.paintOffset=new t(-i.scrollOffset,0);break;case j.down:n.paintOffset=new t(0,-i.scrollOffset);break;case j.left:n.paintOffset=new t(-(s.scrollExtent-(s.paintExtent+i.scrollOffset)),0)}}hitTest(t,e){var i,s;const n=this.child;if(n&&(null===(i=this.geometry)||void 0===i?void 0:i.visible)){const i=n.parentData.paintOffset,r=Rt.zero.identity().translate(-i.offsetX,-i.offsetY);return null===(s=this.child)||void 0===s?void 0:s.hitTest(t,Se.transformPoint(r,e))}return!1}}class Ti extends Di{performLayout(){if(!this.child)return void(this.geometry=_i.zero);this.child.layout(this.constraints.asBoxConstraints(),!0);const t=this.constraints;let e=0;const i=this.child.size;t.axis==C.vertical?e=i.height:t.axis==C.horizontal&&(e=i.width);const s=t.scrollOffset,n=t.scrollOffset+t.remainingPaintExtent,r=Math.max(0,s),o=Math.min(e,n),a=o>r?o-r:0;this.geometry=new _i({paintExtent:a,maxPaintExtent:e,layoutExtent:a,scrollExtent:e,hasVisualOverflow:e>t.remainingPaintExtent||t.scrollOffset<0}),this.setChildParentData(this.child,t,this.geometry)}}class Ei{constructor(t,e){this.time=t,this.position=e}get x(){return this.position.offsetX}get y(){return this.position.offsetY}}class Ri{constructor(t){this.positions=new Array,this.historySize=20,this.deadDuration=t}addPosition(t){const e=+new Date;0===this.positions.length&&this.deadLine(),this.positions.push(new Ei(e,t)),this.positions.length>this.historySize&&this.positions.shift()}deadLine(){this.deadDuration&&(this.deadTimer=setTimeout((()=>{this.handleDisposePositions()}),this.deadDuration.value))}handleDisposePositions(){this.positions=[],this.cancelDeadTimer()}cancelDeadTimer(){this.deadTimer&&(clearTimeout(this.deadTimer),this.deadTimer=null)}getVelocity(){if(this.positions.length<2)return t.zero;this.cancelDeadTimer();const e=this.positions[0],i=this.positions[this.positions.length-1],s=(i.time-e.time)/1e3,n=(i.x-e.x)/s,r=(i.y-e.y)/s;return this.reset(),new t(n,r)}reset(){this.positions=[]}}class Ai extends hi{constructor(){super(...arguments),this._pixels=0}get pixels(){return this._pixels}setPixels(t){t!=this._pixels&&(this._pixels=t,this.notifyListeners())}correctBy(t){this._pixels+=t}}class Li extends Ai{constructor(t){var e;super(),this._scrollDirection=Z.idle,this._axisDirection=j.down,this._minScrollExtent=0,this._maxScrollExtent=0,this._viewportDimension=0,this.pendingDimensions=!1,this.physics=null==t?void 0:t.physics,this._axisDirection=null==t?void 0:t.axisDirection,this.correctBy(null!==(e=null==t?void 0:t.initPixels)&&void 0!==e?e:0)}get viewportDimension(){return this._viewportDimension}get axisDirection(){return this._axisDirection}get scrollDirection(){return this._scrollDirection}get minScrollExtent(){return this._minScrollExtent}get maxScrollExtent(){return this._maxScrollExtent}get userScrollDirection(){return Z.forward}get atEdge(){return this.pixels==this._minScrollExtent||this.pixels==this._maxScrollExtent}get outOfRange(){return this.pixels<this._minScrollExtent||this.pixels>this._maxScrollExtent}get axis(){return Pi(this.axisDirection)}get extentBefore(){return Math.max(0,this.pixels-this.minScrollExtent)}get extentAfter(){return Math.max(0,this._maxScrollExtent-this.pixels)}updateScrollDirection(t){this._scrollDirection=0===t?Z.idle:t>0?Z.forward:Z.reverse,this.didUpdateScrollDirection(this._scrollDirection)}didUpdateScrollDirection(t){}jumpTo(t){if(t===this.pixels)return;const e=t-this.pixels;this.correctBy(e),this.didEndScroll(),this.notifyListeners()}animateTo(t,e,i){return Promise.resolve()}didEndScroll(){this.updateScrollDirection(0)}applyViewportDimension(t){return this._viewportDimension=t,!0}applyContentDimension(t,e){return(t!==this._minScrollExtent||e!==this._maxScrollExtent)&&(this.pendingDimensions=!0),this._minScrollExtent=t,this._maxScrollExtent=e,this.pendingDimensions&&this.applyNewDimensions(),!0}applyNewDimensions(){this.pendingDimensions=!1}applyBoundaryConditions(t){return this.physics.applyBoundaryConditions(this,t)}setPixels(t){if(t===this.pixels)return void this.updateScrollDirection(0);const e=t-this.pixels;this.updateScrollDirection(e);const i=t-this.applyBoundaryConditions(t);super.setPixels(i)}applyUserOffset(t){const e=ki(this._axisDirection,t);return this.physics.applyPhysicsToUserOffset(this,e)}createBallisticSimulation(t){var e;if(!(Math.abs(t)<20))return null===(e=this.physics)||void 0===e?void 0:e.createBallisticSimulation(this,t)}}class zi extends Li{constructor(){super(...arguments),this.key=new v,this.velocityTicker=new Ri(new li({milliseconds:3e3})),this.animationController=new vi({})}pointerScroll(t){const e=this.applyUserOffset(t);this.setPixels(this.pixels+e)}get velocity(){return this.animationController.velocity}goBallistic(t){const e=this.createBallisticSimulation(t);e&&(this.animationController.animateWidthSimulation(e),this.animationController.addListener((()=>{this.setPixels(this.animationController.value)})))}animateTo(t,e,i){return new Promise(((s,n)=>{0===e.value&&(this.jumpTo(t),s()),this.animationController=new vi({begin:this.pixels,end:t,duration:e,curve:i}),this.animationController.addListener((()=>{this.setPixels(this.animationController.value)})),this.animationController.addStatusListener((()=>{(this.animationController.status===Fe.dismissed||this.animationController.status===Fe.completed)&&s()})),this.animationController.forward()}))}applyNewDimensions(){var t;super.applyNewDimensions(),this.goBallistic(null!==(t=this.animationController.velocity)&&void 0!==t?t:0)}scrollEnd(){const t=this.velocityTicker.getVelocity(),e=ki(this.axisDirection,t);this.goBallistic(e)}scrollUpdate(t){this.velocityTicker.addPosition(t)}scrollStart(){this.animationController.stop()}}const ki=(t,e)=>{let i=0;switch(Pi(t)){case C.horizontal:i=e.offsetX;break;case C.vertical:i=e.offsetY}return(s=t)!=j.up&&s!=j.left&&(i*=-1),i;var s};class Bi extends Ae{constructor(){super(...arguments),this.paintOffset=t.zero}}class Oi extends He{constructor(t){super(),this._axisDirection=j.down,this._crossDirection=j.left,this.maxScrollExtent=0,this.minScrollExtent=0,this.anchor=0,this.offset=null==t?void 0:t.offset,this.axisDirection=null==t?void 0:t.axisDirection,this.markNeedsLayoutBind=this.markNeedsLayout.bind(this)}get axisDirection(){return this._axisDirection}get axis(){return Pi(this.axisDirection)}get crossDirection(){return this._crossDirection}set axisDirection(t){this._axisDirection=t,this.markNeedsLayout()}set offset(t){var e,i;this._offset=t,null===(e=this.offset)||void 0===e||e.removeListener(this.markNeedsLayoutBind),null===(i=this.offset)||void 0===i||i.addListener(this.markNeedsLayoutBind),this.markNeedsLayout()}get offset(){return this._offset}setupParentData(t){t.parentData=new Bi}performLayout(){!this.center&&(this.center=this.firstChild),this.size=this.constraints.constrain(i.zero);let t=0,e=0;this.axis===C.horizontal?(this.offset.applyViewportDimension(this.size.width),t=this.size.width,e=this.size.height):this.axis===C.vertical&&(this.offset.applyViewportDimension(this.size.height),t=this.size.height,e=this.size.width),(0===this.size.width&&0===this.size.height||!this.center)&&this.offset.applyContentDimension(0,0),this.computeLayoutScrollOffset(t,e),this.offset.applyContentDimension(0,Math.max(0,this.maxScrollExtent-t))}computeLayoutScrollOffset(t,e){const i=this.offset.pixels;this.performLayoutSliverChild(this.center,i,Math.max(0,-i),t,t,e,F.forward,(t=>{const e=t.parentData;return null==e?void 0:e.nextSibling}),t,this.axisDirection,0)}performLayoutSliverChild(t,e,i,s,n,r,o,a,h,l,d){let c=t,u=0;const p=i;for(this.maxScrollExtent=0;c;){const t=e<=0?0:e,g=Math.max(d,-t),m=d-g,f=new Si({axisDirection:l,growthDirection:o,userScrollDirection:this.offset.userScrollDirection,scrollOffset:t,precedingScrollExtent:u,overlap:0,remainingPaintExtent:s-i+p,crossAxisExtent:r,crossAxisDirection:this.crossDirection,viewportMainAxisExtent:n,remainingCacheExtent:Math.max(0,h+m),cacheOrigin:g});c.layout(f,!0);const v=c.geometry,x=i;(v.visible||e>0)&&this.updateChildLayoutOffset(c,x,o),e-=v.scrollExtent,i+=v.layoutExtent,u+=v.scrollExtent,this.maxScrollExtent+=v.scrollExtent,c=a(c)}return 0}updateChildLayoutOffset(t,e,i){const s=t.parentData;s&&(s.paintOffset=this.computeAbsolutePaintOffset(t,e,i))}computeAbsolutePaintOffset(e,i,s){switch(this.axisDirection){case j.up:return new t(0,this.size.height-(i+e.geometry.paintExtent));case j.right:return new t(i,0);case j.down:return new t(0,i);case j.left:return new t(this.size.width-(i+e.geometry.paintExtent),0)}}paintContents(t,i){this.visitChildren((s=>{var n;if(null===(n=null==s?void 0:s.geometry)||void 0===n?void 0:n.visible){const n=s.parentData;t.paintChild(s,new e(i.x+n.paintOffset.offsetX,i.y+n.paintOffset.offsetY))}}))}hitTestChildren(t,e){let i=this.firstChild;for(;i;){const s=i.parentData,n=Rt.zero.identity().translate(-s.paintOffset.offsetX,-s.paintOffset.offsetY);if(i.hitTest(t,Se.transformPoint(n,e)))return!0;i=null==s?void 0:s.nextSibling}return!1}render(t,e){t.clipRectAndPaint(T.hardEdge,{width:this.size.width,height:this.size.height,y:(null==e?void 0:e.y)||0,x:(null==e?void 0:e.x)||0},(()=>{this.paintContents(t,e)}))}debugRender(t,e){t.clipRectAndPaint(T.hardEdge,{width:this.size.width,height:this.size.height,y:(null==e?void 0:e.y)||0,x:(null==e?void 0:e.x)||0},(()=>{this.paintContents(t,e)}))}}class Wi extends Oi{constructor(t){super(t),this.cachedMaxScrollExtent=0,this.lastScrolledMaxScrollExtent=0,this.offset=null==t?void 0:t.offset,this.axisDirection=null==t?void 0:t.axisDirection}computeLayoutScrollOffset(t,e){const i=this.offset.pixels,s=t=>{const e=t.parentData;return null==e?void 0:e.previousSibling};let n=0;this.visitChildren((t=>{t&&(t.index=n++)}));let r=this.center;for(;r;){const t=r.geometry;if(!t)break;const e=t.scrollExtent;if(i-(this.lastScrolledMaxScrollExtent+e)>0)break;this.visitChildren((t=>{(null==t?void 0:t.geometry)&&(t.geometry.visible=!1)}));const n=s(r);if(!n||n===r)break;const o=n.geometry;r=n,this.lastScrolledMaxScrollExtent-=o.scrollExtent,this.lastScrolledMaxScrollExtent=Math.max(0,this.lastScrolledMaxScrollExtent)}this.performLayoutSliverChild(r,i-this.lastScrolledMaxScrollExtent,Math.max(0,-i),t,t,e,F.forward,(t=>{const e=t.parentData;return null==e?void 0:e.nextSibling}),t,this.axisDirection,0),this.offset.applyContentDimension(0,Math.max(0,this.maxScrollExtent-t))}handleUpdateVisualChildOrder(t,e,i,s){var n;if(e.scrollExtent-i<=0&&!e.visible){const e=null===(n=t.parentData)||void 0===n?void 0:n.previousSibling;e?(this.lastScrolledChild=e,this.lastScrolledMaxScrollExtent=s-e.geometry.scrollExtent):this.lastScrolledChild=this.center}else{if(!e.visible)return!1;e.visible}return!0}}class Hi{constructor(e,i){this.offset=t.zero,this.x=e,this.y=i}toJSON(){return{x:this.x,y:this.y}}copyWithOffset(t){return this.offset=t,this}static format(t,e){return new Hi(t,e)}compute(e){const i=.5*e.width,s=.5*e.height;return new t(i*this.x+this.offset.offsetX,s*this.y+this.offset.offsetY)}alongSize(e){const i=.5*e.width,s=.5*e.height;return new t(i+i*this.x,s+s*this.y)}inscribe(t,i){const s=.5*(i.width-t.width),n=.5*(i.height-t.height);return new e(s+s*this.x,n+n*this.y)}withRect(e){const i=.5*e.width,s=.5*e.height;return new t(e.x+i*this.x+i,e.y+s*this.y+s)}computeWithVector(t){return t.x*=this.x,t.y*=this.y,t}}Hi.center=new Hi(0,0),Hi.topLeft=new Hi(-1,-1),Hi.bottomLeft=new Hi(-1,1),Hi.topRight=new Hi(1,-1),Hi.bottomRight=new Hi(1,1),Hi.centerRight=new Hi(1,0),Hi.bottomCenter=new Hi(0,1),Hi.centerLeft=new Hi(-1,0),Hi.topCenter=new Hi(0,-1);class Mi extends Kt{constructor(t){var e;super(null==t?void 0:t.child,t.key),this.alignment=null!==(e=null==t?void 0:t.alignment)&&void 0!==e?e:Hi.center}createRenderObject(){return new Ni({alignment:this.alignment})}updateRenderObject(t,e){e.alignment=this.alignment}}class Ni extends ke{constructor(t){super(null==t?void 0:t.child),this._alignment=Hi.center,this.alignment=null==t?void 0:t.alignment}set alignment(t){this._alignment=null!=t?t:this._alignment,this.markNeedsLayout()}get alignment(){return this._alignment}performLayout(){const t=this.constraints;this.child?(this.child.layout(t.loosen(),!0),this.size=t.constrain(new i(this.child.size.width,this.child.size.height)),this.alignChild()):this.size=t.constrain(new i(1/0,1/0))}alignChild(){var t;const e=this.constraints.constrain(i.zero),s=null===(t=this.child)||void 0===t?void 0:t.parentData,n=this.alignment.inscribe(this.child.size,e);n.clampX(0,e.width),n.clampY(0,e.height),s.offset=n,this.child.parentData=s}render(t,e){super.render(t,e)}debugRender(t,e){t.paintEmptyDebugBoundary(e,this.size),super.debugRender(t,e)}}class Ii extends Mi{constructor(t){super(Object.assign(Object.assign({},t),{alignment:Hi.center}))}}class ji extends Kt{constructor(t){super(null==t?void 0:t.child,t.key),this.color=null==t?void 0:t.color}createRenderObject(){return new Vi(this.color)}updateRenderObject(t,e){e.color=this.color}}class Vi extends ke{constructor(t,e){super(e),this.color=t}set color(t){t&&this._color!==t&&(this._color=t,this.markNeedsPaint())}get color(){return this._color}performResize(){var t;this.size=null===(t=this.child)||void 0===t?void 0:t.getDryLayout(this.constraints)}render(t,e){var i,s;const n=t.paint;n.save(),n.beginPath(),n.fillStyle=this.color.rgba,n.fillRect(null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,this.size.width,this.size.height),n.closePath(),n.restore(),super.render(t,e)}debugRender(t,e){super.debugRender(t,e)}}class Fi extends Kt{constructor(t){super(null==t?void 0:t.child,null==t?void 0:t.key),this.decoration=null==t?void 0:t.decoration}createRenderObject(){return new Ui(this.decoration)}updateRenderObject(t,e){e.decoration=this.decoration}}class Ui extends ke{constructor(t){super(),this._decoration=t}set decoration(t){this._decoration=t,this.markNeedsPaint()}get decoration(){return this._decoration}render(t,e){var i;const s=null===(i=this.decoration)||void 0===i?void 0:i.createBoxPainter(this.markNeedsPaint.bind(this));s&&s.paint(t.paint,e,this.size),super.render(t,e)}debugRender(t,e){var i;const s=null===(i=this.decoration)||void 0===i?void 0:i.createBoxPainter(this.markNeedsPaint.bind(this));s&&s.debugPaint(t.paint,e,this.size),super.debugRender(t,e)}}class Zi{constructor(t){this.topLeft=t.topLeft||0,this.topRight=t.topRight||0,this.bottomLeft=t.bottomLeft||0,this.bottomRight=t.bottomRight||0}static all(t){return new Zi({topLeft:t,topRight:t,bottomLeft:t,bottomRight:t})}static only(t){return new Zi(t)}static get zero(){return new Zi({topLeft:0,topRight:0,bottomLeft:0,bottomRight:0})}isNone(){return 0===this.topLeft&&0===this.topRight&&0===this.bottomLeft&&0===this.bottomRight}static equals(t,e){return t.topLeft===e.topLeft&&t.topRight===e.topRight&&t.bottomLeft===e.bottomLeft&&t.bottomRight===e.bottomRight}equals(t){return Zi.equals(this,t)}get radius(){return[this.topLeft,this.topRight,this.bottomLeft,this.bottomRight]}}class Gi extends ke{constructor(t){super(null==t?void 0:t.child),this.additionalConstraints=(null==t?void 0:t.additionalConstraints)||c.zero}get additionalConstraints(){return this._additionalConstraints}set additionalConstraints(t){this._additionalConstraints!==t&&(this._additionalConstraints=t,this.markNeedsLayout())}computeDryLayout(t){return this.child?(this.child.layout(this.additionalConstraints.enforce(t),!0),this.child.size):this.additionalConstraints.enforce(this.constraints).constrain(i.zero)}set width(t){this._width=t}set height(t){this._height=t}get width(){return this._width}get height(){return this._height}performUpdateAdditional(t=this.width,e=this.height){this.additionalConstraints=new c({maxWidth:t,maxHeight:e,minWidth:t,minHeight:e}),this.markNeedsLayout()}performLayout(){this.size=this.computeDryLayout(this.constraints)}debugRender(t,e){t.paintDefaultDebugBoundary(e,this.size),super.debugRender(t,e)}}class Xi extends Kt{constructor(t){var e;super(null==t?void 0:t.child,t.key),this.additionalConstraints=null!==(e=null==t?void 0:t.additionalConstraints)&&void 0!==e?e:c.tightFor()}createRenderObject(){return new Gi({additionalConstraints:this.additionalConstraints})}updateRenderObject(t,e){e.additionalConstraints=this.additionalConstraints}}class Yi extends Kt{constructor(t){super(null==t?void 0:t.child,t.key),this.additionalConstraints=c.zero;const{width:e,height:i}=t;this.width=e,this.height=i,this.additionalConstraints=c.tightFor(e,i)}createRenderObject(){return new Gi({additionalConstraints:this.additionalConstraints})}updateRenderObject(t,e){e.additionalConstraints=this.additionalConstraints}}class qi extends Yi{constructor(t){var e;super(t),this.clipBehavior=T.hardEdge,this.clipBehavior=null!==(e=null==t?void 0:t.clipBehavior)&&void 0!==e?e:this.clipBehavior}createRenderObject(){return new Ji({clipBehavior:this.clipBehavior,additionalConstraints:this.additionalConstraints})}updateRenderObject(t,e){e.clipBehavior=this.clipBehavior}}class Ki extends qi{constructor(t){var e;super(t),this.borderRadius=Zi.zero,this.borderRadius=null!==(e=null==t?void 0:t.borderRadius)&&void 0!==e?e:Zi.zero}createRenderObject(){return new Qi({borderRadius:this.borderRadius,width:this.width,height:this.height,clipBehavior:this.clipBehavior})}updateRenderObject(t,e){e.borderRadius=this.borderRadius}}class Ji extends Gi{constructor(t){super(t),this._clipBehavior=T.hardEdge,this.clipBehavior=null==t?void 0:t.clipBehavior}set clipBehavior(t){this._clipBehavior=t,this.markNeedsPaint()}get clipBehavior(){return this._clipBehavior}performLayout(){void 0===this.width&&void 0===this.height?(this.child.layout(this.constraints),this.size=this.child.size):(this.child.layout(this.constraints),super.performLayout())}render(t,e){var i,s;t.clipRectAndPaint(this._clipBehavior,{x:null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,y:null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,width:this.size.width,height:this.size.height},(()=>{super.render(t,e)}))}}class Qi extends Ji{constructor(t){const{borderRadius:e}=t;super(t),this.borderRadius=e}get borderRadius(){return this._borderRadius}set borderRadius(t){this._borderRadius=t,this.markNeedsPaint()}performLayout(){super.performLayout()}render(t,e){var i,s;t.clipRRectAndPaint(this._clipBehavior,{x:null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,y:null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,width:this.size.width,height:this.size.height,radii:this.borderRadius.radius},(()=>{super.render(t,e)}))}}class $i{constructor(t){this.left=0,this.right=0,this.top=0,this.bottom=0;const{left:e=0,right:i=0,top:s=0,bottom:n=0}=null!=t?t:{};this.left=e,this.right=i,this.top=s,this.bottom=n}get isZero(){return 0===this.left&&0===this.right&&0===this.top&&0===this.bottom}}class ts extends $i{static get zero(){return new ts}static fromLTRB(t){return new ts(t)}static only(t){return new ts(t)}static all(t){return new ts({left:t,right:t,top:t,bottom:t})}static symmetric(t){const{vertical:e=0,horizontal:i=0}=t;return new ts({left:i,right:i,top:e,bottom:e})}}class es extends ke{get padding(){return this._padding}set padding(t){this._padding=t,this.markNeedsLayout()}constructor(t){super(null==t?void 0:t.child),this._padding=ts.zero,this.padding=null==t?void 0:t.padding}performLayout(){var t,s,n,r,o,a;const h=((null===(t=this.padding)||void 0===t?void 0:t.left)||0)+((null===(s=this.padding)||void 0===s?void 0:s.right)||0),l=((null===(n=this.padding)||void 0===n?void 0:n.top)||0)+((null===(r=this.padding)||void 0===r?void 0:r.bottom)||0);if(!this.child)return void(this.size=new i(Math.max(this.constraints.maxWidth,h),l));const d=this.constraints.deflate(new e(h,l)),c=this.child.parentData;this.child.layout(d,!0),c.offset=new e((null===(o=this.padding)||void 0===o?void 0:o.left)||0,(null===(a=this.padding)||void 0===a?void 0:a.top)||0),this.size=this.constraints.constrain(new i(h+this.child.size.width,l+this.child.size.height))}computeDryLayout(t){return this.size}render(t,e){super.render(t,e)}debugRender(t,e){super.debugRender(t,e)}}class is extends Kt{constructor(t){super(t.child,t.key),this.padding=null==t?void 0:t.padding}createRenderObject(){return new es({padding:this.padding})}updateRenderObject(t,e){e.padding=this.padding}}class ss extends Ft{constructor(t){var e,i;super(),this.width=null==t?void 0:t.width,this.height=null==t?void 0:t.height,this.constraints=null==t?void 0:t.constraints,this.color=null==t?void 0:t.color,this.child=null==t?void 0:t.child,this.decoration=null==t?void 0:t.decoration,this.alignment=null==t?void 0:t.alignment,this.key=null==t?void 0:t.key,this.padding=null==t?void 0:t.padding,this.clipBehavior=null==t?void 0:t.clipBehavior,this.margin=null==t?void 0:t.margin,this.constraints=null!==this.width||null!==this.height?null!==(i=null===(e=this.constraints)||void 0===e?void 0:e.tighten(this.width,this.height))&&void 0!==i?i:c.tightFor(this.width,this.height):this.constraints}build(t){var e,i,s;let n=this.child;if(null!==this.child||null!==this.constraints&&(null===(e=this.constraints)||void 0===e?void 0:e.isTight)?this.alignment&&(n=new Mi({alignment:this.alignment,child:n})):n=new Xi({additionalConstraints:c.expand(),child:n}),this.padding&&(n=new is({padding:this.padding,child:n})),this.color&&(n=new ji({child:n,color:this.color})),this.constraints&&(n=new Xi({additionalConstraints:this.constraints,child:n})),this.decoration){if(this.color)throw new Error("color and decoration can't be used at the same time");n=new Fi({decoration:this.decoration,child:n})}return this.clipBehavior&&(n=(null===(i=this.decoration)||void 0===i?void 0:i.borderRadius)?new Ki({borderRadius:null===(s=this.decoration)||void 0===s?void 0:s.borderRadius,child:n,clipBehavior:this.clipBehavior}):new qi({child:n,clipBehavior:this.clipBehavior})),this.margin&&(n=new is({padding:this.margin,child:n})),n}}class ns extends He{constructor(t){const{direction:e,children:i,mainAxisAlignment:s,crossAxisAlignment:n,spacing:r,mainAxisSize:o=at.max}=t;super(i),this.overflow=0,this._direction=C.horizontal,this._mainAxisAlignment=R.start,this._crossAxisAlignment=L.start,this._spacing=0,this.direction=e,this.mainAxisAlignment=s,this.crossAxisAlignment=n,this.spacing=null!=r?r:0,this._mainAxisSize=o}set direction(t){t&&this._direction!==t&&(this._direction=t,this.markNeedsLayout())}set mainAxisSize(t){t&&this._mainAxisSize!==t&&(this._mainAxisSize=t,this.markNeedsLayout())}set mainAxisAlignment(t){t&&this._mainAxisAlignment!==t&&(this._mainAxisAlignment=t,this.markNeedsLayout())}set crossAxisAlignment(t){t&&this._crossAxisAlignment!==t&&(this._crossAxisAlignment=t,this.markNeedsLayout())}set spacing(t){null!=t&&t!=this.spacing&&(this._spacing=t,this.markNeedsLayout())}get direction(){return this._direction}get mainAxisAlignment(){return this._mainAxisAlignment}get crossAxisAlignment(){return this._crossAxisAlignment}get spacing(){return this._spacing}performLayout(){const t=this.computeSize(this.constraints);this.direction===C.horizontal?this.size=this.constraints.constrain(new i(t.mainSize,t.crossSize)):this.direction===C.vertical&&(this.size=this.constraints.constrain(new i(t.crossSize,t.mainSize)));const s=t.mainSize-t.allocatedSize;this.overflow=Math.max(0,-1*s);const n=Math.max(0,s);let o=0,a=0;switch(this.mainAxisAlignment){case R.start:break;case R.end:o=n;break;case R.center:o=.5*n;break;case R.spaceBetween:a=n/(this.childCount-1);break;case R.spaceAround:a=n/this.childCount,o=.5*a;break;case R.spaceEvenly:a=n/(this.childCount+1),o=a}a+=this.spacing;let h=this.firstChild,l=o,d=0;for(;null!=h;){const i=h.parentData,s=this.getMainSize(h.size),n=this.getCrossSize(h.size),o=this.getCrossSize(this.size);switch(this.crossAxisAlignment){case L.start:break;case L.end:d=o-n;break;case L.center:d=.5*o-.5*n;break;case L.stretch:d=0;break;case L.baseline:d=.5*t.crossSize-.5*n}if(this.direction===C.horizontal?i.offset=new e(l,d):this.direction===C.vertical&&(i.offset=new e(d,l)),"number"!=typeof a)throw new r("betweenSpace is not a number");l+=s+a,h=null==i?void 0:i.nextSibling}}computeSize(t){let e,s=0,n=0,r=this.firstChild,o=0,a=0,h=this.spacing;n=this.direction===C.horizontal?t.maxWidth:t.maxHeight,e=n<1/0;let d=0;for(;null!=r;){const e=r.parentData;let n=c.zero;const l=this.getFlex(r);if(l>0)s+=l;else{this.crossAxisAlignment===L.stretch?this.direction===C.horizontal?n=c.tightFor(null,t.maxHeight):this.direction===C.vertical&&(n=c.tightFor(t.maxWidth,null)):this.direction===C.horizontal?n=new c({maxHeight:t.maxHeight}):this.direction===C.vertical&&(n=new c({maxWidth:t.maxWidth})),r.layout(n);const e=(null==r?void 0:r.size)||i.zero;a+=this.getMainSize(e),d>0&&(a+=h),o=Math.max(o,this.getCrossSize(e)),d+=1}r=null==e?void 0:e.nextSibling}if(s>0){const i=h*(this.childCount-1),d=Math.max(0,Math.max(0,e?n:0)-a-i)/s;for(r=this.firstChild;null!=r;){const i=this.getFlex(r);if(i>0){const s=e?i*d:1/0,n=s;let o=c.zero;this.crossAxisAlignment===L.stretch?this.direction===C.horizontal?o=new c({maxWidth:s,minWidth:n,minHeight:t.maxHeight,maxHeight:t.maxHeight}):this.direction===C.vertical&&(o=new c({maxWidth:t.maxWidth,minWidth:t.maxWidth,minHeight:n,maxHeight:s})):this.direction===C.horizontal?o=new c({minWidth:n,maxWidth:s,maxHeight:t.maxHeight,minHeight:0}):this.direction===C.vertical&&(o=new c({minHeight:n,maxHeight:s,maxWidth:t.minWidth,minWidth:0})),(o.hasInfiniteWidth||o.hasInfiniteHeight)&&l.assertValidConstraints(o,r,"Infinite constraints in layout."),r.layout(o)}a+=this.getMainSize(r.size),o=Math.max(o,this.getCrossSize(r.size));r=r.parentData.nextSibling}}return{mainSize:e&&this._mainAxisSize===at.max?n:a,crossSize:o,allocatedSize:a}}getFlex(t){var e;return t.parentData instanceof Le&&null!==(e=t.parentData.flex)&&void 0!==e?e:0}setupParentData(t){const e=new Le;e.node=t,t.parentData=e}getCrossSize(t){switch(this.direction){case C.horizontal:return t.height;case C.vertical:return t.width}}getMainSize(t){switch(this.direction){case C.horizontal:return t.width;case C.vertical:return t.height}}}class rs extends Qt{constructor(t){const{direction:e,children:i,mainAxisAlignment:s,crossAxisAlignment:n,spacing:r,mainAxisSize:o}=t;super(i,t.key),this.direction=C.horizontal,this.mainAxisAlignment=R.start,this.crossAxisAlignment=L.center,this.spacing=0,this.mainAxisSize=at.max,this.direction=null!=e?e:this.direction,this.mainAxisAlignment=null!=s?s:this.mainAxisAlignment,this.crossAxisAlignment=null!=n?n:this.crossAxisAlignment,this.spacing=r,this.mainAxisSize=o}createRenderObject(){return new ns({direction:this.direction,mainAxisAlignment:this.mainAxisAlignment,crossAxisAlignment:this.crossAxisAlignment,spacing:this.spacing,mainAxisSize:this.mainAxisSize})}updateRenderObject(t,e){e.direction=this.direction,e.mainAxisAlignment=this.mainAxisAlignment,e.crossAxisAlignment=this.crossAxisAlignment,e.spacing=this.spacing,e.mainAxisSize=this.mainAxisSize}}class os extends rs{constructor(t){super(Object.assign(Object.assign({},t),{direction:C.horizontal}))}}class as extends rs{constructor(t){super(Object.assign(Object.assign({},t),{direction:C.vertical}))}}class hs extends ee{constructor(t){var e;super(null==t?void 0:t.child,t.key),this.flex=0,this.flex=null!==(e=null==t?void 0:t.flex)&&void 0!==e?e:1}applyParentData(t){if(!(t.parentData instanceof Le))return;const e=null==t?void 0:t.parentData;e.flex=this.flex,t.parentData=e,t.parent instanceof Ee&&t.parent.markNeedsLayout()}}class ls extends ke{constructor(){super(...arguments),this._needsReBuild=!0}updateLayoutBuilder(t){this._callback!==t&&(this._callback=t,this.markNeedsLayout())}markNeedsReBuild(){this._needsReBuild=!0,this.markNeedsLayout()}performCallBuilder(t){this._needsReBuild&&t!==this._previousConstraints&&(this._callback(t),this._previousConstraints=t,this._needsReBuild=!1)}performLayout(){const t=this.constraints;this.performCallBuilder(t),this.child&&this.child.layout(t),super.performLayout()}}class ds extends qt{constructor({builder:t,key:e}){super(null,e),this.builder=t}createRenderObject(t){return new ls}createElement(){return new cs(this)}}class cs extends Xt{get layoutRenderView(){return this.renderView}insertRenderObjectChild(t,e){this.renderView.child=t}mount(t,e){super.mount(t,e),this.layoutRenderView.updateLayoutBuilder(this.layout.bind(this))}update(t){super.update(t),this.layoutRenderView.updateLayoutBuilder(this.layout.bind(this)),this.layoutRenderView.markNeedsReBuild()}performRebuild(){this.layoutRenderView.markNeedsReBuild(),super.performRebuild()}unmount(){this.layoutRenderView.updateLayoutBuilder(null),super.unmount()}layout(t){const e=this.widget.builder(this,t);this.child=this.updateChild(this.child,e)}}class us extends ds{constructor({builder:t,key:e}){super({builder:t,key:e})}}class ps{}class gs extends ps{applyPhysicsToUserOffset(t,e){return e}createBallisticSimulation(t,e){return new wi(.135,t.pixels,e)}applyBoundaryConditions(t,e){return e<t.minScrollExtent?e-t.minScrollExtent:e>t.maxScrollExtent?e-t.maxScrollExtent:0}}class ms extends ps{applyBoundaryConditions(t,e){return 0}applyPhysicsToUserOffset(t,e){if(!t.outOfRange)return e;let i=0;return t.pixels<t.minScrollExtent?i=t.minScrollExtent-t.pixels:t.pixels>t.maxScrollExtent&&(i=t.pixels-t.maxScrollExtent),e*Math.pow(.15,i/t.viewportDimension)*.52}createBallisticSimulation(t,e){return Math.abs(e)>20?new bi(t.pixels,t.maxScrollExtent,t.minScrollExtent,e):null}}function fs(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}function vs(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xs(t){return this instanceof xs?(this.v=t,this):new xs(t)}function ws(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=i.apply(t,e||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(t){n[t]&&(s[t]=function(e){return new Promise((function(i,s){r.push([t,e,i,s])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof xs?Promise.resolve(i.value.v).then(h,l):d(r[0][2],i)}catch(t){d(r[0][3],t)}var i}function h(t){a("next",t)}function l(t){a("throw",t)}function d(t,e){t(e),r.shift(),r.length&&a(r[0][0],r[0][1])}}function ys(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=vs(t),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(i){e[i]=t[i]&&function(e){return new Promise((function(s,n){(function(t,e,i,s){Promise.resolve(s).then((function(e){t({value:e,done:i})}),e)})(s,n,(e=t[i](e)).done,e.value)}))}}}class bs{constructor(t,e){this._constructor=t,this._initializer=e}}class Ps extends Xe{addPointer(t){this.isAllowedPointer(t)&&this.addAllowedPointer(t)}addAllowedPointer(t){}invokeCallback(t,e){return null==e?void 0:e()}}class Ss extends Ps{constructor(){super(),this.entities=new Map,this.handleEventBind=this.handleEvent.bind(this)}addAllowedPointer(t){super.addAllowedPointer(t),this.entities.set(t.pointer,this.addPointerToArena(t)),this.startTrackingPointer(t.pointer)}startTrackingPointer(t){Je.instance.pointerRouter.addRoute(t,this.handleEventBind)}stopTrackingPointer(t){Je.instance.pointerRouter.removeRoute(t,this.handleEventBind)}resolve(t){for(let e of this.entities.values())e.resolve(t)}addPointerToArena(t){return Je.instance.gestureArena.add(t.pointer,this)}acceptGesture(t){}rejectGesture(t){this.stopTrackingPointer(t)}}class _s extends Ss{constructor(t){super(),this.deadline=t}addAllowedPointer(t){this.deadline&&(this.timer=setTimeout((()=>{this.timer&&this.didExceedDeadlineWithEvent(t)}),this.deadline.value)),super.addAllowedPointer(t)}didExceedDeadlineWithEvent(t){this.didExceedDeadline()}didExceedDeadline(){this.deadline=null}handleEvent(t){this.handlePrimaryPointerDown(t)}stopTimer(){clearTimeout(this.timer),this.timer=null}rejectGesture(t){this.stopTimer()}acceptGesture(t){this.stopTimer()}}class Cs extends _s{constructor(t){var e;super(),this.deadline=new li({milliseconds:300}),this.isAccepted=!1,t&&(this.deadline=null!==(e=null==t?void 0:t.pressDuration)&&void 0!==e?e:this.deadline)}handlePrimaryPointerDown(t){}didExceedDeadline(){this.resolve(je.accepted),this.isAccepted=!0,this.handleLongPressStart(this.startEvent)}handleEvent(t){t instanceof ue&&this.isAccepted?this.startEvent=t:t instanceof ge&&this.isAccepted?this.handleLongPressUpdate(t):t instanceof pe&&this.isAccepted&&(this.handleLongPressEnd(t),this.resolve(je.rejected),this.reset()),t instanceof fe&&this.resolve(je.rejected)}acceptGesture(t){super.acceptGesture(t),this.handleLongPress()}handleLongPressUpdate(t){this.invokeCallback("onLongPressUpdate",(()=>{this.onLongPressUpdate(t)}))}handleLongPressEnd(t){this.invokeCallback("onLongPressEnd",(()=>{this.onLongPressEnd(t)}))}handleLongPressStart(t){this.invokeCallback("onLongPressStart",(()=>{this.onLongPressStart(t)}))}handleLongPress(){this.invokeCallback("onLongPress",this.onLongPress)}isAllowedPointer(t){return!!(this.onLongPress||this.onLongPressStart||this.onLongPressUpdate||this.onLongPressEnd)}reset(){this.isAccepted=!1}}class Ds extends hi{}class Ts{constructor(t){this.reClip=t}addListener(t){var e;null===(e=this.reClip)||void 0===e||e.addListener(t)}removeListener(t){var e;null===(e=this.reClip)||void 0===e||e.removeListener(t)}}class Es{constructor(t,e){this.startTime=0,this.duration=e.value,this.callback=t,this.runTimeDuration=e.value}stop(){const t=+new Date;this.runTimeDuration-=t-this.startTime,this.cancel()}cancel(){clearTimeout(this.timer),this.timer=null}reset(){this.timer=null,this.runTimeDuration=this.duration}reStart(){this.reset(),this.start()}start(){this.startTime=+new Date,!this.timer&&this.running()}running(){this.timer=setTimeout((()=>{var t;this.timer=null,null===(t=this.callback)||void 0===t||t.call(this)}),this.runTimeDuration)}}class Rs extends Kt{constructor(t){super(null==t?void 0:t.child,null==t?void 0:t.key),this.painter=null==t?void 0:t.painter,this.foregroundPainter=null==t?void 0:t.foregroundPainter}createRenderObject(){return new As({painter:this.painter,foregroundPainter:this.foregroundPainter})}updateRenderObject(t,e){}}class As extends ke{constructor(t){super(),this._painter=null==t?void 0:t.painter,this._foregroundPainter=null==t?void 0:t.foregroundPainter}set painter(t){this._painter=t,this.markNeedsPaint()}set foregroundPainter(t){this._foregroundPainter=t,this.markNeedsPaint()}render(t,e){this._painter&&this.renderWidthPainter(t.paint,this._painter,e),super.render(t,e),this._foregroundPainter&&this.renderWidthPainter(t.paint,this._foregroundPainter,e)}renderWidthPainter(t,i,s=e.zero){t.save(),t.translate(s.x,s.y),i.render(t,this.size),t.restore()}}class Ls extends _s{constructor(){super(new li({milliseconds:180})),this.sentDown=!1}addAllowedPointer(t){this.reset(),super.addAllowedPointer(t)}isAllowedPointer(){return!!(this.onTap||this.onTapDown||this.onTapUp||this.onTapCancel)}handlePrimaryPointerDown(t){t instanceof ue&&(this.down=t),t instanceof pe?(this.up=t,this.checkUp()):t instanceof fe&&(this.resolve(je.rejected),this.sentDown&&(this.checkCancel(),this.reset()))}didExceedDeadline(){this.checkDown()}handleEventDown(){this.sentDown=!0,this.invokeCallback("onTapDown",(()=>{var t;null===(t=this.onTapDown)||void 0===t||t.call(this,this.down)}))}checkDown(){!this.sentDown&&this.down&&(this.invokeCallback("onTapDown",(()=>{var t;null===(t=this.onTapDown)||void 0===t||t.call(this,this.down)})),this.sentDown=!0)}checkCancel(){this.invokeCallback("onTapCancel",this.onTapCancel)}checkUp(){this.sentDown&&this.up&&(this.invokeCallback("onTapUp",(()=>{var t;null===(t=this.onTapUp)||void 0===t||t.call(this,this.up)})),this.invokeCallback("onTap",(()=>{var t;null===(t=this.onTap)||void 0===t||t.call(this,this.down)})),this.reset())}reset(){this.sentDown=!1,this.up=null,this.down=null}acceptGesture(t){super.acceptGesture(t),this.checkDown(),this.checkUp()}rejectGesture(t){super.rejectGesture(t),this.sentDown&&(this.invokeCallback("onTapCancel",this.onTapCancel),this.reset())}}const zs=new li({milliseconds:300});class ks extends Ss{constructor(){super(...arguments),this.doubleTapTimeOut=!1}addAllowedPointer(t){this.startTrack(t)}get firstTap(){return this._firstTap}set firstTap(t){this._firstTap=t}startTrack(t){this.stopDoubleTimer(),super.addAllowedPointer(t)}registerSecondaryTap(t){this.resolve(je.accepted),this.reset()}registerFirstTap(t){Je.instance.gestureArena.hold(t.pointer),this.firstTap=t,this.startDoubleTimer()}startDoubleTimer(){this.doubleTapTimer=setTimeout((()=>{this.reset(),this.doubleTapTimeOut=!0,this.doubleTapTimer=null}),zs.value)}stopDoubleTimer(){clearTimeout(this.doubleTapTimer)}isAllowedPointer(){return!!this.onDoubleTap}stopTimer(){clearTimeout(this.doubleTapTimer)}handleEvent(t){t instanceof pe&&(this.firstTap?this.registerSecondaryTap(t):this.registerFirstTap(t)),(t instanceof ge||t instanceof fe)&&(this.reject(),this.reset())}reject(){this.resolve(je.rejected)}reset(){this.stopDoubleTimer(),this.firstTap&&(this.reject(),Je.instance.gestureArena.release(this.firstTap.pointer),this.firstTap=null,this.doubleTapTimer=null,this.doubleTapTimeOut=!1)}acceptGesture(t){this.stopTimer(),this.checkDoubleTap(),this.reset(),super.acceptGesture(t)}checkDoubleTap(){this.onDoubleTap&&this.invokeCallback("onDoubleTap",this.onDoubleTap)}}class Bs extends Ss{constructor(){super(...arguments),this.moved=!1}isAllowedPointer(t){return!!(this.onDragStart||this.onDragUpdate||this.onDragEnd)}handleEvent(t){t instanceof ue&&(this.startEvent=t),t instanceof ge&&(this.startEvent&&!this.moved?(this.resolve(je.accepted),this.handlePanDragStart(this.startEvent),this.moved=!0):this.handlePanDragUpdate(t)),t instanceof pe&&this.moved&&this.startEvent&&(super.resolve(je.rejected),this.handlePanDragEnd(t),this.reset(),this.stopTrackingPointer(t.pointer))}rejectGesture(t){super.rejectGesture(t),this.reset()}reset(){this.startEvent=null,this.moved=!1}handlePanDragEnd(t){this.invokeCallback("onPanEnd",(()=>{var e;null===(e=this.onDragEnd)||void 0===e||e.call(this,t)}))}handlePanDragStart(t){this.invokeCallback("onPanStart",(()=>{var e;null===(e=this.onDragStart)||void 0===e||e.call(this,t)}))}handlePanDragUpdate(t){this.invokeCallback("onPanUpdate",(()=>{var e;null===(e=this.onDragUpdate)||void 0===e||e.call(this,t)}))}}class Os extends Ss{constructor(){super(...arguments),this._startDistance=0,this._preAngle=0,this._preScale=1}handleEvent(t){t instanceof ce&&(t instanceof xe?(this.handlePanZoomStart(t),this.resolve(je.accepted)):t instanceof we?this.handlePanZoomUpdate(t):t instanceof ye&&this.handlePanZoomEnd(t))}handlePanZoomStart(t){this._startDistance=this.computeDistance(t),this._preAngle=this.computeRotationAngle(t),this._preScale=1,this.invokeCallback("onPanZoomStart",(()=>{var e;null===(e=this.onPanZoomStart)||void 0===e||e.call(this,t)}))}handlePanZoomUpdate(t){const e=this.computeDistance(t)/this._startDistance,i=this.computeRotationAngle(t);t.scale=e,t.rotationAngle=i,t.deltaScale=e-this._preScale,t.deltaRotationAngle=i-this._preAngle,this._preScale=e,this._preAngle=i,this.invokeCallback("onPanZoomUpdate",(()=>{var e;null===(e=this.onPanZoomUpdate)||void 0===e||e.call(this,t)}))}handlePanZoomEnd(t){this._startDistance=0,this._preScale=1,this._preAngle=0,this.invokeCallback("onPanZoomEnd",(()=>{var e;null===(e=this.onPanZoomEnd)||void 0===e||e.call(this,t)}))}computeRotationAngle(t){const e=t.pointers[0].pointer.toVector(),i=t.pointers[1].pointer.toVector();return Math.atan2(i.y-e.y,i.x-e.x)}computeDistance(t){const i=t.pointers[0].pointer.toVector(),s=t.pointers[1].pointer.toVector();return e.dist(i,s)}isAllowedPointer(t){return!!(this.onPanZoomEnd||this.onPanZoomStart||this.onPanZoomUpdate)}}class Ws extends Kt{constructor(t){super(null==t?void 0:t.child,t.key),this._onPointerDown=t.onPointerDown,this._onPointerMove=t.onPointerMove,this._onPointerUp=t.onPointerUp,this._onPointerCancel=t.onPointerCancel,this._onSignalPointer=t.onSignalPointer}createRenderObject(){return new Hs({onPointerDown:this._onPointerDown,onPointerMove:this._onPointerMove,onPointerUp:this._onPointerUp,onPointerCancel:this._onPointerCancel,onSignalPointer:this._onSignalPointer})}updateRenderObject(t,e){e.onPointerDown=this._onPointerDown,e.onPointerMove=this._onPointerMove,e.onPointerUp=this._onPointerUp,e.onPointerCancel=this._onPointerCancel,e.onSignalPointer=this._onSignalPointer}}class Hs extends ke{set onSignalPointer(t){this._onSignalPointer=t}set onPointerDown(t){this._onPointerDown=t}set onPointerMove(t){this._onPointerMove=t}set onPointerUp(t){this._onPointerUp=t}set onPointerCancel(t){this._onPointerCancel=t}constructor(t){super(null==t?void 0:t.child),this._onPointerDown=null==t?void 0:t.onPointerDown,this._onPointerMove=null==t?void 0:t.onPointerMove,this._onPointerUp=null==t?void 0:t.onPointerUp,this._onPointerCancel=null==t?void 0:t.onPointerCancel,this._onSignalPointer=null==t?void 0:t.onSignalPointer}handleEvent(t,e){var i,s,n,r,o;t instanceof ue?null===(i=this._onPointerDown)||void 0===i||i.call(this,t):t instanceof ge?null===(s=this._onPointerMove)||void 0===s||s.call(this,t):t instanceof pe?null===(n=this._onPointerUp)||void 0===n||n.call(this,t):t instanceof fe?null===(r=this._onPointerCancel)||void 0===r||r.call(this,t):t instanceof ve&&(null===(o=this._onSignalPointer)||void 0===o||o.call(this,t))}hitTestSelf(t,e){return this.hitTestChildren(t,e)}}class Ms extends Ft{constructor(t){super(null==t?void 0:t.key),this.gestureRecognizers=new Map,this.child=null==t?void 0:t.child,this.onTap=null==t?void 0:t.onTap,this.onTapDown=null==t?void 0:t.onTapDown,this.onTapUp=null==t?void 0:t.onTapUp,this.onTapCancel=null==t?void 0:t.onTapCancel,this.onDoubleTap=null==t?void 0:t.onDoubleTap,this.onLongPress=null==t?void 0:t.onLongPress,this.onDragStart=null==t?void 0:t.onDragStart,this.onDragUpdate=null==t?void 0:t.onDragUpdate,this.onDragEnd=null==t?void 0:t.onDragEnd,this.onPanZoomStart=null==t?void 0:t.onPanZoomStart,this.onPanZoomUpdate=null==t?void 0:t.onPanZoomUpdate,this.onPanZoomEnd=null==t?void 0:t.onPanZoomEnd}build(t){const e=new Map;return e.set(Ls,new bs((()=>new Ls),(t=>{t.onTap=this.onTap,t.onTapDown=this.onTapDown,t.onTapUp=this.onTapUp,t.onTapCancel=this.onTapCancel}))),e.set(ks,new bs((()=>new ks),(t=>{t.onDoubleTap=this.onDoubleTap}))),e.set(Cs,new bs((()=>new Cs),(t=>{t.onLongPress=this.onLongPress}))),e.set(Bs,new bs((()=>new Bs),(t=>{t.onDragEnd=this.onDragEnd,t.onDragStart=this.onDragStart,t.onDragUpdate=this.onDragUpdate}))),e.set(Os,new bs((()=>new Os),(t=>{t.onPanZoomStart=this.onPanZoomStart,t.onPanZoomUpdate=this.onPanZoomUpdate,t.onPanZoomEnd=this.onPanZoomEnd}))),new Ns({gestures:e,child:this.child})}}class Ns extends Zt{constructor(t){super(),this.gestures=new Map,this.gestures=null==t?void 0:t.gestures,this.child=null==t?void 0:t.child}createState(){return new Is}}class Is extends Gt{constructor(){super(...arguments),this.gestureRecognizers=new Map}initState(){super.initState(),this.handleInitGestures(this.widget.gestures)}build(t){return new Ws({child:this.widget.child,onPointerDown:this.handlePointerDown.bind(this)})}handlePointerDown(t){for(const e of this.gestureRecognizers.values())e.addPointer(t)}handleInitGestures(t){for(const[e,i]of t){const t=i._constructor();i._initializer(t),this.gestureRecognizers.set(e,t)}}}class js extends hi{constructor(){super(...arguments),this.initialScrollOffset=0,this.positions=new Array}get position(){if(this.positions.length>1||0==this.positions.length)throw new Error("ScrollController can only be used with one ScrollPosition at a time."+this.positions.length);return this.positions[0]}animateTo(t,e=li.zero,i=ui.ease){return new Promise((s=>fs(this,void 0,void 0,(function*(){for(let s of this.positions)yield s.animateTo(t,e,i);s()}))))}jumpTo(t){this.positions.forEach((e=>e.jumpTo(t)))}attach(t){this.positions.includes(t)||(this.positions.push(t),t.addListener(this.notifyListeners.bind(this)))}detach(t){this.positions.includes(t)&&(t.removeListener(this.notifyListeners.bind(this)),this.positions.splice(this.positions.indexOf(t),1))}createScrollPosition(t,e,i){return new zi({physics:t,axisDirection:e,initPixels:i})}get offset(){return this.position.pixels}}class Vs extends Ds{constructor(){super(...arguments),this.key=new v,this._scrollbarWidth=6,this._maxContentExtent=0,this._viewportDimension=0,this._thumbMainAxisPosition=0,this._thumbExtent=0,this._thumbOpacity=1,this._thumbRect=s.zero,this._trackRect=s.zero,this._pixels=0}set maxContentExtent(t){this._maxContentExtent!==t&&(this._maxContentExtent=t,this.setThumbExtent())}get maxContentExtent(){return this._maxContentExtent}set viewportDimension(t){this._viewportDimension!==t&&(this._viewportDimension=t,this.setThumbExtent())}set thumbOpacity(t){this._thumbOpacity=t}set scrollAxis(t){this._scrollAxis=t}get thumbRect(){return this._thumbRect}get trackRect(){return this._trackRect}set scrollbarWidth(t){this._scrollbarWidth=null!=t?t:this._scrollbarWidth}get overflow(){return this._pixels>this._maxContentExtent}get thumbMainAxisPosition(){return this._thumbMainAxisPosition}render(t,e){this.setThumbExtent(),this.paintScrollBar(t,e)}setThumbExtent(){this._maxContentExtent>0?this._thumbExtent=Math.max(this._viewportDimension/this._maxContentExtent*this._viewportDimension,20):this._thumbExtent=0}paintScrollBar(t,e){let i=0,s=0,n=0,r=0;this._scrollAxis===C.horizontal?(i=this._thumbMainAxisPosition,s=e.height-this._scrollbarWidth,n=this._thumbExtent,r=this._scrollbarWidth):this._scrollAxis===C.vertical&&(i=e.width-this._scrollbarWidth,s=this._thumbMainAxisPosition,n=this._scrollbarWidth,r=Math.max(6,this._thumbExtent)),this._thumbRect.update({x:i,y:s,width:n,height:r}),this._scrollAxis===C.horizontal?(i=0,s=e.height-this._scrollbarWidth,n=e.width,r=this._scrollbarWidth):this._scrollAxis===C.vertical&&(i=e.width-this._scrollbarWidth,s=0,n=this._scrollbarWidth,r=e.height),this._trackRect.update({x:i,y:s,width:n,height:r}),this.paintTrack(t,e),this.paintThumb(t,e)}paintThumb(t,e){let{x:i,y:s,width:n,height:r}=this._thumbRect;t.fillStyle="rgba(127,127,127,"+this._thumbOpacity+")",t.roundRect(i,s,n,r,this._scrollbarWidth),t.fill()}paintTrack(t,e){t.fillStyle="rgba(0,0,0,"+.12*this._thumbOpacity+")";const{x:i,y:s,width:n,height:r}=this._trackRect;t.fillRect(i,s,n,r)}update(t){this._pixels=t.pixels,this.scrollAxis=Pi(t.axisDirection),this.setThumbExtent(),this._thumbMainAxisPosition=this._pixels/this._maxContentExtent*(this._viewportDimension-this._thumbExtent)}hitTestThumb(t){const i=Ys(new e(this._thumbRect.x,this._thumbRect.y));return t.sub(i),this._thumbRect.size.contains(t)}getTractScroll(t){return P((this._thumbMainAxisPosition+t)/(this._viewportDimension-this._thumbExtent)*this._maxContentExtent,0,this._maxContentExtent)}}class Fs extends Zt{constructor(t){var e,i;super(null==t?void 0:t.key),this.scrollController=null==t?void 0:t.controller,this.child=null==t?void 0:t.child,null!==(e=this.scrollbarPainter)&&void 0!==e||(this.scrollbarPainter=null==t?void 0:t.scrollbarPainter),this.scrollbarWidth=null!==(i=null==t?void 0:t.scrollbarWidth)&&void 0!==i?i:6}createState(){return new Zs}}const Us=new x;class Zs extends Gt{constructor(){super(...arguments),this._pressThumb=!1,this._painter=new Vs}get painter(){var t;return null!==(t=this.widget.scrollbarPainter)&&void 0!==t?t:this._painter}get scrollController(){return this.widget.scrollController}initState(){super.initState(),this.scrollPainterAnimateController=new vi({duration:new li({milliseconds:300}),curve:ui.easeInSine}),this.faceOutTimer=new Es((()=>{!this._pressThumb&&this.scrollPainterAnimateController.reverse()}),new li({milliseconds:500}));const t=this.scrollController;t.addListener((()=>{this.handleThumbEndTimer(),this.scrollPainterAnimateController.isDismissed&&this.scrollPainterAnimateController.forward(),this.updateScrollbarPainter(),this.painter.update(t.position)})),this.scrollPainterAnimateController.addListener((()=>{this.updateScrollbarPainter(),this.setState((()=>{}))}))}handleThumbEndTimer(){var t;null===(t=this.faceOutTimer)||void 0===t||t.cancel(),this.faceOutTimer.reStart()}handleThumbStart(){var t;this._pressThumb=!0,this.scrollPainterAnimateController.isForward&&(null===(t=this.scrollPainterAnimateController)||void 0===t||t.stop())}handleThumbUpdate(t){const e=this.painter.getTractScroll(t);this.scrollController.jumpTo(e)}handleThumbEnd(){this._pressThumb=!1,this.handleThumbEndTimer()}get gestures(){const t=new Map;return t.set(Gs,new bs((()=>new Gs(this.painter)),(t=>{t.onLongPressStart=t=>{this.handleThumbStart()},t.onLongPressUpdate=t=>{this.handleThumbUpdate(t.delta.y)},t.onLongPressEnd=t=>{this.handleThumbEnd()}}))),t}updateScrollbarPainter(){const t=this.scrollController.position,e=this.painter;e.maxContentExtent=t.maxScrollExtent,e.viewportDimension=t.viewportDimension,e.thumbOpacity=this.scrollPainterAnimateController.value,e.scrollbarWidth=this.widget.scrollbarWidth}build(t){return new Ns({child:new qi({child:new Rs({key:Us,foregroundPainter:this.painter,child:this.widget.child})}),gestures:this.gestures})}}class Gs extends Cs{constructor(t){super({pressDuration:li.zero}),this.painter=t}isAllowedPointer(t){if(this.painter.hitTestThumb(t.position))return super.isAllowedPointer(t)}}class Xs extends Ft{constructor(t){super(t.key),this.controller=null==t?void 0:t.controller,this.child=null==t?void 0:t.child,this.scrollbarPainter=null==t?void 0:t.scrollbarPainter,this.scrollbarWidth=null==t?void 0:t.scrollbarWidth}build(t){return new Fs({controller:this.controller,child:this.child,scrollbarPainter:this.scrollbarPainter,scrollbarWidth:this.scrollbarWidth})}}const Ys=t=>Us.currentElement.findRenderView().localToGlobal(t);class qs extends Zt{constructor(t){var e;super(),this.viewportBuilder=null==t?void 0:t.viewportBuilder,this.axisDirection=null==t?void 0:t.axisDirection,this.physics=null!==(e=null==t?void 0:t.physics)&&void 0!==e?e:new gs,this.controller=null==t?void 0:t.controller}createState(){return new Ks}}class Ks extends Gt{initState(){var t;super.initState(),this.effectiveController=null!==(t=this.widget.controller)&&void 0!==t?t:new js,this.updatePosition()}updatePosition(){const t=this.position;t&&this.effectiveController.detach(t);const e=this.widget.controller.createScrollPosition(this.widget.physics,this.widget.axisDirection,null==t?void 0:t.pixels);this.effectiveController.attach(e),this.position=e}applyUserOffset(t){this.position.pointerScroll(t)}didUpdateWidget(t){super.didUpdateWidget(t)}build(e){return new Ws({onPointerDown:()=>{this.position.scrollStart()},child:new Ms({onDragStart:()=>{this.position.scrollStart()},onDragUpdate:e=>{this.applyUserOffset(e.delta),this.position.scrollUpdate(new t(e.position.x,e.position.y))},onDragEnd:()=>{this.position.scrollEnd()},child:this.widget.viewportBuilder(e,this.position)})})}}class Js extends Qt{constructor(t){super(null==t?void 0:t.children,null==t?void 0:t.key),this.offset=null==t?void 0:t.offset,this.axisDirection=null==t?void 0:t.axisDirection}updateRenderObject(t,e){e.offset=this.offset,e.axisDirection=this.axisDirection}createRenderObject(){return new Wi({offset:this.offset,axisDirection:this.axisDirection})}}class Qs extends Kt{constructor(t){super(null==t?void 0:t.child,null==t?void 0:t.key)}updateRenderObject(t,e){}createRenderObject(){return new Ti}}class $s extends Ft{constructor(t){var e,i,s;super(t.key),this.controller=null!==(e=null==t?void 0:t.controller)&&void 0!==e?e:new js,this.axisDirection=null!==(i=null==t?void 0:t.axisDirection)&&void 0!==i?i:j.down,this.physics=null!==(s=null==t?void 0:t.physics)&&void 0!==s?s:new gs,this.child=null==t?void 0:t.child}viewportBuilder(t,e){return new Js({offset:e,axisDirection:e.axisDirection,children:[new Qs({child:this.child})]})}build(t){return new qs({controller:this.controller,axisDirection:this.axisDirection,physics:this.physics,viewportBuilder:this.viewportBuilder.bind(this)})}}class tn extends Ft{constructor(t){var e,i,s;super(t.key),this.controller=null!==(e=null==t?void 0:t.controller)&&void 0!==e?e:new js,this.axisDirection=null!==(i=null==t?void 0:t.axisDirection)&&void 0!==i?i:j.down,this.physics=null!==(s=null==t?void 0:t.physics)&&void 0!==s?s:new gs,this.children=null==t?void 0:t.children}viewportBuilder(t,e,i,s){return new Js({offset:e,axisDirection:i,children:s})}build(t){const e=this.buildSlivers(t);return new qs({controller:this.controller,axisDirection:this.axisDirection,physics:this.physics,viewportBuilder:(t,i)=>this.viewportBuilder(t,i,this.axisDirection,e)})}}var en,sn;(sn=en||(en={})).fill="fill",sn.contain="contain",sn.cover="cover",sn.fitWidth="fitWidth",sn.fitHeight="fitHeight",sn.none="none",sn.scaleDown="scaleDown";class nn{constructor(t,e){this.source=t,this.destination=e}}const rn=(t,e,s)=>{if(e.height<=0||e.width<=0||s.height<=0||s.width<=0)return new nn(new i(0,0),new i(0,0));let n,r;switch(t){case en.fill:n=e,r=s;break;case en.contain:n=e,r=s.width/s.height>n.width/n.height?new i(n.width*s.height/n.height,s.height):new i(s.width,n.height*s.width/n.width);break;case en.cover:n=s.width/s.height>e.width/e.height?new i(e.width,e.width*s.height/s.width):new i(e.height*s.width/s.height,e.height),r=s;break;case en.fitWidth:s.width/s.height>e.width/e.height?(n=new i(e.width,e.width*s.height/s.width),r=s):(n=e,r=new i(s.width,n.height*s.width/n.width));break;case en.fitHeight:s.width/s.height>e.width/e.height?(n=e,r=new i(n.width*s.height/n.height,s.height)):(n=new i(e.height*s.width/s.height,e.height),r=s);break;case en.none:n=new i(Math.min(e.width,s.width),Math.min(e.height,s.height)),r=n;break;case en.scaleDown:n=e,r=new i(e.width,e.height);const t=e.width/e.height;r.height>s.height&&(r=new i(s.height*t,s.height)),r.width>s.width&&(r=new i(s.width,s.width/t))}return new nn(n,r)};class on{}class an extends on{constructor(t){var e,i,s,n;super(),this.bottom=null!==(e=null==t?void 0:t.bottom)&&void 0!==e?e:hn.none,this.left=null!==(i=null==t?void 0:t.left)&&void 0!==i?i:hn.none,this.right=null!==(s=null==t?void 0:t.right)&&void 0!==s?s:hn.none,this.top=null!==(n=null==t?void 0:t.top)&&void 0!==n?n:hn.none}paint(t,e,i,s){this.paintBorders(t,e,i,s,{top:this.top,right:this.right,bottom:this.bottom,left:this.left})}paintBorders(t,e,i,s,n){const{top:r,bottom:o,right:a,left:h}=n;if(s&&!s.isNone()){if((null==r?void 0:r.style)===lt.none||(null==o?void 0:o.style)===lt.none||(null==a?void 0:a.style)===lt.none||(null==h?void 0:h.style)===lt.none)throw new Error("Borders must be none when BorderRadius is not none");const n=r.color||o.color||a.color||h.color;if(r.color!==n||h.color!==n||a.color!==n||o.color!==n)throw new Error("When BorderRadius is not none, all BorderSide colors must be the same");const l=r.dashed||a.dashed||o.dashed||h.dashed;if(r.dashed!==l||a.dashed!==l||o.dashed!==l||h.dashed!==l)throw new Error("When BorderRadius is not none, all BorderSide dashed must be the same");return t.lineWidth=r.width,t.strokeStyle=r.color.rgba,l&&t.setLineDash(r.dashed),t.roundRect(i.x,i.y,e.width,e.height,s.radius),void t.stroke()}(null==r?void 0:r.style)!==lt.none&&(t.beginPath(),t.lineWidth=r.width,t.strokeStyle=r.color.rgba,r.dashed&&t.setLineDash(r.dashed),t.moveTo(i.x,i.y),t.lineTo(i.x+e.width,i.y),0===(null==r?void 0:r.width)?t.stroke():(t.save(),t.fillStyle=r.color.rgba,t.lineTo(i.x+e.width-a.width,i.y+r.width),t.lineTo(i.x+h.width,i.y+r.width),t.fill(),t.restore()),t.closePath()),(null==a?void 0:a.style)!==lt.none&&(t.beginPath(),t.lineWidth=a.width,t.strokeStyle=a.color.rgba,a.dashed&&t.setLineDash(a.dashed),t.moveTo(i.x+e.width,i.y),t.lineTo(i.x+e.width,i.y+e.height),0===(null==a?void 0:a.width)?t.stroke():(t.save(),t.fillStyle=a.color.rgba,t.lineTo(i.x+e.width-a.width,i.y+e.height),t.lineTo(i.x+e.width-a.width,i.y+r.width),t.fill(),t.restore()),t.closePath()),(null==o?void 0:o.style)!==lt.none&&(t.beginPath(),t.lineWidth=o.width,t.strokeStyle=o.color.rgba,o.dashed&&t.setLineDash(o.dashed),t.moveTo(i.x,i.y+e.height),t.lineTo(i.x+e.width,i.y+e.height),0===(null==o?void 0:o.width)?t.stroke():(t.save(),t.fillStyle=o.color.rgba,t.lineTo(i.x+e.width-a.width,i.y+e.height-o.width),t.lineTo(i.x+h.width,i.y+e.height-o.width),t.fill(),t.restore()),t.closePath()),(null==h?void 0:h.style)!==lt.none&&(t.beginPath(),t.lineWidth=h.width,t.strokeStyle=h.color.rgba,h.dashed&&t.setLineDash(h.dashed),t.moveTo(i.x,i.y),t.lineTo(i.x,i.y+e.height),0===(null==h?void 0:h.width)?t.stroke():(t.save(),t.fillStyle=h.color.rgba,t.lineTo(i.x+h.width,i.y+e.height-o.width),t.lineTo(i.x+h.width,i.y+r.width),t.fill(),t.restore()),t.closePath())}static all(t){return new an({top:new hn(t),left:new hn(t),right:new hn(t),bottom:new hn(t)})}static only(t){return new an(t)}}class hn{constructor(t){var e;this.color=null==t?void 0:t.color,this.width=null!==(e=null==t?void 0:t.width)&&void 0!==e?e:1,this.style=null==t?void 0:t.style,this.dashed=null==t?void 0:t.dashed}static get none(){return new hn({color:new S(0),width:0,style:lt.none})}}class ln{hitTest(t,e){return!0}}class dn{constructor(t){this.onChanged=t}dispose(){}}class cn extends ln{constructor(t){if(super(),this.border=null==t?void 0:t.border,this.borderRadius=null==t?void 0:t.borderRadius,this.backgroundColor=null==t?void 0:t.backgroundColor,this.shadows=null==t?void 0:t.shadows,this.gradient=null==t?void 0:t.gradient,this.border&&!(this.border instanceof on))throw new Error("border is not a instance of BoxBorder");if(this.borderRadius&&!(this.borderRadius instanceof Zi))throw new Error("borderRadius is not a instance of BorderRadius")}createBoxPainter(t){return new un(this,t)}}class un extends dn{constructor(t,e){super(e),this.decoration=t}paintShadow(t,i,s=new e(0,0)){var n,r;if(t.save(),this.decoration.shadows&&this.decoration.shadows.length>0)for(let e=0;e<this.decoration.shadows.length;e++){this.decoration.shadows[e].paint(t),t.fillStyle="white",!this.decoration.borderRadius||(null===(n=this.decoration.borderRadius)||void 0===n?void 0:n.isNone())?t.fillRect(s.x,s.y,i.width-1,i.height-1):(t.roundRect(s.x,s.y,i.width-1,i.height-1,null===(r=this.decoration.borderRadius)||void 0===r?void 0:r.radius),t.fill())}t.restore()}getBackgroundStyle(t){var e,i;if(this.cachedBackgroundPaint)return this.cachedBackgroundPaint;let s;return this.decoration.gradient?s=null===(e=this.decoration.gradient)||void 0===e?void 0:e.createShader(t):this.decoration.backgroundColor&&(s=null===(i=this.decoration.backgroundColor)||void 0===i?void 0:i.rgba),this.cachedBackgroundPaint=s,s}paintBackgroundColor(t,e,i){var n;t.fillStyle=this.getBackgroundStyle(s.merge(i,e)),this.cachedBackgroundPaint&&(t.beginPath(),(null===(n=this.decoration)||void 0===n?void 0:n.borderRadius)&&this.decoration.borderRadius!==Zi.zero?(t.roundRect(i.x,i.y,e.width,e.height,this.decoration.borderRadius.radius),t.fill()):t.fillRect(i.x,i.y,e.width,e.height),t.closePath())}paint(t,e,i){var s;t.save(),this.paintShadow(t,i,e),this.paintBackgroundColor(t,i,e),null===(s=this.decoration.border)||void 0===s||s.paint(t,i,e,this.decoration.borderRadius),t.restore()}debugPaint(t,e,i){this.paint(t,e,i),t.fillStyle="rgba(162, 118, 196,.5)",t.fillRect(e.x,e.y,i.width-1,i.height-1)}}class pn extends ln{constructor(t){var e,i,s,n;super(),this.fit=null!==(e=null==t?void 0:t.fit)&&void 0!==e?e:en.none,this.alignment=null!==(i=null==t?void 0:t.alignment)&&void 0!==i?i:Hi.center,this.imageProvider=null==t?void 0:t.imageProvider,this.width=null!==(s=null==t?void 0:t.width)&&void 0!==s?s:0,this.height=null!==(n=null==t?void 0:t.height)&&void 0!==n?n:0}createBoxPainter(t){return new gn(this,t)}}class gn extends dn{constructor(t,e){super(e),this.sourceRect=s.zero,this.destinationRect=s.zero,this.sourceImageSize=i.zero,this.decoration=t,this.onChanged=e,this.loadImage()}loadImage(){return fs(this,void 0,void 0,(function*(){try{const{size:t,image:e}=yield this.decoration.imageProvider.load();this._image=e,this.sourceImageSize=t,this.onChanged()}catch(t){throw new o}}))}get width(){return this.sourceImageSize.width}get height(){return this.sourceImageSize.height}layout(t){const e=this.sourceImageSize,i=t,n=rn(this.decoration.fit,e,i),r=n.source,o=n.destination,a=this.decoration.alignment,h=a.inscribe(o,i),l=a.inscribe(r,e);return this.destinationRect=s.merge(h,o),this.sourceRect=s.merge(l,r),this.destinationRect.size}paint(t,e,i){const s=this.destinationRect.width>i.width||this.destinationRect.height>i.height;t.save(),s&&(t.rect(e.x,e.y,i.width,i.height),t.clip());const n=e.x+this.destinationRect.x,r=e.y+this.destinationRect.y,o=this.sourceRect.x,a=this.sourceRect.y;this._image&&t.drawImage(this._image,o,a,this.sourceRect.width,this.sourceRect.height,n,r,this.destinationRect.width,this.destinationRect.height),t.restore()}debugPaint(t,e,i){t.strokeStyle="#0d7bc1";const s=this.destinationRect.x+e.x,n=this.destinationRect.y+e.y,r=s+this.destinationRect.width,o=n+this.destinationRect.height;t.strokeRect(s,n,this.destinationRect.width,this.destinationRect.height),t.beginPath(),t.moveTo(s,n),t.lineTo(r,o),t.moveTo(r,n),t.lineTo(s,o),t.stroke()}}class mn{constructor(t){this.lifecycle=t}onLoadStart(){var t,e;null===(e=null===(t=this.lifecycle)||void 0===t?void 0:t.onLoadStart)||void 0===e||e.call(t)}onLoadEnd(t){var e,i;null===(i=null===(e=this.lifecycle)||void 0===e?void 0:e.onLoadEnd)||void 0===i||i.call(e,t)}onError(t){var e,i;null===(i=null===(e=this.lifecycle)||void 0===e?void 0:e.onError)||void 0===i||i.call(e,t)}onProgress(t){var e,i;null===(i=null===(e=this.lifecycle)||void 0===e?void 0:e.onProgress)||void 0===i||i.call(e,t)}}class fn extends mn{constructor(t){super(null==t?void 0:t.lifecycle),this.configuration=t,this._cachedImagePayload=null}get loadStrategy(){return w.instance.strategies.getImageStrategy()}get loadAssetsStrategy(){return w.instance.strategies.getAssetsImageStrategy()}createStream(){return this.loadStrategy.loadBuffer(this.configuration)}load(){return fs(this,void 0,void 0,(function*(){return this.loadingPromise||(this.loadingPromise=new Promise(((t,e)=>fs(this,void 0,void 0,(function*(){try{if(this._cachedImagePayload)return t(this._cachedImagePayload);this.onLoadStart();const e=yield this.performLoad();this.onLoadEnd(e),this._cachedImagePayload=e,t(e)}catch(t){this.onError(t),e(null)}}))))),this.loadingPromise}))}loadBuffer(){return this.createStream()}getImageSize(t){return this.loadStrategy.getImageSize(t,this.configuration)}}class vn extends fn{performLoad(){return fs(this,void 0,void 0,(function*(){const t=this.loadBuffer();let e=0;const i=[];yield t.forEach((t=>{const s=t.value;s&&!t.done?(e+=s.length,this.onProgress(t.progress),i.push(s)):t.error&&this.onError(t.error)}));const s=new Uint8Array(e);let n=0;for(const t of i)s.set(t,n),n+=t.length;return{size:yield this.getImageSize(s),image:yield this.loadStrategy.load(this.configuration,s)}}))}}class xn extends fn{constructor({assetsImageUrl:t,lifecycle:e}){super({lifecycle:e}),this._assetsImageUrl=t}performLoad(){return fs(this,void 0,void 0,(function*(){const t="function"==typeof this._assetsImageUrl?this._assetsImageUrl():this._assetsImageUrl,e=t instanceof Promise?yield t:t,i=yield this.loadAssetsStrategy.load({url:e});return{size:yield this.loadAssetsStrategy.getImageSize(i,{url:e}),image:i}}))}}let wn=class t extends Kt{constructor(t){var e,i;super(null,null==t?void 0:t.key),this.fit=null!==(e=null==t?void 0:t.fit)&&void 0!==e?e:en.contain,this.alignment=null!==(i=null==t?void 0:t.alignment)&&void 0!==i?i:Hi.center,this.width=null==t?void 0:t.width,this.height=null==t?void 0:t.height,this.imageProvider=null==t?void 0:t.imageProvider,this.placeholderBuilder=null==t?void 0:t.placeholderBuilder}createRenderObject(){return new bn(this.imageDecorationArgs)}get imageDecorationArgs(){return{imageProvider:this.imageProvider,fit:this.fit,alignment:this.alignment,width:this.width,height:this.height}}updateRenderObject(t,e){e.width=this.width,e.height=this.height}createElement(){return new yn(this)}static netWork(e,i){return new t(Object.assign(Object.assign({},i),{imageProvider:new vn({url:e})}))}static assets(e,i){return new t(Object.assign(Object.assign({},i),{imageProvider:new xn({assetsImageUrl:e})}))}};class yn extends Yt{constructor(t){super(t),this._imageLoaded=!1,this.imageSource=t.imageDecorationArgs,this._placeholderBuilder=t.placeholderBuilder}mount(t,e){super.mount(t,e),this._renderPlaceholder(),this._loadImage()}_renderPlaceholder(){if(this._placeholderBuilder){const t=this._placeholderBuilder(this);this.updateChild(null,t)}}onLoadImageChanged(t){this.mounted&&(this._imageLoaded=!0,this._decorationPainter=t,this.renderView.decorationPainter=t,this.updateChild(this.child,null),this.renderView.markNeedsLayout())}_loadImage(){return fs(this,void 0,void 0,(function*(){const t=new pn(this.imageSource),e=new gn(t,(()=>this.onLoadImageChanged(e)))}))}}class bn extends ke{constructor(t){super(),this.width=null==t?void 0:t.width,this.height=null==t?void 0:t.height}set width(t){t!==this._width&&(this._width=t,this.markNeedsLayout())}set height(t){t!==this._height&&(this._height=t,this.markNeedsLayout())}set decorationPainter(t){this._decorationPainter=t,this.markNeedsLayout()}get decorationPainter(){return this._decorationPainter}performLayout(){var t,e,s,n;if(super.performLayout(),this.decorationPainter){const r=new i(null!==(e=null!==(t=this._width)&&void 0!==t?t:this.decorationPainter.width)&&void 0!==e?e:0,null!==(n=null!==(s=this._height)&&void 0!==s?s:this.decorationPainter.height)&&void 0!==n?n:0);this.size=this.constraints.tighten(this._width,this._height).constrainSizeAndAttemptToPreserveAspectRatio(r),this.decorationPainter.layout(this.size)}else this.child?(this.child.layout(this.constraints,!0),this.size=this.child.size):this.size=this.constraints.constrain(i.zero)}render(t,e){var i;null===(i=this.decorationPainter)||void 0===i||i.paint(t.paint,e,this.size),this.decorationPainter||super.render(t,e)}debugRender(t,e){var i;null===(i=this.decorationPainter)||void 0===i||i.debugPaint(t.paint,e,this.size),super.debugRender(t,e)}}class Pn{constructor(t,e){this.start=t,this.end=e}static get zero(){return new Pn(-1,-1)}static get empty(){return new Pn(-1,-1)}get single(){return this.start===this.end}}class Sn extends Pn{constructor(t,e){super(t,e),this.baseOffset=t,this.extentOffset=e}static fromPosition(t){return new Sn(t.x,t.y)}static get empty(){return new Sn(-1,-1)}}class _n{constructor(t){this._focused=!1,this.client=t}get focused(){return this._focused}get attached(){return Tn.instance.currentConnection===this}show(){Tn.instance.show(),this._focused=!0}close(){Tn.instance.close(),this._focused=!1}setSelection(t){Tn.instance.selectionHandler(t)}}class Cn{constructor(){this.binding=Tn.instance}updateEditingValue(t,e,i){this.binding.updateEditingValue(t,e,i)}selectionHandler(t){this.binding.selectionHandler=t}focusHandler(t){this.binding.focus=t}blurHandler(t){this.binding.blur=t}}class Dn extends Ht{focus(){console.warn("Focus not implemented")}blur(){console.warn("Blur not implemented")}selectionHandler(t){console.warn("Input not implemented")}updateEditingValue(t,e,i){}}class Tn extends Dn{get currentConfig(){return this._currentConfig}get currentConnection(){return this._currentConnection}static get instance(){return!this._instance&&(this._instance=new Tn),this._instance}static attach(t,e){const i=new _n(t);return Tn.instance._attach(i,e),i}_attach(t,e){this._currentConfig=e,this._currentConnection=t}static removeClient(){this._instance._currentConfig=null,this._instance._currentConnection=null}show(){this.focus()}close(){this.blur()}updateEditingValue(t,e,i){var s;if(null===(s=this.currentConnection)||void 0===s?void 0:s.attached){const s=new En(t,new Sn(e,i));this._currentConnection.client.updateEditingValue(s)}}}class En{constructor(t,e){this.value=t,this.selection=e}}class Rn extends ke{get textPainter(){return this._textPainter}set textPainter(t){this._textPainter=t,super.markNeedsLayout()}constructor(t,e,i){super(),this.selection=Sn.empty,this._editingConnection=t,this.indicatorPainter=e,this.textPainter=i}dropChild(t){super.dropChild(t),this.onTap=new Ls,this.onTap.onTapDown=this.handleTapDown.bind(this),this.onDrag=new Bs}handleDragStart(t){}handleDragUpdate(e){const i=e.position,s=this.textPainter.getTextPointForOffset(i);if(!s)return;let n=s.parentData.index;this.selection=Sn.fromPosition(new t(this.selection.baseOffset,n))}handleDragEnd(t){}get isRepaintBoundary(){return!1}handleTapDown(t){if(!this.parentData)return;const e=t.position,i=this.getTransformTo().inverted(),s=Se.transformPoint(i,e),n=this.textPainter.getTextPointForOffset(s);if(!n)return;let r=n.parentData.index;this._editingConnection.show();const o=n.parentData.box;!this.isRightIndicator(o,s)&&(r=Math.max(0,r-1));const a=new Sn(r,r);this._editingConnection.setSelection(a);const[h]=this.textPainter.getTextBoxesForRange(a);h&&this.handleUpdateIndicatorPositionByRect(h,s)}isRightIndicator(t,e){const i=.5*t.width;return e.x-t.x>i}handleUpdateIndicatorPositionByRect(t,e){const i=.5*t.width,s=t.offset;e.x-t.x>i&&(s.x=t.right),this.indicatorPainter.offset=s,this.indicatorPainter.height=t.height}handleEvent(t,e){super.handleEvent(t,e),t instanceof ue&&(this.onTap.addPointer(t),this.onDrag.addPointer(t))}performLayout(){!this.hightLightPainter&&(this.hightLightPainter=new An(this.textPainter),this.hightLightPainter.addListener((()=>{this.markNeedsPaint()})),this.indicatorPainter.addListener((()=>{this.markNeedsPaint()}))),this.textPainter.layout(this.constraints.minWidth,this.constraints.maxWidth);const t=this.textPainter.size;this.size=this.constraints.constrain(t)}render(t,e){var i,s;t.paint&&(this.needClip?t.clipRectAndPaint(T.antiAlias,{x:null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,y:null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,width:this.size.width,height:this.size.height},(()=>{this.hightLightPainter.render(null==t?void 0:t.paint,this.size),this.textPainter.paint(null==t?void 0:t.paint,e),this.indicatorPainter.render(null==t?void 0:t.paint,this.size)})):(this.hightLightPainter.render(null==t?void 0:t.paint,this.size),this.textPainter.paint(null==t?void 0:t.paint,e),this.indicatorPainter.parentOffset=e,this.indicatorPainter.render(null==t?void 0:t.paint,this.size)),super.render(t,e))}debugRender(t,e){var i,s;t.paint&&(this.needClip?t.clipRectAndPaint(T.antiAlias,{x:null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,y:null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,width:this.size.width,height:this.size.height},(()=>{this.hightLightPainter.render(null==t?void 0:t.paint,this.size),this.textPainter.paint(null==t?void 0:t.paint,e,!0),this.indicatorPainter.render(null==t?void 0:t.paint,this.size)})):(this.hightLightPainter.render(null==t?void 0:t.paint,this.size),this.textPainter.paint(null==t?void 0:t.paint,e,!0),this.indicatorPainter.parentOffset=e,this.indicatorPainter.render(null==t?void 0:t.paint,this.size)))}}class An extends Ds{constructor(t){super(),this._textRange=Pn.zero,this._hightLightColor=_.blue.withOpacity(.5),this.textPainter=t}set textRange(t){this._textRange=t,this.notifyListeners()}get textRange(){return this._textRange}render(t,e){const i=this.textPainter.getTextBoxesForRange(new Sn(this.textRange.start,this.textRange.end));t.save(),t.fillStyle=this._hightLightColor.rgba,i.forEach((e=>{const i=e;t.fillRect(i.x,i.y,i.width,i.height)})),t.restore()}}class Ln extends Kt{constructor(t){super(null,null==t?void 0:t.key),this.editingConnection=null==t?void 0:t.editingConnection,this.indicatorPainter=null==t?void 0:t.indicatorPainter,this.textPainter=null==t?void 0:t.textPainter}createRenderObject(t){return new Rn(this.editingConnection,this.indicatorPainter,this.textPainter)}updateRenderObject(t,e){e.textPainter=this.textPainter}}class zn extends Zt{createState(){return new kn}}class kn extends Gt{constructor(){super(...arguments),this.indicatorPainter=new Bn,this.text=""}initState(){super.initState(),this.editingConnection=Tn.attach(this,null),this.textPainter=new Ct(this.textSpan)}updateEditingValue(t){var e,i;if(!this.mounted)return;this.setState((()=>{this.text=t.value,this.textPainter=new Ct(this.textSpan)}));let s=t.selection;if(s.single){const[t]=null!==(i=null===(e=this.textPainter)||void 0===e?void 0:e.getTextBoxesForRange(s))&&void 0!==i?i:[];this.handleUpdateIndicatorPosition(t,s)}}handleUpdateIndicatorPosition(t,e){this.setState((()=>{null!=t||(t=s.zero);const i=e.baseOffset,n=t.offset;-1!==i&&(n.x+=t.width),this.indicatorPainter.offset=n,this.indicatorPainter.height=t.height}))}get textSpan(){return new _t({text:this.text,textStyle:new gt({fontSize:15,textAlign:st.justify})})}build(t){return new Ln({editingConnection:this.editingConnection,textPainter:this.textPainter,indicatorPainter:this.indicatorPainter})}}class Bn extends Ds{set parentOffset(t){this._parentOffset=t}set color(t){this._color=t,this.notifyListeners()}set thickness(t){this._thickness=t,this.notifyListeners()}set offset(t){this._offset=t,this.notifyListeners()}set height(t){this._height=t,this.notifyListeners()}constructor(){super(),this._color=_.black,this._thickness=2,this._offset=t.zero,this._height=13,this._parentOffset=t.zero,this.animationController=new vi({duration:new li({milliseconds:500})})}show(){}hide(){}render(t,e){t.fillStyle=this._color.rgba;const i=this._parentOffset.add(this._offset);t.fillRect(i.x,i.y,this._thickness,this._height)}}class On{constructor(t){this._type=t}get type(){return this._type}contains(t){return!0}}class Wn extends On{constructor(t,e,i,s){super("rect"),this.x=t,this.y=e,this.width=i,this.height=s}render(t,e){t.rect(this.x,this.y,this.width,this.height)}}class Hn extends On{constructor(t,e,i,s,n,r){super("arc"),this.x=t,this.y=e,this.radius=i,this.startAngle=s,this.endAngle=n,this.anticlockwise=r}render(t,e){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}}class Mn extends On{constructor(t,e){super("lineTo"),this.x=t,this.y=e}render(t,e){t.lineTo(this.x,this.y)}}class Nn extends On{constructor(t,e,i,s,n){super("arcTo"),this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.radius=n}render(t,e){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}}class In extends On{constructor(t,e){super("moveTo"),this.x=t,this.y=e}render(t,e){t.lineTo(this.x,this.y)}}class jn{constructor(){this._paths=new Map}get _currentPathCount(){return this._paths.size}rect(t,e,i,s){this._paths.set(this._currentPathCount,new Wn(t,e,i,s))}arc(t,e,i,s,n,r){this._paths.set(this._currentPathCount,new Hn(t,e,i,s,n,r))}lineTo(t,e){this._paths.set(this._currentPathCount,new Mn(t,e))}moveTo(t,e){this._paths.set(this._currentPathCount,new In(t,e))}arcTo(t,e,i,s,n){this._paths.set(this._currentPathCount,new Nn(t,e,i,s,n))}get paths(){return Array.from(this._paths.values())}hitTest(t,e){return!0}render(t,e){t.beginPath(),this.paths.forEach((i=>{i.render(t,e)})),t.closePath()}}class Vn extends Kt{constructor(t){super(null==t?void 0:t.child,null==t?void 0:t.key),this.clipper=null==t?void 0:t.clipper,this.clipBehavior=null==t?void 0:t.clipBehavior}createRenderObject(){return new Un({clipper:this.clipper,clipBehavior:this.clipBehavior})}updateRenderObject(t,e){e.clipper=this.clipper,e.clipBehavior=this.clipBehavior}}class Fn extends ke{constructor(t){super(),this._clipBehavior=T.antiAlias,this.clipper=null==t?void 0:t.clipper,this._clipBehavior=null==t?void 0:t.clipBehavior,this.markNeedsRePaintBind=this.markNeedsPaint.bind(this)}set clipper(t){var e,i;null===(e=this._clipper)||void 0===e||e.removeListener(this.markNeedsRePaintBind),this._clipper=t,null===(i=this._clipper)||void 0===i||i.addListener(this.markNeedsRePaintBind),this.markNeedsPaint()}get clipBehavior(){return this._clipBehavior}get defaultPath(){return null}updateClip(t){var e;!this._clipper&&(this.clip=this.defaultPath),this.clip=null===(e=this._clipper)||void 0===e?void 0:e.getClip(t,this.size)}set clipBehavior(t){this._clipBehavior=t,this.markNeedsPaint()}}class Un extends Fn{get defaultPath(){const t=new jn;return t.rect(0,0,this.size.width,this.size.height),t}render(t,e){var i,s,n;this.child&&(this.updateClip(e),t.paint,t.clipPath(this.clipBehavior,{x:null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,y:null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,width:this.size.width,height:this.size.height},null!==(n=this.clip)&&void 0!==n?n:this.defaultPath,(()=>{super.render(t,e)})))}}class Zn extends Kt{constructor(t){var e;super(null==t?void 0:t.child,t.key),this._transform=null!==(e=t.transform)&&void 0!==e?e:Rt.zero,this.origin=t.origin,this.alignment=t.alignment}createRenderObject(){return new Gn({transform:this._transform,origin:this.origin,alignment:this.alignment})}updateRenderObject(t,e){e.transform=this._transform,e.origin=this.origin,e.alignment=this.alignment}static rotate(t){const{angleX:e,angleY:i,angle:s}=t,n=Rt.zero.identity();return s&&n.rotateZ(s),i&&n.rotateY(i),e&&n.rotateX(e),new Zn({child:null==t?void 0:t.child,transform:n,alignment:null==t?void 0:t.alignment,origin:null==t?void 0:t.origin})}static translate(t){const{x:e,y:i}=t,s=Rt.zero.identity();return s.translate(e,i),new Zn({transform:s,child:null==t?void 0:t.child})}static skew(t){const{skewX:e=0,skewY:i=0}=t,s=Rt.skew(e,i);return new Zn({child:null==t?void 0:t.child,transform:s})}static scale(t){const{scaleX:e=1,scaleY:i=1,scale:s,origin:n,alignment:r}=t,o=Rt.zero;return o.scale(e,i),s&&o.scale(s,s),o.setValue(15,1),new Zn({child:null==t?void 0:t.child,transform:o,alignment:r,origin:n})}}class Gn extends ke{set alignment(t){this._alignment=t,this.markNeedsPaint()}get alignment(){return this._alignment}set origin(t){this._origin=t,this.markNeedsPaint()}get origin(){return this._origin}set transform(t){this._transform=t,this.markNeedsPaint()}get transform(){return this._transform}constructor(t){super(null==t?void 0:t.child),this._transform=Rt.zero,this.transform=null==t?void 0:t.transform}render(t,i){if(this.child){const s=Se.getAsTranslation(this.effectiveTransform);null==s||e.zero.equals(s)?t.pushTransform(i,this.effectiveTransform,(()=>{t.paintChild(this.child,i)})):super.render(t,s.add(i))}}hitTest(t,e){return this.hitTestChildren(t,e)}hitTestChildren(t,e){var i;const s=null===(i=this.child)||void 0===i?void 0:i.parentData,n=this.effectiveTransform.inverted();if(s){const i=Se.transformPoint(n,e);return this.child.hitTest(t,i)}return!1}get originTransform(){const t=Rt.zero.identity(),i=this.alignment,s=this.origin;let n=e.zero;return s||i?(s&&t.translate(s.x,s.y),i&&(n=i.alongSize(this.size).toVector(),t.translate(n.x,n.y)),t):t}get effectiveTransform(){const t=Rt.zero.identity(),i=Rt.zero.setMatrix([...this.transform.matrix]),s=this.alignment,n=this.origin;let r=e.zero;return n||s?(n&&t.translate(n.x,n.y),s&&(r=s.alongSize(this.size).toVector(),t.translate(r.x,r.y)),t.multiply(i),s&&t.translate(-r.x,-r.y),n&&t.translate(-n.x,-n.y),t):i}applyPaintTransform(t,e){e.multiply(this.effectiveTransform)}}class Xn extends Qt{constructor(t){var e,i,s;super(null==t?void 0:t.children,t.key),this._fit=k.loose,this._alignment=Hi.topLeft,this._clipBehavior=T.none,this._fit=null!==(e=null==t?void 0:t.fit)&&void 0!==e?e:k.loose,this._alignment=null!==(i=null==t?void 0:t.alignment)&&void 0!==i?i:Hi.topLeft,this._clipBehavior=null!==(s=null==t?void 0:t.clipBehavior)&&void 0!==s?s:T.none}createRenderObject(){return new Yn({fit:this._fit,alignment:this._alignment,clipBehavior:this._clipBehavior})}updateRenderObject(t,e){e.fit=this._fit,e.alignment=this._alignment,e.clipBehavior=this._clipBehavior}}class Yn extends He{constructor(t){const{children:e,alignment:i,fit:s,clipBehavior:n}=t;super(e),this._fit=k.loose,this._alignment=Hi.topLeft,this._clipBehavior=T.none,this.alignment=null!=i?i:this.alignment,this.fit=null!=s?s:this.fit,this.clipBehavior=null!=n?n:this._clipBehavior}get alignment(){return this._alignment}set alignment(t){t!==this._alignment&&(this._alignment=t,this.markNeedsLayout())}set clipBehavior(t){t!==this._clipBehavior&&(this._clipBehavior=t,this.markNeedsLayout())}get fit(){return this._fit}get clipBehavior(){return this._clipBehavior}set fit(t){t!==this._fit&&(this._fit=t,this.markNeedsLayout())}computeSize(t){let e=c.zero,s=!1;switch(this.fit){case k.loose:e=new c({maxWidth:t.maxWidth,maxHeight:t.maxHeight});break;case k.expand:e=new c({minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.minWidth,maxHeight:t.minHeight});case k.passthrough:e=t}let n=t.minWidth,r=t.minHeight,o=this.firstChild;for(;null!=o;){const t=o.parentData;if(!t.isPositioned){s=!0,o.layout(e,!0);const t=o.size;n=Math.max(n,t.width),r=Math.max(r,t.height)}o=t.nextSibling}return s?new i(n,r):t.constrain(i.zero)}performLayout(){this.size=this.computeSize(this.constraints);let t=this.firstChild;for(;null!=t;){const e=t.parentData;e.isPositioned?this.layoutPositionedChild(t,e,this.size,this.alignment):e.offset=this.alignment.inscribe(t.size,this.size),t=e.nextSibling}}layoutPositionedChild(t,i,s,n){let r=c.zero;null!=i.left&&null!=i.right?r=r.tighten(s.width-i.right-i.left):null!=i.width&&(r=r.tighten(i.width)),null!=i.top&&null!=i.bottom?r=r.tighten(null,s.height-i.top-i.bottom):null!=i.height&&(r=r.tighten(null,i.height)),t.layout(r,!0);let o=0;o=null!=i.left?i.left:null!=i.right?s.width-i.right-t.size.width:n.inscribe(t.size,s).x;let a=0;a=null!=i.top?i.top:null!=i.bottom?s.height-i.bottom-t.size.height:n.inscribe(t.size,s).y,i.offset=new e(o,a)}setupParentData(t){t.parentData=new qn}render(t,e){this.clipBehavior!==T.none?t.clipRectAndPaint(this.clipBehavior,s.merge(e,this.size),(()=>super.render(t,e))):super.render(t,e)}debugRender(t,e){this.clipBehavior!==T.none?t.clipRectAndPaint(this.clipBehavior,s.merge(e,this.size),(()=>super.debugRender(t,e))):super.debugRender(t,e)}}class qn extends Ae{get isPositioned(){return null!=this.top||null!=this.right||null!=this.bottom||null!=this.left||null!=this.width||null!=this.height}}class Kn extends ee{constructor(t){const{child:e,top:i,bottom:s,left:n,right:r,width:o,height:a}=t;super(e,t.key),this.top=i,this.bottom=s,this.left=n,this.right=r,this.width=o,this.height=a}applyParentData(t){const e=t.parentData;e.bottom=this.bottom,e.top=this.top,e.left=this.left,e.right=this.right,e.width=this.width,e.height=this.height,(null==t?void 0:t.parent)instanceof Ee&&t.parent.markNeedsLayout()}}class Jn extends Qt{constructor(t){var e,i,s,n,r,o;super(null==t?void 0:t.children,t.key),this.direction=C.horizontal,this.spacing=0,this.runSpacing=0,this.alignment=H.start,this.runAlignment=H.start,this.crossAxisAlignment=N.start,this.direction=null!==(e=null==t?void 0:t.direction)&&void 0!==e?e:C.horizontal,this.spacing=null!==(i=null==t?void 0:t.spacing)&&void 0!==i?i:0,this.runSpacing=null!==(s=null==t?void 0:t.runSpacing)&&void 0!==s?s:0,this.alignment=null!==(n=null==t?void 0:t.alignment)&&void 0!==n?n:H.start,this.runAlignment=null!==(r=null==t?void 0:t.runAlignment)&&void 0!==r?r:H.start,this.crossAxisAlignment=null!==(o=null==t?void 0:t.crossAxisAlignment)&&void 0!==o?o:N.start}createRenderObject(){return new tr({direction:this.direction,spacing:this.spacing,runSpacing:this.runSpacing,alignment:this.alignment,runAlignment:this.runAlignment,crossAxisAlignment:this.crossAxisAlignment})}updateRenderObject(t,e){e.direction=this.direction,e.spacing=this.spacing,e.runSpacing=this.runSpacing,e.alignment=this.alignment,e.runAlignment=this.runAlignment,e.crossAxisAlignment=this.crossAxisAlignment}}class Qn{constructor(t,e,i){this.mainAxisExtent=0,this.crossAxisExtent=0,this.childCount=0,this.mainAxisExtent=t,this.crossAxisExtent=e,this.childCount=i}}class $n extends Ae{constructor(){super(...arguments),this.runIndex=0}}class tr extends He{constructor(t){var e,i,s,n,r,o;super(),this._direction=C.horizontal,this._spacing=0,this._runSpacing=0,this._alignment=H.start,this._runAlignment=H.start,this._crossAxisAlignment=N.start,this.direction=null!==(e=null==t?void 0:t.direction)&&void 0!==e?e:C.horizontal,this.spacing=null!==(i=null==t?void 0:t.spacing)&&void 0!==i?i:0,this.runSpacing=null!==(s=null==t?void 0:t.runSpacing)&&void 0!==s?s:0,this.alignment=null!==(n=null==t?void 0:t.alignment)&&void 0!==n?n:H.start,this.runAlignment=null!==(r=null==t?void 0:t.runAlignment)&&void 0!==r?r:H.start,this.crossAxisAlignment=null!==(o=null==t?void 0:t.crossAxisAlignment)&&void 0!==o?o:N.start}get direction(){return this._direction}set direction(t){this._direction!==t&&(this._direction=t,this.markNeedsLayout())}get spacing(){return this._spacing}set spacing(t){this._spacing!==t&&(this._spacing=t,this.markNeedsLayout())}get runSpacing(){return this._runSpacing}set runSpacing(t){this._runSpacing!==t&&(this._runSpacing=t,this.markNeedsLayout())}get alignment(){return this._alignment}set alignment(t){this._alignment!==t&&(this._alignment=t,this.markNeedsLayout())}get runAlignment(){return this._runAlignment}set runAlignment(t){this._runAlignment!==t&&(this._runAlignment=t,this.markNeedsLayout())}get crossAxisAlignment(){return this._crossAxisAlignment}set crossAxisAlignment(t){this._crossAxisAlignment!==t&&(this._crossAxisAlignment=t,this.markNeedsLayout())}getMainAxisExtent(t){return this.direction===C.horizontal?t.width:this.direction===C.vertical?t.height:void 0}getOffset(t,i){switch(this.direction){case C.horizontal:return new e(t,i);case C.vertical:return new e(i,t)}}getCrossAxisExtent(t){return this.direction===C.horizontal?t.height:this.direction===C.vertical?t.width:void 0}getChildCrossAxisOffset(t,e){const i=t-e;switch(this.crossAxisAlignment){case N.start:return 0;case N.end:return i;case N.center:return i/2}}performLayout(){const t=this.constraints;let e=c.zero,s=0;switch(this.direction){case C.horizontal:e=new c({maxWidth:t.maxWidth}),s=t.maxWidth;break;case C.vertical:e=new c({maxHeight:t.maxHeight}),s=t.maxHeight}let n=this.firstChild,r=0,o=0,a=0,h=0,l=0;const d=[];for(;n;){n.layout(e,!0);const t=n.size,i=this.getMainAxisExtent(t),c=this.getCrossAxisExtent(t);l>0&&a+i+this.spacing>s&&(r+=a,o+=h+this.runSpacing,d.push(new Qn(a,h,l)),a=0,h=0,l=0),a+=i,h=Math.max(h,c),l>0&&(a+=this.spacing),l+=1;const u=n.parentData;u.runIndex=d.length,n=u.nextSibling}l>0&&(r+=a,o+=h,d.push(new Qn(a,h,l)));let u=0,p=0;this.direction===C.horizontal?(this.size=t.constrain(new i(r,o)),u=this.size.width,p=this.size.height):this.direction===C.vertical&&(this.size=t.constrain(new i(o,r)),u=this.size.height,p=this.size.width);const g=d.length,m=Math.max(0,p-o);let f=0,v=0;switch(this.runAlignment){case H.start:break;case H.end:f=m;break;case H.center:f=.5*m;break;case H.spaceBetween:v=m/(g-1);break;case H.spaceAround:v=m/g,f=.5*v;break;case H.spaceEvenly:v=m/(g+1),f=v}v+=this.runSpacing;let x=f;n=this.firstChild;for(let t=0;t<g;t++){const e=d[t],i=e.mainAxisExtent,s=e.crossAxisExtent,r=e.childCount,o=Math.max(0,u-i);let a=0,h=0;switch(this.alignment){case H.start:break;case H.end:a=o;break;case H.center:a=.5*o;break;case H.spaceBetween:h=o/(r-1);break;case H.spaceAround:h=o/r,a=.5*h;break;case H.spaceEvenly:h=o/(r+1),a=h}h+=this.spacing;let l=a;for(;n;){const e=n.parentData;if(e.runIndex!==t)break;const i=n.size,r=this.getMainAxisExtent(i),o=this.getCrossAxisExtent(i),a=this.getChildCrossAxisOffset(s,o),d=this.getOffset(l,x+a);l+=r,l+=h,e.offset=d,n=e.nextSibling}x+=s+v}}applyPerformChild(){return i.zero}setupParentData(t){t.parentData=new $n}}class er extends Kt{constructor(t,e){var i;super(null==e?void 0:e.child,null==e?void 0:e.key),this.style=new gt({fontSize:14}),this.text=t,this.style=null!==(i=null==e?void 0:e.style)&&void 0!==i?i:this.style}createRenderObject(){return new sr({text:new _t({text:this.text,textStyle:this.style})})}updateRenderObject(t,e){e.text=new _t({text:this.text,textStyle:this.style})}}class ir extends Kt{constructor(t){super(null,t.key),this.textSpan=null==t?void 0:t.textSpan}createRenderObject(){return new sr({text:this.textSpan})}updateRenderObject(t,e){e.text=this.textSpan}}class sr extends ke{constructor(t){super();const{text:e}=t;this.text=e}set text(t){var e;this._text!==t&&(null===(e=this._text)||void 0===e?void 0:e.text)!==(null==t?void 0:t.text)&&(this._text=t,this.markNeedsLayout(),this.markNeedsPaint())}get text(){return this._text}performLayout(){this.textPainter=new Ct(this.text),this.textPainter.layout(this.constraints.minWidth,this.constraints.maxWidth);const t=this.textPainter.size;switch(this.size=this.constraints.constrain(t),this.text.style.getTextStyle().overflow){case et.clip:this.needClip=t.height>this.size.height||t.width>this.size.width;case et.ellipsis:case et.visible:}}render(t,e){var i,s;t.paint&&(this.needClip?t.clipRectAndPaint(T.antiAlias,{x:null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,y:null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,width:this.size.width,height:this.size.height},(()=>{this.textPainter.paint(null==t?void 0:t.paint,e)})):this.textPainter.paint(null==t?void 0:t.paint,e))}debugRender(t,e){var i,s;this.needClip?t.clipRectAndPaint(T.antiAlias,{x:null!==(i=null==e?void 0:e.x)&&void 0!==i?i:0,y:null!==(s=null==e?void 0:e.y)&&void 0!==s?s:0,width:this.size.width,height:this.size.height},(()=>{this.textPainter.paint(t.paint,e,!0),t.paintDefaultDebugBoundary(e,this.size)})):this.textPainter.paint(t.paint,e,!0),super.debugRender(t,e)}}class nr extends Kt{constructor(t){super(null==t?void 0:t.child),this.opacity=t.opacity}createRenderObject(t){return new rr({opacity:this.opacity})}updateRenderObject(t,e){e.opacity=this.opacity}}class rr extends ke{constructor(t){super(),this._opacity=t.opacity}set opacity(t){this.opacity!=t&&(this._opacity=t,this.markNeedsPaint())}get opacity(){return this._opacity}render(t,e){t.paint.save(),t.paint.globalAlpha=this.opacity,super.render(t,e),t.paint.restore()}}class or{get gradientStrategy(){return w.instance.strategies.getGradientStrategy()}constructor(t,e=[],i){if(this.colors=t,this.stops=e,this.transform=i,!t||0===(null==t?void 0:t.length))throw new Error("colors can not be empty")}initGradient(t){var e;const i=this.colors,s=this.stops,n=1/Math.max(i.length-1,1),r=Math.max(i.length,s.length);for(let o=0;o<r;o++){const r=null==i?void 0:i[o],a=null!==(e=null==s?void 0:s[o])&&void 0!==e?e:o*n;r&&t.addColorStop(a,r.rgba)}}}class ar extends or{constructor(t){var e,i;super(null==t?void 0:t.colors,null==t?void 0:t.stops,null==t?void 0:t.transform),this.begin=null!==(e=null==t?void 0:t.begin)&&void 0!==e?e:Hi.centerLeft,this.end=null!==(i=null==t?void 0:t.end)&&void 0!==i?i:Hi.centerRight}createShader(t){const e=this.gradientStrategy.createLinearGradient(this.begin.withRect(t),this.end.withRect(t));return this.initGradient(e),e}}class hr extends or{constructor(t){var e,i;super(null==t?void 0:t.colors,null==t?void 0:t.stops,null==t?void 0:t.transform),this.center=null!==(e=null==t?void 0:t.center)&&void 0!==e?e:Hi.center,this.radius=null!==(i=null==t?void 0:t.radius)&&void 0!==i?i:.5}createShader(t){const e=this.gradientStrategy.createRadialGradient(this.center.withRect(t),this.radius*t.shortestSide);return this.initGradient(e),e}}class lr extends or{constructor(t){var e,i;super(null==t?void 0:t.colors,null==t?void 0:t.stops,null==t?void 0:t.transform),this.center=null!==(e=null==t?void 0:t.center)&&void 0!==e?e:Hi.center,this.startAngle=null!==(i=null==t?void 0:t.startAngle)&&void 0!==i?i:0}createShader(t){const e=this.gradientStrategy.createConicGradient(this.center.withRect(t),this.startAngle);return this.initGradient(e),e}}class dr{constructor(t){this.shadow=t}paint(t){t.setShadow(this.shadow)}}class cr extends re{adapter(e,i){if(i instanceof MouseEvent||i instanceof WheelEvent){let e=0;return i instanceof WheelEvent&&(e=i.deltaY||0),new se({pointer:new ie({pointer:new t(i.clientX,i.clientY),identifier:1}),pointers:[],deltaY:e})}const s="touchend"===e?i.changedTouches:i.touches;return new se({pointer:new ie({pointer:t.zero,identifier:1}),pointers:Array.from(s).map(((e,i)=>new ie({pointer:new t(e.clientX,e.clientY),identifier:i})))})}performBindingHandler(){/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)?(window.addEventListener("touchstart",(t=>{this.applyEvent("touchstart",t)})),window.addEventListener("touchmove",(t=>{this.applyEvent("touchmove",t)})),window.addEventListener("touchend",(t=>{this.applyEvent("touchend",t)})),window.addEventListener("touchcancel",(t=>{this.applyEvent("touchcancel",t)}))):(window.addEventListener("mousedown",(t=>{this.applyEvent("mousedown",t)})),window.addEventListener("mousemove",(t=>{this.applyEvent("mousemove",t)})),window.addEventListener("mouseup",(t=>{this.applyEvent("mouseup",t)})),window.addEventListener("mousedown",(t=>{this.applyEvent("mousedown",t)})),window.addEventListener("wheel",(t=>{this.applyEvent("wheel",t)})))}}class ur{constructor(t){this.generator=t}static fromArray(t){return new pr(function*(){for(let e of t)yield e}())}static withAsync(t){return new gr(t)}[Symbol.iterator](){return this.generator}}class pr extends ur{map(t){return new pr(function*(){for(let e of this.generator)yield t(e)}())}forEach(t){for(let e of this.generator)t(e)}filters(t){return new pr(function*(){for(let e of this.generator)t(e)&&(yield e)}())}}class gr extends ur{constructor(t){super(t)}static fromArray(t){return new gr(function(){return ws(this,arguments,(function*(){for(let e of t)yield yield xs(e)}))}())}map(t){return new gr(function(){return ws(this,arguments,(function*(){var e,i,s,n;try{for(var r,o=!0,a=ys(this.generator);!(e=(r=yield xs(a.next())).done);){n=r.value,o=!1;try{let e=n;yield yield xs(t(e))}finally{o=!0}}}catch(t){i={error:t}}finally{try{o||e||!(s=a.return)||(yield xs(s.call(a)))}finally{if(i)throw i.error}}}))}())}forEach(t){var e,i,s,n;return fs(this,void 0,void 0,(function*(){try{for(var r,o=!0,a=ys(this.generator);r=yield a.next(),!(e=r.done);){n=r.value,o=!1;try{t(n)}finally{o=!0}}}catch(t){i={error:t}}finally{try{o||e||!(s=a.return)||(yield s.call(a))}finally{if(i)throw i.error}}}))}filters(t){return new gr(function(){return ws(this,arguments,(function*(){var e,i,s,n;try{for(var r,o=!0,a=ys(this.generator);!(e=(r=yield xs(a.next())).done);){n=r.value,o=!1;try{let e=n;(yield xs(t(e)))&&(yield yield xs(e))}finally{o=!0}}}catch(t){i={error:t}}finally{try{o||e||!(s=a.return)||(yield xs(s.call(a)))}finally{if(i)throw i.error}}}))}())}[Symbol.asyncIterator](){return this.generator}}class mr{}class fr extends mr{}class vr extends mr{get painterInstance(){return w.instance.painter}}class xr extends vr{createLinearGradient(t,e){return this.painterInstance.createLinearGradient(t.x,t.y,e.x,e.y)}createRadialGradient(t,e){return this.painterInstance.createRadialGradient(t.x,t.y,0,t.x,t.y,e)}createConicGradient(t,e){return this.painterInstance.createConicGradient(e,t.x,t.y)}}class wr extends mr{}class yr extends mr{}class br extends mr{}class Pr extends fr{load(t,e){return fs(this,void 0,void 0,(function*(){return yield yield createImageBitmap(new Blob([e]))}))}loadBuffer(t){return new gr(function(){var e;return ws(this,arguments,(function*(){const i=new AbortController,s=i.signal;try{const i=yield xs(fetch(t.url,{headers:t.headers,signal:s})),n=parseInt(null!==(e=i.headers.get("content-length"))&&void 0!==e?e:"-1"),r=i.body.getReader();yield xs(yield*function(t){var e,i;return e={},s("next"),s("throw",(function(t){throw t})),s("return"),e[Symbol.iterator]=function(){return this},e;function s(s,n){e[s]=t[s]?function(e){return(i=!i)?{value:xs(t[s](e)),done:!1}:n?n(e):e}:n}}(ys(function(t,e){return ws(this,arguments,(function*(){let i=0;for(;;){const{done:s,value:n}=yield xs(t.read());if(s)break;const r=(i+=n.length)/e,o={value:n,total:e,error:null,progress:r,done:s};yield yield xs(o)}}))}(r,n))))}catch(t){i.abort(),yield yield xs({value:null,total:0,error:t,progress:0,done:!0})}}))}())}getImageSize(t){const e=new Image;return new Promise((s=>{e.onload=()=>s(new i(e.width,e.height));const n=new Blob([t]),r=URL.createObjectURL(n);e.src=r}))}}class Sr extends wr{load(t){return fs(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{const s=new Image;s.src=t.url,s.crossOrigin="anonymous",s.onload=()=>{e(s)},s.onerror=t=>{i(null)}}))}))}getImageSize(t,e){return new Promise((e=>e(new i(t.width,t.height))))}}class _r{constructor(){this.initialization()}initialization(){this.handleBindEventsHandler()}}class Cr extends br{getPainter(t){return new g(t)}}class Dr extends _r{getGradientStrategy(){return new xr}getAssetsImageStrategy(){return new Sr}getImageStrategy(){return new Pr}getPainterStrategy(){return new Cr}handleBindEventsHandler(){new cr}}class Tr{constructor(t){if(this._devScale=1,this._devicePixelRatio=1,!t)return;const{designWidth:e=750,designHeight:i=1334,devicePixelRatio:s=1,canvasWidth:n,canvasHeight:r,minTextAdapt:o=!1}=t;this.scaleWidth=n/e,this.scaleHeight=r/i,this.designWidth=e,this.designHeight=i,this.scaleText=o?Math.min(this.scaleWidth,this.scaleHeight):this.scaleWidth,this._deviceCanvasRatio=t.deviceCanvasRatio||{widthRatio:1,heightRatio:1},this.computeDevicePixelRatio(s)}computeDevicePixelRatio(t){this._devicePixelRatio=t,this._devScale=1/this._devicePixelRatio}get deviceCanvasRatio(){return this._deviceCanvasRatio}get devScale(){return this._devScale}get devicePixelRatio(){return this._devicePixelRatio}setSp(t){return this.scaleText*t}setWidth(t){return this.scaleWidth*t}setHeight(t){return this.scaleHeight*t}get fullWidth(){return this.setWidth(this.designWidth)}get fullHeight(){return this.setHeight(this.designHeight)}restoreFromFactorWidthWidth(t){return t/this.scaleWidth}restoreFromFactorWidthHeight(t){return t/this.scaleHeight}restoreFromFactorWidthText(t){return t/this.scaleText}setDevicePixelRatio(t){this._devicePixelRatio=t}}export{Mi as Align,Ni as AlignRenderView,Hi as Alignment,vi as AnimationController,Fe as AnimationStatus,Hn as ArcPath,Nn as ArcToPath,xn as AssetsImageProvider,C as Axis,j as AxisDirection,oi as Binding,Ht as BindingBase,an as Border,Zi as BorderRadius,hn as BorderSide,lt as BorderStyle,ms as BouncingScrollPhysics,bi as BouncingSimulation,on as BoxBorder,c as BoxConstraints,cn as BoxDecoration,Ui as BoxDecorationRenderView,en as BoxFit,dn as BoxPainter,dr as BoxShadow,zt as BuildContext,Lt as BuildOwner,Ii as Center,hi as ChangeNotifier,T as Clip,Vn as ClipPath,Un as ClipPathRenderView,Ki as ClipRRect,Qi as ClipRRectRenderView,qi as ClipRect,Ji as ClipRectRenderView,S as Color,ji as ColoredBox,Vi as ColoredRender,_ as Colors,as as Column,Nt as ComponentElement,Xi as ConstrainedBox,Gi as ConstrainedBoxRender,d as Constraints,ss as Container,L as CrossAxisAlignment,di as Curve,ui as Curves,Ts as CustomClipper,Fn as CustomClipperRenderView,Ds as CustomPainter,Fi as DecoratedBox,ln as Decoration,Sr as DefaultNativeAssetsImageStrategy,xr as DefaultNativeGradientStrategy,Dr as DefaultNativeStrategies,li as Duration,ts as EdgeInsets,$i as EdgeInsetsGeometry,Bn as EditTextIndicatorPainter,Ln as Editable,zn as EditableText,Ot as Element,ri as ElementBinding,hs as Expanded,rs as Flex,ns as FlexRenderView,q as FontStyle,X as FontWeight,wi as FrictionSimulation,g as GenPainter,w as GenPlatformConfig,ie as GenPointerEvent,se as GenUnifiedPointerEvent,Ms as GestureDetector,x as GlobalKey,or as Gradient,F as GrowthDirection,wn as Image,pn as ImageDecoration,gn as ImageDecorationPainter,fn as ImageProvider,bn as ImageRenderView,At as InactiveElement,f as Key,us as LayoutBuilder,Mn as LineToPath,ar as LinearGradient,ai as Listenable,Ws as Listener,R as MainAxisAlignment,at as MainAxisSize,In as MoveToPath,Pt as MulParagraph,Jt as MultiChildRenderObjectElement,Qt as MultiChildRenderObjectWidget,wr as NativeAssetsImageStrategy,ne as NativeEventsBinding,re as NativeEventsBindingHandler,yr as NativeEventsBindingStrategy,vr as NativeGradientStrategy,fr as NativeNetWorkImageStrategy,br as NativePainterStrategy,_r as NativeStrategies,Cn as NativeTextInputHandler,vn as NetWorkImageProvider,t as Offset,nr as Opacity,is as Padding,es as PaddingRenderView,u as PaintingStyle,bt as Paragraph,ut as ParagraphConstraints,pt as ParagraphStyle,sr as ParagraphView,te as ParentDataElement,ee as ParentDataWidget,On as Path,jn as Path2D,ii as PipelineOwner,Kn as Positioned,It as ProxyElement,jt as ProxyWidget,hr as RadialGradient,Ns as RawGestureDetector,Wn as RectPath,Xt as RenderObjectElement,qt as RenderObjectWidget,Hs as RenderPointerListener,Gn as RenderTransformBox,Wi as RenderViewPort,Oi as RenderViewPortBase,ni as RendererBinding,Wt as RootElement,$t as RootRenderObjectElement,Ne as RootWidget,os as Row,ei as SchedulerBinding,ti as SchedulerFrameManager,Tr as ScreenUtils,Xs as ScrollBar,js as ScrollController,Z as ScrollDirection,ps as ScrollPhysics,Li as ScrollPosition,zi as ScrollPositionWithSingleContext,tn as ScrollView,qs as Scrollable,v as SimpleKey,gs as SimpleScrollPhysics,fi as Simulation,Yt as SingleChildRenderObjectElement,Kt as SingleChildRenderObjectWidget,$s as SingleChildScrollView,i as Size,Yi as SizedBox,Bi as SliverPhysicalParentData,Xn as Stack,k as StackFit,qn as StackParentData,Yn as StackRenderView,Gt as State,Zt as StatefulWidget,Ft as StatelessWidget,mr as Strategy,lr as SweepGradient,er as Text,st as TextAlign,rt as TextBaseline,J as TextDecoration,$ as TextDecorationStyle,O as TextDirection,En as TextEditingValue,Tn as TextInput,et as TextOverflow,Ct as TextPainter,ir as TextRich,_t as TextSpan,gt as TextStyle,Zn as Transform,Js as ViewPort,Ai as ViewPortOffset,Mt as Widget,Qs as WidgetToSliverAdapter,Jn as Wrap,H as WrapAlignment,N as WrapCrossAlignment,tr as WrapRenderView,rn as applyBoxFit,Ie as default,Ie as runApp};
